[{"type":"js","data":"//////////////////////////////////////////////////////////////////////////\n//                                                                      //\n// This is a generated file. You can view the original                  //\n// source in your browser if your browser supports source maps.         //\n// Source maps are supported by all recent versions of Chrome, Safari,  //\n// and Firefox, and by Internet Explorer 11.                            //\n//                                                                      //\n//////////////////////////////////////////////////////////////////////////\n\n\n(function () {\n\n/* Imports */\nvar Meteor = Package.meteor.Meteor;\nvar global = Package.meteor.global;\nvar meteorEnv = Package.meteor.meteorEnv;\n\n/* Package-scope variables */\nvar PaginatedSubscriptionHandle;\n\n(function(){\n\n///////////////////////////////////////////////////////////////////////////////////////\n//                                                                                   //\n// packages/percolate_paginated-subscription/packages/percolate_paginated-subscripti //\n//                                                                                   //\n///////////////////////////////////////////////////////////////////////////////////////\n                                                                                     //\n(function () {                                                                       // 1\n                                                                                     // 2\n/////////////////////////////////////////////////////////////////////////////////    // 3\n//                                                                             //    // 4\n// packages/percolate:paginated-subscription/paginated_subscription.js         //    // 5\n//                                                                             //    // 6\n/////////////////////////////////////////////////////////////////////////////////    // 7\n                                                                               //    // 8\nPaginatedSubscriptionHandle = function(perPage) {                              // 1  // 9\n  this.perPage = perPage;                                                      // 2  // 10\n  this._limit = perPage;                                                       // 3  // 11\n  this._limitListeners = new Deps.Dependency();                                // 4  // 12\n  this._loaded = 0;                                                            // 5  // 13\n  this._loadedListeners = new Deps.Dependency();                               // 6  // 14\n}                                                                              // 7  // 15\n                                                                               // 8  // 16\nPaginatedSubscriptionHandle.prototype.loaded = function() {                    // 9  // 17\n  this._loadedListeners.depend();                                              // 10\n  return this._loaded;                                                         // 11\n}                                                                              // 12\n                                                                               // 13\nPaginatedSubscriptionHandle.prototype.limit = function() {                     // 14\n  this._limitListeners.depend();                                               // 15\n  return this._limit;                                                          // 16\n}                                                                              // 17\n                                                                               // 18\nPaginatedSubscriptionHandle.prototype.ready = function() {                     // 19\n  return this.loaded() === this.limit();                                       // 20\n}                                                                              // 21\n                                                                               // 22\n// deprecated                                                                  // 23\nPaginatedSubscriptionHandle.prototype.loading = function() {                   // 24\n  return ! this.ready();                                                       // 25\n}                                                                              // 26\n                                                                               // 27\nPaginatedSubscriptionHandle.prototype.loadNextPage = function() {              // 28\n  this._limit += this.perPage;                                                 // 29\n  this._limitListeners.changed();                                              // 30\n}                                                                              // 31\n                                                                               // 32\nPaginatedSubscriptionHandle.prototype.done = function() {                      // 33\n  this._loaded = this._limit;                                                  // 34\n  this._loadedListeners.changed();                                             // 35\n}                                                                              // 36\n                                                                               // 37\nPaginatedSubscriptionHandle.prototype.reset = function() {                     // 38\n  this._limit = this.perPage;                                                  // 39\n  this._limitListeners.changed();                                              // 40\n}                                                                              // 41\n                                                                               // 42\n                                                                               // 43\nMeteor.subscribeWithPagination = function (/*name, arguments, perPage */) {    // 44\n  var args = Array.prototype.slice.call(arguments, 0);                         // 45\n  var lastArg = args.pop();                                                    // 46\n  var perPage, cb;                                                             // 47\n  if (_.isFunction(lastArg) || _.isObject(lastArg)) {                          // 48\n    cb = lastArg;                                                              // 49\n    perPage = args.pop();                                                      // 50\n  } else {                                                                     // 51\n    perPage = lastArg;                                                         // 52\n  }                                                                            // 53\n                                                                               // 54\n  var handle = new PaginatedSubscriptionHandle(perPage);                       // 55\n                                                                               // 56\n  var argAutorun = Meteor.autorun(function() {                                 // 57\n    var ourArgs = _.map(args, function(arg) {                                  // 58\n      return _.isFunction(arg) ? arg() : arg;                                  // 59\n    });                                                                        // 60\n                                                                               // 61\n    ourArgs.push(handle.limit());                                              // 62\n    cb && ourArgs.push(cb);                                                    // 63\n    var subHandle = Meteor.subscribe.apply(this, ourArgs);                     // 64\n                                                                               // 65\n    // whenever the sub becomes ready, we are done. This may happen right away // 66\n    // if we are re-subscribing to an already ready subscription.              // 67\n    Meteor.autorun(function() {                                                // 68\n      if (subHandle.ready())                                                   // 69\n        handle.done();                                                         // 70\n    });                                                                        // 71\n  });                                                                          // 72\n                                                                               // 73\n  // this will stop the subHandle, and the done autorun                        // 74\n  handle.stop = _.bind(argAutorun.stop, argAutorun);                           // 75\n                                                                               // 76\n  return handle;                                                               // 77\n}                                                                              // 78\n                                                                               // 79\n/////////////////////////////////////////////////////////////////////////////////    // 88\n                                                                                     // 89\n}).call(this);                                                                       // 90\n                                                                                     // 91\n///////////////////////////////////////////////////////////////////////////////////////\n\n}).call(this);\n\n\n/* Exports */\nif (typeof Package === 'undefined') Package = {};\nPackage['percolate:paginated-subscription'] = {};\n\n})();\n","servePath":"/packages/percolate_paginated-subscription.js"}]
{"version":3,"sources":["meteor://ðŸ’»app/imports/ui/components/editor.js","meteor://ðŸ’»app/imports/ui/components/navigation.js","meteor://ðŸ’»app/imports/ui/layouts/applicationLayout.js","meteor://ðŸ’»app/imports/ui/pages/bigPicture.js","meteor://ðŸ’»app/imports/ui/pages/blogs.js","meteor://ðŸ’»app/imports/ui/pages/course.js","meteor://ðŸ’»app/imports/ui/pages/dashboard.js","meteor://ðŸ’»app/imports/ui/pages/details.js","meteor://ðŸ’»app/imports/ui/pages/firstTime.js","meteor://ðŸ’»app/imports/ui/pages/login.js","meteor://ðŸ’»app/imports/ui/pages/stream.js","meteor://ðŸ’»app/imports/ui/lib/alert.js","meteor://ðŸ’»app/imports/ui/lib/charting.js","meteor://ðŸ’»app/imports/ui/lib/morphext.js","meteor://ðŸ’»app/imports/api/images/images.js","meteor://ðŸ’»app/imports/startup/client/algoliaAll.js","meteor://ðŸ’»app/imports/startup/client/algoliaSearch.js","meteor://ðŸ’»app/imports/startup/client/facebook.js","meteor://ðŸ’»app/imports/startup/client/imports.js","meteor://ðŸ’»app/imports/startup/client/index.js","meteor://ðŸ’»app/imports/startup/client/routes.js","meteor://ðŸ’»app/client/main.js"],"names":["Images","module","watch","require","v","operationStack","hasUnsplash","originalTitle","allPosts","Template","onRendered","Tracker","autorun","Meteor","subscribeWithPagination","subscribe","blogDraft","blogEditor","categorySub","courseSub","clubSub","ready","categories","BlogCategories","find","observeChanges","added","id","fields","newCat","Option","name","$","append","courses","Courses","clubs","Clubs","code","document","select2","placeholder","allowClear","datepicker","startDate","$editor","froalaEditor","scaytAutoload","scaytOptions","enableOnTouchDevices","localization","extraModules","DefaultSelection","spellcheckLang","contextMenuSections","serviceProtocol","servicePort","serviceHost","servicePath","contextMenuForMisspelledOnly","scriptPath","toolbarButtons","toolbarButtonsSM","placeholderText","tableStyles","class1","paragraphFormat","N","H2","PRE","fileAllowedTypes","on","e","editor","images","self","insert","err","fileObj","c","findOne","_id","url","imgList","length","remove","link","isClient","Dropzone","autoDiscover","tagsinput","blogDrop","initDropZone","number","size","message","announcementEditor","Categories","arrayOfImageIds","announcementDrop","announcementImageTwo","suggestionEditor","suggestionDrop","announcementOptions","helpers","Roles","userIsInRole","userId","Drafts","moment","draftedDate","format","unsplash","urls","full","imgId","type","Posts","meta","screeningStage","text","events","Session","get","set","swapElements","push","css","overflow","pop","evt","maxlength","target","attr","val","console","log","priority","removeClass","addClass","preventDefault","loadNextPage","hasClass","obj","closest","setEditorContent","alertConfirm","accepted","alertError","alertSuccess","event","template","json","constructBlogJson","call","wipeEditor","update","html","list","getKeyWord","agent","getImg","data","results","replaceWith","regular","user","links","location","num","getRandomInt","imageID","previewPost","title","subtitle","content","tags","setPersistent","window","open","constructAnnouncementJson","subType","headline","value","authorId","Date","author","info","maxFiles","maxFilesize","thumbnailWidth","addRemoveLinks","dictDefaultMessage","accept","file","done","FSFile","FS","File","extension","a","b","fadeOut","fadeIn","min","max","Math","floor","random","_","forEach","item","visibility","trigger","organizationsValues","releaseDate","endDate","str","separators","split","RegExp","join","options","i","opt","selected","orgOptions","getElementById","orgNames","orgVal","imageFirst","organizationsNames","clubList","keyword_extractor","keywords","extraction_result","extract","language","remove_digits","return_changed_case","remove_duplicates","remove_max_ngrams","Typed","navigation","hide","hits","now","diff","abs","minutes","mark","sideNav","sideNavPrompt","toggleClass","searchBox","searchContent","prompt","is","show","typed","strings","typeSpeed","loop","shuffle","showCursor","cursorChar","Modal","icon","searchPrompt","searchPost","teachAssistPass","profile","student_number","teachAssistConnect","pass","password","users","$set","FlowRouter","reload","setTitle","setProgressBar","percentage","animate","width","flickity","imagesLoaded","morphSettings","animation","separator","speed","complete","bigPicture","newsSub","imageSub","cellAlign","contain","lazyLoad","autoPlay","pageDots","prevNextButtons","pauseAutoPlayOnHover","selectedAttraction","friction","bigPictureItem","bottomBar","displayTime","Morphext","time","setTimeout","blogs","onCreated","blogCategory","limit","blogItem","services","google","releasedDate","string","substring","go","course","sub","indexOf","k","t","marks","categoryMarks","datasets","drawChart","scroll","each","arr","assessment","newArr","splice","round","outOf","O","choice","object","section","achieved","weight","background","K","T","C","A","slideDown","slideUp","filterValue","currentValue","names","timeline","drawPolyChart","drawPerformChart","dashboard","dashCategories","dashHome","dashSuggestions","dashOrganizations","dashUsers","dashAnnouncements","Suggestions","featured","createdDate","picture","includes","reason","alertPrompt","result","codes","dashRoleEditor","roles","dashClubEditor","drop","dashCategoryEditor","dashPostEditor","description","room","schedule","details","image","firstTime","email","userInfo","validateEmail","given_name","family_name","checked","re","test","login","prop","height","opacity","loginWithPassword","registerEmail","firstName","lastName","registerPassword","Accounts","createUser","username","fullName","homeRoom","alert","loginWithGoogle","loginStyle","requestPermissions","onLogin","redirect","isotopeSettings","itemSelector","percentPosition","masonry","columnWidth","gutter","stream","$grid","postSub","isotope","progress","query","changed","removed","fetch","reverse","filter","getUnsplashLink","body","bootbox","buttons","ok","label","className","callback","confirm","cancel","inputType","chart","Chart","defaults","global","legend","display","tooltips","enabled","chartId","color","ctx","getContext","labels","toFixed","backgroundColor","hoverBackgroundColor","drawSmallChartSide","myNewChart","drawSmallChart","assignments","fill","lineTension","borderColor","borderCapStyle","borderDash","borderDashOffset","borderJoinStyle","pointBorderColor","pointBackgroundColor","pointBorderWidth","pointHoverRadius","pointHoverBackgroundColor","pointHoverBorderColor","pointHoverBorderWidth","pointRadius","pointHitRadius","spanGaps","myChart","scales","xAxes","ticks","yAxes","drawHalfChart","total","myDoughnutChart","cutoutPercentage","rotation","PI","circumference","drawHalfChartSide","drawPolyChartSide","pluginName","noop","Plugin","element","settings","extend","_defaults","_init","prototype","$that","phrases","key","trim","index","start","innerHTML","isFunction","_interval","setInterval","stop","clearInterval","fn","jQuery","export","imageStore","Store","GridFS","Collection","stores","allow","download","client","AlgoliaSearch","initIndex","searchAll","keyword","search","searchDone","error","nbHits","module1","setupFacebook","FB","init","appId","status","xfbml","version","response","extendToken","accessToken","appSec","response2","grant_type","client_id","client_secret","fb_exchange_token","postTextFacebook","pageToken","pageId","api","access_token","scope","postImageFacebook","postTextImageFacebook","Mongo","Deps","setDefault","getUserLanguage","startup","TAPi18n","setLanguage","fail","error_message","loggedIn","group","triggersEnter","route","loggingIn","current","path","userSub","private","token","tokenDate","admin","action","BlazeLayout","render","dash","waitOn","loginServicesConfigured","main","params","postId","post","scrollTo","tokenJson","subject_id","courseId","ERROR","found","entry","logout","clear","checkTokenExpiry"],"mappings":"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;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","file":"/app.js","sourcesContent":["/**\r\n * Created by Yonglin Wang on 8/4/2017.\r\n */\r\nimport {Images} from '../../api/images/images.js';\r\n\r\nimport './editor.html';\r\nlet operationStack = ['.editor-open'];\r\nlet hasUnsplash = false;\r\nlet originalTitle = \"\";\r\nlet allPosts = null;\r\nTemplate.allPosts.onRendered(function () {\r\n    Tracker.autorun(function () {\r\n        allPosts = Meteor.subscribeWithPagination('postsByUser', 10);\r\n        Meteor.subscribe('images')\r\n    })\r\n});\r\n\r\nTemplate.blogDraft.onRendered(function () {\r\n    Tracker.autorun(function () {\r\n        Meteor.subscribeWithPagination('drafts', 10);\r\n        Meteor.subscribe('images')\r\n    })\r\n});\r\n\r\nTemplate.blogEditor.onRendered(function () {\r\n    Tracker.autorun(function () {\r\n        let categorySub = Meteor.subscribe('blogCategories');\r\n        let courseSub = Meteor.subscribe('allCourses',1000);\r\n        let clubSub = Meteor.subscribe('allClubs',1000);\r\n        if(categorySub.ready()){\r\n            let categories = BlogCategories.find({});\r\n            categories.observeChanges({\r\n                added: function(id, fields) {\r\n                    let newCat = new Option(fields.name, fields.name);\r\n                    $('#blogCategorySelect').append(newCat);\r\n                }\r\n            });\r\n        }\r\n        if(courseSub.ready() && clubSub.ready()){\r\n            let courses = Courses.find({});\r\n            let clubs = Clubs.find({});\r\n            courses.observeChanges({\r\n                added: function (id, fields) {\r\n                    let newCat = new Option(fields.name + \" - \" + fields.code, fields.code);\r\n                    $('#blogOrganizationSelect').append(newCat)\r\n                }\r\n            });\r\n            clubs.observeChanges({\r\n                added: function (id, fields) {\r\n                    let newCat = new Option(fields.name, fields.code);\r\n                    $('#blogOrganizationSelect').append(newCat)\r\n                }\r\n            })\r\n        }\r\n    });\r\n    $(document).ready(function () {\r\n        $('#blogCategorySelect').select2({\r\n            placeholder: \"Click to select matching categories\",\r\n            allowClear: true\r\n        });\r\n        $('#blogOrganizationSelect').select2({\r\n            placeholder: \"Click to select matching categories\",\r\n            allowClear: true\r\n        });\r\n        // Append it to the select\r\n        $('.visibility-select').select2({\r\n            placeholder: \"Click to select the scope of this post\",\r\n        });\r\n        $('.input-date').datepicker({\r\n            startDate: '+1d'\r\n        });\r\n        let $editor = $('.editable');\r\n        $editor.froalaEditor({\r\n            scaytAutoload: false,\r\n            //This setting can be completely ignored.\r\n            scaytOptions: {\r\n                enableOnTouchDevices: false,\r\n                localization: 'en',\r\n                extraModules: 'ui',\r\n                DefaultSelection: 'American English',\r\n                spellcheckLang: 'en_US',\r\n                contextMenuSections: 'suggest|moresuggest',\r\n                serviceProtocol: 'https',\r\n                servicePort: '80',\r\n                serviceHost: 'svc.webspellchecker.net',\r\n                servicePath: 'spellcheck/script/ssrv.cgi',\r\n                contextMenuForMisspelledOnly: true,\r\n                scriptPath: 'https://demo.webspellchecker.net/froala/customscayt.js'\r\n            },\r\n            //ignore end\r\n            toolbarButtons: ['fullscreen', '|', 'paragraphFormat', 'bold', 'italic', 'underline', 'strikeThrough', 'subscript', 'superscript', '|', 'align', 'formatOL', 'formatUL', 'outdent', 'indent', 'quote', '-', 'insertLink', 'insertImage', 'insertFile', 'insertVideo', 'insertTable', '|', 'emoticons', 'specialCharacters', 'insertHR', '|', 'print', 'help', '|', 'undo', 'redo'],\r\n            toolbarButtonsSM: ['fullscreen', '|', 'bold', 'italic', 'underline', '|', 'paragraphFormat', 'align', 'formatOL', 'formatUL', 'outdent', 'indent', 'quote', '-', 'insertLink', 'insertImage', 'insertFile', 'insertVideo', 'insertTable', '|', 'specialCharacters', 'insertHR', 'selectAll', 'clearFormatting', '|', 'print', 'help', '|', 'undo', 'redo'],\r\n            placeholderText: 'Tell your story here...',\r\n            tableStyles: {\r\n                class1: 'table',\r\n            },\r\n            paragraphFormat: {\r\n                N: 'Normal',\r\n                H2: 'Title',\r\n                PRE: 'Code'\r\n            },\r\n            fileAllowedTypes: ['application/pdf', 'application/msword']\r\n        });\r\n        $editor.on('froalaEditor.image.beforeUpload', function (e, editor, images) {\r\n            let self = $(this);\r\n\r\n            Images.insert(images[0], function (err, fileObj) {\r\n                //console.log(\"editor \",  editor);\r\n                //console.log(\"after insert:\", fileObj._id);\r\n                Tracker.autorun(function (c) {\r\n                    fileObj = Images.findOne(fileObj._id);\r\n                    let url = fileObj.url();\r\n                    if (url) {\r\n                        let imgList = $('img.fr-fic');\r\n                        self.froalaEditor('image.insert', url, true);\r\n                        imgList[imgList.length - 1].remove();\r\n                        return {\r\n                            link: url\r\n                        };\r\n                    }\r\n                });\r\n            });\r\n        });\r\n        if (Meteor.isClient) {\r\n            Dropzone.autoDiscover = false;\r\n            $(\".tags\").tagsinput('items');\r\n            let blogDrop = initDropZone('dropzone', {\r\n                number: 1,\r\n                size: 8,\r\n                message: \"Drop an image here to be the featured image, or click to select an image using the browser.\",\r\n            });\r\n        }\r\n    });\r\n});\r\n\r\nTemplate.announcementEditor.onRendered(function () {\r\n    Tracker.autorun(function () {\r\n        let categorySub = Meteor.subscribe('categories');\r\n        let clubSub = Meteor.subscribe('allClubs',100);\r\n        if(categorySub.ready()){\r\n            let categories = Categories.find({});\r\n            categories.observeChanges({\r\n                added: function(id, fields) {\r\n                    let newCat = new Option(fields.name, fields.name);\r\n                    $('.announcement-category').append(newCat);\r\n                }\r\n            });\r\n        }\r\n        if(clubSub.ready()){\r\n            let clubs = Clubs.find({});\r\n            clubs.observeChanges({\r\n                added: function(id, fields) {\r\n                    let newCat = new Option(fields.name, fields.name);\r\n                    $('.clubs-category').append(newCat);\r\n                }\r\n            });\r\n        }\r\n    });\r\n    $(document).ready(function () {\r\n        $('.category-select').select2({\r\n            placeholder: \"Click to select matching categories\",\r\n            allowClear: true\r\n        });\r\n        $('.input-daterange').datepicker({\r\n            startDate: '+1d'\r\n        });\r\n        if (Meteor.isClient) {\r\n            let arrayOfImageIds = [];\r\n            Dropzone.autoDiscover = false;\r\n            $(\".tags\").tagsinput('items');\r\n            let announcementDrop = initDropZone(\"announcementImage\", {\r\n                number: 1,\r\n                size: 8,\r\n                message: \"Drop your poster here, or click to select an image using the browser.\",\r\n            });\r\n            let announcementImageTwo = initDropZone(\"announcementImageTwo\", {\r\n                number: 1,\r\n                size: 8,\r\n                message: \"Drop your poster here, or click to select an image using the browser.\"\r\n            });\r\n        }\r\n\r\n    });\r\n});\r\n\r\nTemplate.suggestionEditor.onRendered(function () {\r\n    let suggestionDrop = initDropZone('suggestionImage', {\r\n        number: 1,\r\n        size: 8\r\n    });\r\n});\r\n\r\nTemplate.announcementOptions.onRendered(function () {\r\n    this.$(\".announce-tags\").tagsinput('items');\r\n});\r\n\r\nTemplate.editor.helpers({\r\n    'canEdit': function () {\r\n        return Roles.userIsInRole(Meteor.userId(),['teacher','blogEditor','announcementEditor','admin']);\r\n    },\r\n    'canWriteAnnounce': function () {\r\n        return Roles.userIsInRole(Meteor.userId(),['teacher','admin','announcementEditor'])\r\n    },\r\n    'canWriteBlog': function () {\r\n        return Roles.userIsInRole(Meteor.userId(),['teacher','admin','blogEditor'])\r\n    }\r\n});\r\n\r\nTemplate.blogDraft.helpers({\r\n    'drafts': function () {\r\n        return Drafts.find({})\r\n    },\r\n    'draftedDate': function () {\r\n        return moment(this.draftedDate).format('MMMM Do YYYY')\r\n    },\r\n    'imageLink': function () {\r\n        if(this.unsplash){\r\n            return this.unsplash.urls.full;\r\n        }else{\r\n            try{\r\n                return Images.findOne({_id: this.imgId}).url();\r\n            }catch(e){\r\n                //console.log('error getting photo')\r\n            }\r\n        }\r\n    },\r\n    'isBlog': function () {\r\n        return this.type === 'blog'\r\n    }\r\n});\r\n\r\nTemplate.allPosts.helpers({\r\n    'post': function () {\r\n        return Posts.find({\r\n            'author': Meteor.userId()\r\n        });\r\n    },\r\n    'draftedDate': function () {\r\n        return moment(this.draftedDate).format('MMMM Do YYYY')\r\n    },\r\n    'imageLink': function () {\r\n        if(this.unsplash){\r\n            return this.unsplash.urls.full;\r\n        }else{\r\n            try{\r\n                return Images.findOne({_id: this.imgId}).url();\r\n            }catch(e){\r\n                //console.log('error getting photo')\r\n            }\r\n        }\r\n    },\r\n    'isBlog': function () {\r\n        return this.type === 'blog'\r\n    },\r\n    'stage': function () {\r\n        return this.meta.screeningStage;\r\n    },\r\n    'stageCaption': function () {\r\n        let text = 'Post Submitted';\r\n        if(this.meta.screeningStage === 3){\r\n            text = \"Post Approved\"\r\n        }else if(this.meta.screeningStage === -1){\r\n            text = \"Post Rejected\"\r\n        }\r\n        return text;\r\n    }\r\n});\r\n\r\n\r\n/* Events */\r\nTemplate.editor.events({\r\n    'click #openEditor': function () {\r\n        originalTitle = Session.get('DocumentTitle');\r\n        Session.set('DocumentTitle', 'Composer | uhs.life');\r\n\r\n        swapElements('.editor-open', '.editor-main');\r\n        if (operationStack.length === 1) {\r\n            operationStack.push('.blog-intro');\r\n        }\r\n        $('html, body').css({\r\n            overflow: 'hidden'\r\n        }); // Disables the Scrolling\r\n    },\r\n    'click #startNewDraft': function () {\r\n        swapElements('.blog-intro', '.post-type');\r\n        operationStack.push('.post-type');\r\n    },\r\n    'click #checkDrafts': function () {\r\n        swapElements('.blog-intro', '.blog-drafts');\r\n        operationStack.push('.blog-drafts');\r\n    },\r\n    'click #checkAll': function () {\r\n        swapElements('.blog-intro', '.all-posts');\r\n        operationStack.push('.all-posts');\r\n    },\r\n    'click #startBlog': function () {\r\n        swapElements('.post-type', '.blog-editor');\r\n        operationStack.push('.blog-editor');\r\n        Session.set('announcementType', 'blog');\r\n    },\r\n    'click #startAnnouncement': function () {\r\n        swapElements('.post-type', '.announcement-menu');\r\n        operationStack.push('.announcement-menu');\r\n    },\r\n    'click #startSuggestion': function () {\r\n        swapElements('.post-type', '.suggestions');\r\n        operationStack.push('.suggestions');\r\n        Session.set('announcementType', 'suggestion');\r\n    },\r\n    'click .editor-close': function () {\r\n        Session.set('DocumentTitle', originalTitle);\r\n        swapElements('.editor-main', '.editor-open');\r\n        $('html, body').css({\r\n            overflow: 'visible'\r\n        }); // Disables the Scrolling\r\n    },\r\n    'click .editor-back': function () {\r\n        if (operationStack.length - 2 === 0) {\r\n            Session.set('DocumentTitle', originalTitle);\r\n            swapElements('.editor-main', '.editor-open');\r\n            $('html, body').css({\r\n                overflow: 'visible'\r\n            }); // Enables the Scrolling\r\n        } else {\r\n            swapElements(operationStack[operationStack.length - 1], operationStack[operationStack.length - 2]);\r\n        }\r\n        operationStack.pop();\r\n    },\r\n    'click #imageOnly': function () {\r\n        swapElements('.announcement-menu', '.image-only');\r\n        operationStack.push('.image-only');\r\n        Session.set('announcementType', 'imageOnly');\r\n    },\r\n    'click #textOnly': function () {\r\n        swapElements('.announcement-menu', '.text-only');\r\n        operationStack.push('.text-only');\r\n        Session.set('announcementType', 'textOnly');\r\n    },\r\n    'click #textAndImage': function () {\r\n        swapElements('.announcement-menu', '.text-and-image');\r\n        operationStack.push('.text-and-image');\r\n        Session.set('announcementType', 'textAndImage');\r\n    },\r\n    'input .announcement-text': function (evt) {\r\n        let maxlength = $(evt.target).attr(\"maxlength\");\r\n        let length = $(evt.target).val().length;\r\n\r\n        if (length >= maxlength) {\r\n            console.log(\"You have reached the maximum number of characters.\");\r\n            $('.announcement-counter').text(0);\r\n        } else {\r\n            $('.announcement-counter').text(maxlength - length);\r\n        }\r\n    },\r\n    'click .priority-toggle': function (evt) {\r\n        let priority = $(evt.target).attr('data-priority');\r\n        $('.is-checked').removeClass('is-checked');\r\n        $(evt.target).addClass('is-checked');\r\n        Session.set('priority', priority);\r\n    }\r\n});\r\nTemplate.allPosts.events({\r\n    'click .load-more-posts': function (evt) {\r\n        evt.preventDefault();\r\n        allPosts.loadNextPage();\r\n    },\r\n    'click .draft-item': function (evt) {\r\n        if(!$(evt.target).hasClass('btn-delete-post') && !$(evt.target).hasClass('btn-republish-post')){\r\n            let obj = $(evt.target).closest($('.draft-item'));\r\n            let id = obj.attr('id');\r\n            setEditorContent(Posts.findOne({_id: id}));\r\n        }\r\n    },\r\n    'click .btn-delete-post': function (evt) {\r\n        evt.preventDefault();\r\n        let obj = $(evt.target).closest($('.draft-item'));\r\n        let id = obj.attr('id');\r\n        alertConfirm('Are you sure','This action cannot be reverted, if you don\\'t want this post to show up in the list, we recommend you archive it.', function (accepted) {\r\n            if(accepted){\r\n                Posts.remove({_id: id}, function (err) {\r\n                    if(err){\r\n                        alertError(\"Error Removing Post\", \"Please try again later.\\n\"+ err.message)\r\n                    }else{\r\n                        alertSuccess(\"Successfully Removed Post\", \"\")\r\n                    }\r\n                })\r\n            }\r\n        })\r\n    }\r\n});\r\nTemplate.blogEditor.events({\r\n    'click .publish': function (event, template) {\r\n        let json = constructBlogJson();\r\n\r\n        Meteor.call('posts.postBlog', json, function (err) {\r\n            if (err) {\r\n                alertError('Post Failed!', err.message);\r\n            } else {\r\n                alertSuccess('Success!', 'The post has been submitted.');\r\n                Drafts.remove({_id: Session.get('draftEditItem')});\r\n                Session.set('draftEditItem', null);\r\n                wipeEditor('blog');\r\n                // Go back\r\n                if (operationStack.length - 2 === 0) {\r\n                    swapElements('.editor-main', '.editor-open');\r\n                    $('html, body').css({\r\n                        overflow: 'visible'\r\n                    }); // Enables the Scrolling\r\n                } else {\r\n                    swapElements(operationStack[operationStack.length - 1], operationStack[operationStack.length - 2]);\r\n                }\r\n                operationStack.pop();\r\n            }\r\n        });\r\n    },\r\n    'click .save-draft' : function() {\r\n        let json = constructBlogJson();\r\n        if(Session.get('draftEditItem')){\r\n            Drafts.update({_id: Session.get('draftEditItem')}, json, function (err) {\r\n                if(err){\r\n                    alertError('Saving Draft Failed!', err.message);\r\n                }else{\r\n                    alertSuccess(\"Saved!\",\"\")\r\n                }\r\n            });\r\n        }else{\r\n            Meteor.call('drafts.postDraftBlog', json, function (err) {\r\n                if (err) {\r\n                    alertError('Saving Draft Failed!', err.message);\r\n                } else {\r\n                    alertSuccess('Success!', 'The draft has been saved.');\r\n                }\r\n            });\r\n        }\r\n    },\r\n    'click #getFeaturedUnsplash': function (evt, template) {\r\n        $('#unsplashPrompt').html(\"<i class='fa fa-spinner fa-pulse fa-fw'></i> Please Wait...\");\r\n        Meteor.call('setupUnsplash', function (err) {\r\n            if (err) {\r\n                console.log(err);\r\n                hasUnsplash = false;\r\n            } else {\r\n                let list = getKeyWord($('.editable').froalaEditor('html.get'));\r\n                let agent = 0;\r\n                let getImg = function(){\r\n                    Meteor.call('searchKeyword', list[agent], function (err, data) {\r\n                        if (err) {\r\n                            console.log(err);\r\n                            $('#unsplashPrompt').html(\"Sorry... We failed to find an image for you. Please upload one.\");\r\n                            hasUnsplash = false;\r\n                        } else {\r\n                            console.log(data);\r\n                            if(data.results.length <= 0){\r\n                                agent++;\r\n                                if(agent <= list.length){\r\n                                    console.log('no image found');\r\n                                    getImg();\r\n                                }else{\r\n                                    $('#unsplashPrompt').html(\"<i class='fa fa-spinner fa-pulse fa-fw'></i> Please Wait...\");\r\n                                    Meteor.call('getRandomPhoto', function (err, data) {\r\n                                        if (err) {\r\n                                            console.log(err);\r\n                                            $('.unsplash-container').replaceWith(\"<form action='/file-upload' class='dropzone' id='dropzone'></form>\");\r\n                                            let blogDrop = initDropZone('dropzone', {\r\n                                                number: 1,\r\n                                                size: 8,\r\n                                                message: \"Drop an image here to be the featured image, or click to select an image using the browser.\",\r\n                                            });\r\n                                            $('#unsplashPrompt').html(\"Sorry... We failed to find an image for you. Please upload one instead.\");\r\n                                            hasUnsplash = false;\r\n                                        } else {\r\n                                            console.log(data);\r\n                                            Session.set('unsplash_img', data.id);\r\n                                            Session.set('unsplashData',data);\r\n                                            $('#dropzone').replaceWith(\"<img src='\" + data.urls.regular + \"' class='img-responsive unsplash-container'/>\");\r\n                                            $('#unsplashPrompt').html(\"Here you go! This image is by <a href='\"+ data.user.links.html +\"?utm_source=uhs.life&utm_medium=referral&utm_campaign=api-credit'>\"+ data.user.name +\"</a> from \"+ data.user.location +\" via <b>Unsplash</b>. <br><br> Want a differnt one? <a href='' id='newUnsplash'>Click Here</a>. Changed your mind? click here to <a href='' id='newUpload'>upload a new image</a>\");\r\n                                        }\r\n                                    })\r\n                                }\r\n                            }else{\r\n                                let num = getRandomInt(0, data.results.length-1);\r\n                                Session.set('unsplash_img', data.results[num].id);\r\n                                Session.set('unsplashData',data.results[num]);\r\n                                hasUnsplash = true;\r\n                                $('#dropzone').replaceWith(\"<img src='\" + data.results[num].urls.regular + \"' class='img-responsive unsplash-container'/>\");\r\n                                $('#unsplashPrompt').html(\"Here you go! This image is by <a href='\"+ data.results[num].user.links.html +\"?utm_source=uhs.life&utm_medium=referral&utm_campaign=api-credit'>\"+ data.results[num].user.name +\"</a> from \"+ data.results[num].user.location +\" via <b>Unsplash</b>. <br><br> This will be your featured image, if you want another one <a href='' id='newUnsplash'>Click Here</a> Changed your mind? click here to <a href='' id='newUpload'>upload a new image</a>\");\r\n                            }\r\n\r\n                        }\r\n                    })\r\n                };\r\n                getImg();\r\n            }\r\n        })\r\n    },\r\n    'click #newUnsplash': function () {\r\n        $('#unsplashPrompt').html(\"<i class='fa fa-spinner fa-pulse fa-fw'></i> Please Wait...\");\r\n        Meteor.call('getRandomPhoto', function (err, data) {\r\n            if (err) {\r\n                console.log(err);\r\n                $('.unsplash-container').replaceWith(\"<form action='/file-upload' class='dropzone' id='dropzone'></form>\");\r\n                let blogDrop = initDropZone('dropzone', {\r\n                    number: 1,\r\n                    size: 8,\r\n                    message: \"Drop an image here to be the featured image, or click to select an image using the browser.\",\r\n                });\r\n                $('#unsplashPrompt').html(\"Sorry... We failed to find an image for you. Please upload one instead.\");\r\n                hasUnsplash = false;\r\n            } else {\r\n                console.log(data);\r\n                Session.set('unsplash_img', data.id);\r\n                Session.set('unsplashData',data);\r\n                $('.unsplash-container').replaceWith(\"<img src='\" + data.urls.regular + \"' class='img-responsive unsplash-container'/>\");\r\n                $('#unsplashPrompt').html(\"Here you go! This image is by <a href='\"+ data.user.links.html +\"?utm_source=uhs.life&utm_medium=referral&utm_campaign=api-credit'>\"+ data.user.name +\"</a> from \"+ data.user.location +\" via <b>Unsplash</b>. <br><br> Want a differnt one? <a href='' id='newUnsplash'>Click Here</a>. Changed your mind? click here to <a href='' id='newUpload'>upload a new image</a>\");\r\n            }\r\n        })\r\n    },\r\n    'click #newUpload': function () {\r\n        $('.unsplash-container').replaceWith(\"<form action='/file-upload' class='dropzone' id='dropzone'></form>\");\r\n        let blogDrop = initDropZone('dropzone', {\r\n            number: 1,\r\n            size: 8,\r\n            message: \"Drop an image here to be the featured image, or click to select an image using the browser.\",\r\n        });\r\n        $('#unsplashPrompt').html(\"Want to avoid the hassle? <a href='' id='getFeaturedUnsplash'>Click here</a> and we will find an image for you!\");\r\n    },\r\n    'click .btn-preview': function () {\r\n        let imageID = (hasUnsplash) ? Session.get('unsplash_img') : Session.get('newImageId');\r\n        let previewPost = {\r\n            title: $('#blogTitle').val() + \" (This is a preview)\",\r\n            subtitle: $('#blogSubTitle').val(),\r\n            content: $('.editable').froalaEditor('html.get'),\r\n            tags: $(\".tags\").val(),\r\n            unsplash: Session.get('unsplashData'),\r\n            imgId: imageID,\r\n            meta: {\r\n                hasUnsplash: hasUnsplash,\r\n            }\r\n        };\r\n        Session.setPersistent('preview_json', previewPost);\r\n        $('html, body').css({\r\n            overflow: 'visible'\r\n        }); // Enables the Scrolling\r\n        window.open('/blog/preview', '_blank');\r\n    }\r\n});\r\nTemplate.announcementOptions.events({\r\n    'click .btn-post': function (event, template) {\r\n        let type = Session.get('announcementType');\r\n        let json = constructAnnouncementJson(type);\r\n        if (type === \"imageOnly\") {\r\n            Meteor.call('posts.postImage', json, function (err) {\r\n                if (err) {\r\n                    alertError('Posting Failed!', err.message);\r\n                } else {\r\n                    alertSuccess('Success!', 'The post has been submitted.');\r\n                    Drafts.remove({_id: Session.get('draftEditItem')});\r\n                    Session.set('draftEditItem', null);\r\n                    wipeEditor('announcement','imageOnly');\r\n                    if (operationStack.length - 2 === 0) {\r\n                        swapElements('.editor-main', '.editor-open');\r\n                        $('html, body').css({\r\n                            overflow: 'visible'\r\n                        }); // Enables the Scrolling\r\n                    } else {\r\n                        swapElements(operationStack[operationStack.length - 1], operationStack[operationStack.length - 2]);\r\n                    }\r\n                    operationStack.pop();\r\n                }\r\n            });\r\n\r\n        } else if (type === \"textOnly\") {\r\n            Meteor.call('posts.postText', json, function (err) {\r\n                if (err) {\r\n                    alertError('Post Failed!', err.message);\r\n                } else {\r\n                    alertSuccess('Success!', 'The post has been submitted.');\r\n                    Drafts.remove({_id: Session.get('draftEditItem')});\r\n                    Session.set('draftEditItem', null);\r\n                    wipeEditor('announcement','textOnly');\r\n                    if (operationStack.length - 2 === 0) {\r\n                        swapElements('.editor-main', '.editor-open');\r\n                        $('html, body').css({\r\n                            overflow: 'visible'\r\n                        }); // Enables the Scrolling\r\n                    } else {\r\n                        swapElements(operationStack[operationStack.length - 1], operationStack[operationStack.length - 2]);\r\n                    }\r\n                    operationStack.pop();\r\n                }\r\n            });\r\n        } else if (type === 'textAndImage') {\r\n            Meteor.call('posts.postTextImage', json, function (err) {\r\n                if (err) {\r\n                    alertError('Post Failed!', err.message);\r\n                } else {\r\n                    alertSuccess('Success!', 'The post has been submitted.');\r\n                    Drafts.remove({_id: Session.get('draftEditItem')});\r\n                    Session.set('draftEditItem', null);\r\n                    wipeEditor('announcement','imageText');\r\n                    if (operationStack.length - 2 === 0) {\r\n                        swapElements('.editor-main', '.editor-open');\r\n                        $('html, body').css({\r\n                            overflow: 'visible'\r\n                        }); // Enables the Scrolling\r\n                    } else {\r\n                        swapElements(operationStack[operationStack.length - 1], operationStack[operationStack.length - 2]);\r\n                    }\r\n                    operationStack.pop();\r\n                }\r\n            });\r\n        }\r\n\r\n    },\r\n    'click .btn-save': function() {\r\n        let type = Session.get('announcementType');\r\n        let json = constructAnnouncementJson(type);\r\n\r\n        if(Session.get('draftEditItem')){\r\n            Drafts.update({_id: Session.get('draftEditItem')}, json, function (err) {\r\n                if(err){\r\n                    alertError('Saving Draft Failed!', err.message);\r\n                }else{\r\n                    alertSuccess(\"Saved!\",\"\");\r\n                    if (operationStack.length - 2 === 0) {\r\n                        swapElements('.editor-main', '.editor-open');\r\n                        $('html, body').css({\r\n                            overflow: 'visible'\r\n                        }); // Enables the Scrolling\r\n                    } else {\r\n                        swapElements(operationStack[operationStack.length - 1], operationStack[operationStack.length - 2]);\r\n                    }\r\n                    operationStack.pop();\r\n                }\r\n            });\r\n        }else{\r\n            if (type === \"imageOnly\") {\r\n\r\n                Meteor.call('drafts.postDraftImage', json, function (err) {\r\n                    if (err) {\r\n                        alertError('Saving Draft Failed!', err.message);\r\n                    } else {\r\n                        alertSuccess('Success!', 'The draft has been saved.');\r\n                        wipeEditor('announcement','imageOnly');\r\n                        if (operationStack.length - 2 === 0) {\r\n                            swapElements('.editor-main', '.editor-open');\r\n                            $('html, body').css({\r\n                                overflow: 'visible'\r\n                            }); // Enables the Scrolling\r\n                        } else {\r\n                            swapElements(operationStack[operationStack.length - 1], operationStack[operationStack.length - 2]);\r\n                        }\r\n                        operationStack.pop();\r\n                    }\r\n                });\r\n\r\n            } else if (type === \"textOnly\") {\r\n\r\n                Meteor.call('drafts.postDraftText', json, function (err) {\r\n                    if (err) {\r\n                        alertError('Saving Draft Failed!', err.message);\r\n                    } else {\r\n                        alertSuccess('Success!', 'The draft has been saved.');\r\n                        wipeEditor('announcement','textOnly');\r\n                        if (operationStack.length - 2 === 0) {\r\n                            swapElements('.editor-main', '.editor-open');\r\n                            $('html, body').css({\r\n                                overflow: 'visible'\r\n                            }); // Enables the Scrolling\r\n                        } else {\r\n                            swapElements(operationStack[operationStack.length - 1], operationStack[operationStack.length - 2]);\r\n                        }\r\n                        operationStack.pop();\r\n                    }\r\n                });\r\n            } else if (type === 'textAndImage') {\r\n                Meteor.call('drafts.postDraftTextImage', json, function (err) {\r\n                    if (err) {\r\n                        alertError('Saving Draft Failed!', err.message);\r\n                    } else {\r\n                        alertSuccess('Success!', 'The draft has been saved.');\r\n                        wipeEditor('announcement','imageText');\r\n                        if (operationStack.length - 2 === 0) {\r\n                            swapElements('.editor-main', '.editor-open');\r\n                            $('html, body').css({\r\n                                overflow: 'visible'\r\n                            }); // Enables the Scrolling\r\n                        } else {\r\n                            swapElements(operationStack[operationStack.length - 1], operationStack[operationStack.length - 2]);\r\n                        }\r\n                        operationStack.pop();\r\n                    }\r\n                });\r\n            }\r\n        }\r\n\r\n\r\n    }\r\n});\r\nTemplate.blogDraft.events({\r\n    'click .btn-delete-draft': function (evt) {\r\n        evt.preventDefault();\r\n        let obj = $(evt.target).closest($('.draft-item'));\r\n        let id = obj.attr('id');\r\n        Meteor.call('drafts.remove', id, function (err) {\r\n            if(err){\r\n                alertError(\"Something went wrong when deleting the draft\", err.message);\r\n            }\r\n        })\r\n    },\r\n    'click .btn-post-draft': function (evt) {\r\n        evt.preventDefault();\r\n        let obj = $(evt.target).closest($('.draft-item'));\r\n        let id = obj.attr('id');\r\n        const json = Drafts.findOne({_id: id});\r\n        let type = json.type;\r\n        if (type === \"imageOnly\") {\r\n            Meteor.call('posts.postImage', json, function (err) {\r\n                if (err) {\r\n                    alertError('Posting Failed!', err.message);\r\n                } else {\r\n                    alertSuccess('Success!', 'The post has been submitted.');\r\n                    Drafts.remove({_id: id});\r\n                }\r\n            });\r\n\r\n        } else if (type === \"textOnly\") {\r\n            Meteor.call('posts.postText', json, function (err) {\r\n                if (err) {\r\n                    alertError('Post Failed!', err.message);\r\n                } else {\r\n                    alertSuccess('Success!', 'The post has been submitted.');\r\n                    Drafts.remove({_id: id});\r\n                }\r\n            });\r\n        } else if (type === 'textAndImage') {\r\n            Meteor.call('posts.postTextImage', json, function (err) {\r\n                if (err) {\r\n                    alertError('Post Failed!', err.message);\r\n                } else {\r\n                    alertSuccess('Success!', 'The post has been submitted.');\r\n                    Drafts.remove({_id: id});\r\n                }\r\n            });\r\n        } else if (type === 'blog'){\r\n            Meteor.call('posts.postBlog', json, function (err) {\r\n                if (err) {\r\n                    alertError('Post Failed!', err.message);\r\n                } else {\r\n                    alertSuccess('Success!', 'The post has been submitted.');\r\n                    Drafts.remove({_id: id});\r\n                }\r\n            });\r\n        }\r\n    },\r\n    'click .btn-publish-draft': function (evt) {\r\n        let obj = $(evt.target).closest($('.draft-item'));\r\n        let id = obj.attr('id');\r\n        let json = Drafts.findOne({_id: id});\r\n        let type = json.subType;\r\n        if(json.type === 'blog'){\r\n            Meteor.call('posts.postBlog', json, function (err) {\r\n                if (err) {\r\n                    alertError('Post Failed!', err.message);\r\n                } else {\r\n                    alertSuccess('Success!', 'The post has been submitted.');\r\n                    Drafts.remove({_id: id});\r\n                }\r\n            })\r\n        }else{\r\n            if (type === \"imageOnly\") {\r\n                Meteor.call('posts.postImage', json, function (err) {\r\n                    if (err) {\r\n                        alertError('Posting Failed!', err.message);\r\n                    } else {\r\n                        alertSuccess('Success!', 'The post has been submitted.');\r\n                        Drafts.remove({_id: id});\r\n                    }\r\n                });\r\n\r\n            } else if (type === \"textOnly\") {\r\n                Meteor.call('posts.postText', json, function (err) {\r\n                    if (err) {\r\n                        alertError('Post Failed!', err.message);\r\n                    } else {\r\n                        alertSuccess('Success!', 'The post has been submitted.');\r\n                        Drafts.remove({_id: id});\r\n                    }\r\n                });\r\n            } else if (type === 'textAndImage') {\r\n                Meteor.call('posts.postTextImage', json, function (err) {\r\n                    if (err) {\r\n                        alertError('Post Failed!', err.message);\r\n                    } else {\r\n                        alertSuccess('Success!', 'The post has been submitted.');\r\n                        Drafts.remove({_id: id});\r\n                    }\r\n                });\r\n            }\r\n        }\r\n    },\r\n    'click .draft-item': function (evt) {\r\n        if(!$(evt.target).hasClass('btn-delete-draft') && !$(evt.target).hasClass('btn-publish-draft')){\r\n            let obj = $(evt.target).closest($('.draft-item'));\r\n            let id = obj.attr('id');\r\n            Session.set('draftEditItem', id);\r\n            setEditorContent(Drafts.findOne({_id: id}));\r\n            console.log(Session.get('draftEditItem'));\r\n        }\r\n    }\r\n});\r\nTemplate.suggestionEditor.events({\r\n    'click .btn-post': function () {\r\n        let headline = $('#suggestionHeadline').val();\r\n        let content = $('.announcement-text')[2].value;\r\n        let imgId = Session.get('newImageId');\r\n\r\n        let authorId = Meteor.userId();\r\n        let draftedDate = new Date();\r\n\r\n        if (!imgId) {\r\n            //TODO\r\n            console.log('No image uploaded');\r\n        }\r\n        if (!headline) {\r\n            //TODO\r\n            console.log('No headline entered');\r\n        }\r\n        if (!content) {\r\n            //TODO\r\n            console.log('No content entered')\r\n        }\r\n\r\n        let json = {\r\n            author: authorId,\r\n            type: 'suggestion',\r\n            headline: headline,\r\n            content: content,\r\n            draftedDate: draftedDate,\r\n            imgId: imgId\r\n        };\r\n        console.log(json);\r\n\r\n        Meteor.call('suggestions.postSuggestion', json, function (err) {\r\n            console.log('posted');\r\n            if (err) {\r\n                alertError('Post Failed!', err.message);\r\n            } else {\r\n                alertSuccess('Success!', 'The post has been submitted.');\r\n                if (operationStack.length - 2 === 0) {\r\n                    swapElements('.editor-main', '.editor-open');\r\n                    $('html, body').css({\r\n                        overflow: 'visible'\r\n                    }); // Enables the Scrolling\r\n                } else {\r\n                    swapElements(operationStack[operationStack.length - 1], operationStack[operationStack.length - 2]);\r\n                }\r\n                operationStack.pop();\r\n            }\r\n        });\r\n    }\r\n});\r\n\r\nfunction initDropZone(id, info) {\r\n    return new Dropzone(\"form#\" + id, {\r\n        maxFiles: info.number || 1,\r\n        maxFilesize: info.size || 8,\r\n        thumbnailWidth: 400,\r\n        addRemoveLinks: true,\r\n        dictDefaultMessage: info.message || \"Drop your image here, or click to select an image using the browser.\",\r\n        accept: function (file, done) {\r\n            $('.quick-image-prompt').html('');\r\n            let FSFile = new FS.File(file);\r\n            Images.insert(FSFile, function (err, fileObj) {\r\n                if (err) {\r\n                    console.log(err);\r\n                } else {\r\n                    Images.remove({_id: Session.get('newImageId')}, function (err) {\r\n                        if (err) {\r\n                            console.log(\"error removing image:\\n\" + err);\r\n                        }\r\n                    });\r\n                    hasUnsplash = false;\r\n                    Session.set('newFileLink', fileObj.extension());   //update the file type\r\n                    Session.set('newImageId', fileObj._id); //update the image id to current image\r\n                    done();\r\n                }\r\n            });\r\n        }\r\n    });\r\n}\r\nfunction swapElements(a, b) {\r\n    $(a).fadeOut('fast', function () {\r\n        $(b).fadeIn(\"slow\");\r\n    });\r\n}\r\nfunction getRandomInt(min, max) {\r\n    return Math.floor(Math.random() * (max - min + 1)) + min;\r\n}\r\nfunction setEditorContent(json) {\r\n    if(json.type === 'blog'){\r\n        $('#blogTitle').val(json.title);\r\n        $('#blogSubTitle').val(json.subtitle);\r\n        $('.editable').froalaEditor('html.set', json.content);\r\n        _.forEach(json.tags,function (item) {\r\n            $('.tags').tagsinput('add', item);\r\n        });\r\n        $('.visibility-select').val(json.meta.visibility).trigger(\"change\");\r\n        $(\".category-select\").val(json.categories).trigger(\"change\");\r\n        $(\"#blogOrganizationSelect\").val(json.organizationsValues).trigger(\"change\");\r\n        $('.input-date').datepicker('update', json.releaseDate);\r\n        if(json.unsplash){\r\n            Meteor.call('setupUnsplash', function (err) {\r\n                if (err) {\r\n                    console.log(err);\r\n                    $('#unsplashPrompt').html(\"Sorry... We failed to find an image for you. Please upload one.\");\r\n                } else {\r\n                    Meteor.call('getPhoto', json.imgId, function (err, data) {\r\n                        if (err) {\r\n                            console.log(err);\r\n                            $('#unsplashPrompt').html(\"Sorry... We failed to find an image for you. Please upload one.\");\r\n                        } else {\r\n                            Session.set('unsplash_img', data.id);\r\n                            Session.set('unsplashData',data);\r\n                            hasUnsplash = true;\r\n                            $('#dropzone').replaceWith(\"<img src='\" + data.urls.regular + \"' class='img-responsive unsplash-container'/>\");\r\n                            $('#unsplashPrompt').html(\"Here you go! This image is by <a href='\"+ data.user.links.html +\"'>\"+ data.user.name +\"</a> from \"+ data.user.location +\" via <b>Unsplash</b>. <br><br> This will be your featured image, if you want another one <a href='' id='newUnsplash'>Click Here</a> Changed your mind? click here to <a href='' id='newUpload'>upload a new image</a>\");\r\n                        }\r\n                    })\r\n                }\r\n            })\r\n        }\r\n        swapElements('.blog-drafts', '.blog-editor');\r\n        operationStack.push('.blog-editor');\r\n        Session.set('announcementType', 'blog');\r\n    }else if(json.type === 'announcement'){\r\n        if(json.subType === 'imageOnly'){\r\n            $('#imageOnlyHeadline').val(json.headline);\r\n            if(json.imgId){\r\n                Session.set('newImageId', json.imgId);\r\n                $('.quick-image-prompt').html('You have already uploaded an image, if you would like to change it, simply add a different one. Otherwise, simply ignore the box.')\r\n            }\r\n            _.forEach(json.tags,function (item) {\r\n                $('.announce-tags:eq(0)').tagsinput('add', item);\r\n            });\r\n            $(\".announcement-category:eq(0)\").val(json.categories).trigger(\"change\");\r\n            $(\".clubs-category:eq(0)\").val(json.clubs).trigger(\"change\");\r\n            $('.startDate:eq(0)').datepicker('update',json.startDate);\r\n            $('.endDate:eq(0)').datepicker('update',json.endDate);\r\n            swapElements('.blog-drafts', '.image-only');\r\n            operationStack.push('.image-only');\r\n            Session.set('announcementType', 'imageOnly');\r\n        }else if(json.subType === 'textOnly'){\r\n            $('#textOnlyHeadline').val(json.headline);\r\n            $('.announcement-text:eq(0)').val(json.content);\r\n            _.forEach(json.tags,function (item) {\r\n                $('.announce-tags:eq(1)').tagsinput('add', item);\r\n            });\r\n            $(\".announcement-category:eq(1)\").val(json.categories).trigger(\"change\");\r\n            $(\".clubs-category:eq(1)\").val(json.clubs).trigger(\"change\");\r\n            $('.startDate:eq(1)').datepicker('update',json.startDate);\r\n            $('.endDate:eq(1)').datepicker('update',json.endDate);\r\n            swapElements('.blog-drafts', '.text-only');\r\n            operationStack.push('.text-only');\r\n            Session.set('announcementType', 'textOnly');\r\n        }else if(json.subType === 'imageText'){\r\n            $('#textImageHeadline').val(json.headline);\r\n            if(json.imgId){\r\n                Session.set('newImageId', json.imgId);\r\n                $('.quick-image-prompt').html('You have already uploaded an image, if you would like to change it, simply add a different one. Otherwise, simply ignore the box.')\r\n            }\r\n            $('.announcement-text:eq(1)').val(json.content);\r\n            $(\".announcement-category:eq(2)\").val(json.categories).trigger(\"change\");\r\n            $(\".clubs-category:eq(2)\").val(json.clubs).trigger(\"change\");\r\n            $('.startDate:eq(2)').datepicker('update',json.startDate);\r\n            $('.endDate:eq(2)').datepicker('update',json.endDate);\r\n            Session.set('priority', json.meta.priority);\r\n            $('.is-checked').removeClass('is-checked');\r\n            $(\".priority-toggle[data-priority=\"+ Session.get('priority') +\"]\").addClass('is-checked');\r\n            swapElements('.blog-drafts', '.text-and-image');\r\n            operationStack.push('.text-and-image');\r\n            Session.set('announcementType', 'textAndImage');\r\n        }\r\n    }\r\n}\r\n\r\nfunction wipeEditor(type, subType) {\r\n    if(type === 'blog'){\r\n        $('#blogTitle').val(null);\r\n        $('#blogSubTitle').val(null);\r\n        $('.editable').froalaEditor('html.set', '');\r\n        $('.tags').tagsinput('removeAll');\r\n        $('.visibility-select').val(null).trigger(\"change\");\r\n        $(\".category-select\").val(null).trigger(\"change\");\r\n        $('.input-date').datepicker('update', null);\r\n        Session.set('unsplash_img', null);\r\n        Session.set('unsplashData', null);\r\n        Session.set('newImageId', null);\r\n        let blogDrop = initDropZone('dropzone', {\r\n            number: 1,\r\n            size: 8,\r\n            message: \"Drop an image here to be the featured image, or click to select an image using the browser.\",\r\n        });\r\n        $('#unsplashPrompt').html(\"Want to avoid the hassle? <a href='' id='getFeaturedUnsplash'>Click here</a> and we will find an image for you!\");\r\n    }else if(type === 'announcement'){\r\n        if(subType === 'imageOnly'){\r\n            $('#imageOnlyHeadline').val(null);\r\n            Session.set('newImageId', null);\r\n            $('#announcementImage').replaceWith(\"<form action='/file-upload' class='dropzone' id='announcementImage'></form>\");\r\n            let announcementDrop = initDropZone(\"announcementImage\", {\r\n                number: 1,\r\n                size: 8,\r\n                message: \"Drop your poster here, or click to select an image using the browser.\",\r\n            });\r\n            $('.quick-image-prompt').html(\"\");\r\n            $('.announce-tags:eq(0)').tagsinput('removeAll');\r\n            $(\".announcement-category:eq(0)\").val(null).trigger(\"change\");\r\n            $(\".clubs-category:eq(0)\").val(null).trigger(\"change\");\r\n            $('.startDate:eq(0)').datepicker('update',null);\r\n            $('.endDate:eq(0)').datepicker('update',null);\r\n        }else if(subType === 'textOnly'){\r\n            $('#textOnlyHeadline').val(null);\r\n            $('.announcement-text:eq(0)').val(null);\r\n            $('.announce-tags:eq(1)').tagsinput('removeAll');\r\n            $(\".announcement-category:eq(1)\").val(null).trigger(\"change\");\r\n            $(\".clubs-category:eq(1)\").val(null).trigger(\"change\");\r\n            $('.startDate:eq(1)').datepicker('update',null);\r\n            $('.endDate:eq(1)').datepicker('update',null);\r\n        }else if(subType === 'imageText'){\r\n            $('#textImageHeadline').val(null);\r\n            Session.set('newImageId', null);\r\n            $('#announcementImageTwo').replaceWith(\"<form action='/file-upload' class='dropzone' id='announcementImageTwo'></form>\");\r\n            let announcementDrop = initDropZone(\"announcementImageTwo\", {\r\n                number: 1,\r\n                size: 8,\r\n                message: \"Drop your poster here, or click to select an image using the browser.\",\r\n            });\r\n            $('.quick-image-prompt').html('');\r\n            $('.announcement-text:eq(1)').val(null);\r\n            $('.announce-tags:eq(2)').tagsinput('removeAll');\r\n            $(\".announcement-category:eq(2)\").val(null).trigger(\"change\");\r\n            $(\".clubs-category:eq(2)\").val(null).trigger(\"change\");\r\n            $('.startDate:eq(2)').datepicker('update',null);\r\n            $('.endDate:eq(2)').datepicker('update',null);\r\n            Session.set('priority', 'image');\r\n            $('.is-checked').removeClass('is-checked');\r\n            $(\".priority-toggle[data-priority=\"+ Session.get('priority') +\"]\").addClass('is-checked');\r\n        }\r\n    }\r\n}\r\nfunction constructBlogJson(){\r\n    let title = $('#blogTitle').val();\r\n    let subtitle = $('#blogSubTitle').val();\r\n    let content = $('.editable').froalaEditor('html.get');\r\n    let str = $(\".tags\").val();\r\n    let separators = [' , ', ', ', ',', ' ,'];\r\n    let tags = str.split(new RegExp(separators.join('|'), 'g'));\r\n    let imgId = (hasUnsplash) ? Session.get('unsplash_img') : Session.get('newImageId');\r\n    let releaseDate = new Date($('.input-date').val());\r\n    let draftedDate = new Date();\r\n    let options = $('.category-select')[0].options;\r\n    let categories = [];\r\n    for (let i = 0; i < options.length; i++) {\r\n        let opt = options[i];\r\n        if (opt.selected) {\r\n            categories.push(opt.value);\r\n        }\r\n    }\r\n    let orgOptions = document.getElementById('blogOrganizationSelect').options;\r\n    let orgNames = [], orgVal = [];\r\n    for (let i = 0; i < orgOptions.length; i++) {\r\n        let opt = orgOptions[i];\r\n        if (opt.selected) {\r\n            orgNames.push(opt.text);\r\n            orgVal.push(opt.value);\r\n        }\r\n    }\r\n    let authorId = Meteor.userId();\r\n    let imageFirst = null;\r\n    //meta\r\n    let visibility = $('.visibility-select')[0].value;\r\n\r\n    return {\r\n        author: authorId,\r\n        type: 'blog',\r\n        releaseDate: releaseDate,\r\n        draftedDate: draftedDate,\r\n        title: title,\r\n        subtitle: subtitle,\r\n        content: content,\r\n        tags: tags,\r\n        categories: categories,\r\n        imgId: imgId,\r\n        unsplash: Session.get('unsplashData'),\r\n        organizationsNames: orgNames,\r\n        organizationsValues: orgVal,\r\n        meta: {\r\n            imageFirst: imageFirst,\r\n            hasUnsplash: hasUnsplash,\r\n            visibility: visibility\r\n        }\r\n    };\r\n}\r\nfunction constructAnnouncementJson(type){\r\n    if (type === \"imageOnly\") {\r\n        console.log('constructing image only');\r\n        let headline = $('#imageOnlyHeadline').val();\r\n        let imgId = Session.get('newImageId');\r\n        let separators = [' , ', ', ', ',', ' ,'];\r\n        let tags = $(\".announce-tags\")[0].value.split(new RegExp(separators.join('|'), 'g'));\r\n        let options = $('.announcement-category')[0].options;\r\n        let categories = [];\r\n        for (let i = 0; i < options.length; i++) {\r\n            let opt = options[i];\r\n            if (opt.selected) {\r\n                categories.push(opt.value);\r\n            }\r\n        }\r\n        let clubs = $('.clubs-category')[0].options;\r\n        let clubList = [];\r\n        for (let i = 0; i < clubs.length; i++) {\r\n            let opt = clubs[i];\r\n            if (opt.selected) {\r\n                clubList.push(opt.value);\r\n            }\r\n        }\r\n        let authorId = Meteor.userId();\r\n        let startDate = new Date($('.startDate')[0].value);\r\n        let endDate = new Date($('.endDate')[0].value);\r\n        let draftedDate = new Date();\r\n        let visibility = $('.visibility-select')[1].value;\r\n        if (!imgId) {\r\n            alertError('Post Incomplete!', \"You haven't uploaded an image yet!\")\r\n        }\r\n        if (!headline) {\r\n            //TODO\r\n            alertError('Post Incomplete!', \"You haven't added a headline!\")\r\n        }\r\n        if(!startDate || !endDate){\r\n            alertError('Post Incomplete!', \"You haven't added a date!\")\r\n        }\r\n        return {\r\n            author: authorId,\r\n            type: 'announcement',\r\n            subType: 'imageOnly',\r\n            startDate: startDate,\r\n            endDate: endDate,\r\n            draftedDate: draftedDate,\r\n            headline: headline,\r\n            tags: tags,\r\n            categories: categories,\r\n            imgId: imgId,\r\n            clubs: clubList,\r\n            meta: {\r\n                hasUnsplash: hasUnsplash,\r\n                visibility: visibility\r\n            }\r\n        };\r\n    } else if (type === \"textOnly\") {\r\n        let headline = $('#textOnlyHeadline').val();\r\n        let content = $('.announcement-text')[0].value;\r\n        let separators = [' , ', ', ', ',', ' ,'];\r\n        let tags = $(\".announce-tags\")[1].value.split(new RegExp(separators.join('|'), 'g'));\r\n\r\n        let options = $('.announcement-category')[1].options;\r\n        let categories = [];\r\n\r\n        for (let i = 0; i < options.length; i++) {\r\n            let opt = options[i];\r\n            if (opt.selected) {\r\n                categories.push(opt.value);\r\n            }\r\n        }\r\n        let visibility = $('.visibility-select')[2].value;\r\n        let authorId = Meteor.userId();\r\n        let startDate = new Date($('.startDate')[1].value);\r\n        let endDate = new Date($('.endDate')[1].value);\r\n        let draftedDate = new Date();\r\n        let clubs = $('.clubs-category')[1].options;\r\n        let clubList = [];\r\n        for (let i = 0; i < clubs.length; i++) {\r\n            let opt = clubs[i];\r\n            if (opt.selected) {\r\n                clubList.push(opt.value);\r\n            }\r\n        }\r\n        //meta\r\n\r\n        if (!content) {\r\n            alertError('Post Incomplete!', \"You haven't added any content yet!\")\r\n        }\r\n        if (!headline) {\r\n            //TODO\r\n            alertError('Post Incomplete!', \"You haven't added a headline!\")\r\n        }\r\n        if(!startDate || !endDate){\r\n            alertError('Post Incomplete!', \"You haven't added a date!\")\r\n        }\r\n\r\n        return {\r\n            author: authorId,\r\n            type: 'announcement',\r\n            subType: 'textOnly',\r\n            startDate: startDate,\r\n            endDate: endDate,\r\n            draftedDate: draftedDate,\r\n            headline: headline,\r\n            content: content,\r\n            tags: tags || [],\r\n            categories: categories || [],\r\n            clubs: clubList,\r\n            meta: {\r\n                hasUnsplash: hasUnsplash,\r\n                visibility: visibility\r\n            }\r\n        };\r\n    } else if (type === 'textAndImage') {\r\n        let headline = $('#textImageHeadline').val();\r\n        let content = $('.announcement-text')[1].value;\r\n        let imgId = Session.get('newImageId');\r\n        let str = $(\".announce-tags\")[2].value;\r\n        let separators = [' , ', ', ', ',', ' ,'];\r\n        let tags = str.split(new RegExp(separators.join('|'), 'g'));\r\n\r\n        let options = $('.announcement-category')[2].options;\r\n        let categories = [];\r\n\r\n        for (let i = 0; i < options.length; i++) {\r\n            let opt = options[i];\r\n            if (opt.selected) {\r\n                categories.push(opt.value);\r\n            }\r\n        }\r\n        let visibility = $('.visibility-select')[3].value;\r\n        let authorId = Meteor.userId();\r\n        let startDate = new Date($('.startDate')[2].value);\r\n        let endDate = new Date($('.endDate')[2].value);\r\n        let draftedDate = new Date();\r\n        let clubs = $('.clubs-category')[2].options;\r\n        let clubList = [];\r\n        for (let i = 0; i < clubs.length; i++) {\r\n            let opt = clubs[i];\r\n            if (opt.selected) {\r\n                clubList.push(opt.value);\r\n            }\r\n        }\r\n        //meta\r\n        let priority = Session.get('priority');\r\n        if (!imgId) {\r\n            alertError('Post Incomplete!', \"You haven't uploaded an image yet!\")\r\n        }\r\n        if (!headline) {\r\n            //TODO\r\n            alertError('Post Incomplete!', \"You haven't added a headline!\")\r\n        }\r\n        if(!startDate || !endDate){\r\n            alertError('Post Incomplete!', \"You haven't added a date!\")\r\n        }\r\n        if (!content) {\r\n            //TODO\r\n            alertError('Post Incomplete!', \"You haven't added any information!\")\r\n        }\r\n\r\n        return {\r\n            author: authorId,\r\n            type: 'announcement',\r\n            subType: 'imageText',\r\n            headline: headline,\r\n            content: content,\r\n            startDate: startDate,\r\n            endDate: endDate,\r\n            draftedDate: draftedDate,\r\n            tags: tags || [],\r\n            categories: categories || [],\r\n            imgId: imgId,\r\n            clubs: clubList,\r\n            meta: {\r\n                priority: priority || 'image',\r\n                hasUnsplash: hasUnsplash,\r\n                visibility: visibility\r\n            }\r\n        };\r\n    }\r\n}\r\n\r\nfunction getKeyWord(text) {\r\n    let keyword_extractor = require(\"keyword-extractor\");\r\n\r\n    let keywords = ($(text).text());\r\n//  Extract the keywords\r\n    let extraction_result = keyword_extractor.extract(keywords,{\r\n        language:\"english\",\r\n        remove_digits: true,\r\n        return_changed_case:true,\r\n        remove_duplicates: false,\r\n        remove_max_ngrams: 10\r\n    });\r\n    return extraction_result;\r\n}","/**\r\n * Created by Yonglin Wang on 8/1/2017.\r\n */\r\nimport Typed from 'typedjs-placeholder'\r\nimport { Images } from '../../api/images/images.js';\r\nimport './navigation.html'\r\nimport '../lib/morphext.js'\r\nTemplate.navigation.onRendered(function () {\r\n    //$('.course-list').hide();\r\n    $('.main-search').hide();\r\n    $('.search-content').hide();\r\n    $('.nav-overlay').hide();\r\n    Session.set('searchContent', {hits:[]});\r\n});\r\n\r\nTemplate.navigation.helpers({\r\n    'date': function () {\r\n        return \"Friday April 7th\"\r\n    },\r\n    'username': function () {\r\n        return Session.get('name');\r\n    },\r\n    'title': function () {\r\n        return Session.get('navTitle');\r\n    },\r\n    'isStudent': function () {\r\n        return Roles.userIsInRole(Meteor.userId(), 'student');\r\n    },\r\n    'isAdmin': function () {\r\n        return Roles.userIsInRole(Meteor.userId(), 'admin');\r\n    },\r\n    'searchContent': function () {\r\n        return Session.get('searchContent').hits\r\n    },\r\n    'img': function () {\r\n        if(this.unsplash){\r\n            return this.unsplash.urls.full;\r\n        }else if(this.imgId){\r\n            try{\r\n                return Images.findOne({_id: this.imgId}).url();\r\n            }catch(e){\r\n                //console.log('error getting photo')\r\n            }\r\n\r\n        }\r\n    },\r\n    'courses': function () {\r\n        return Session.get('courses');\r\n    },\r\n    'state': function () {\r\n        const now = new Date();\r\n        let diff = Math.abs(now - Session.get('tokenExpiry'));\r\n        let minutes = Math.floor((diff/1000)/60);\r\n        return (minutes > 30) ? 'expired' : 'fine'\r\n    },\r\n    'mark': function () {\r\n        let mark = this.mark;\r\n        if(mark.length > 6){\r\n            mark = \"N/A\"\r\n        }\r\n        return mark;\r\n    },\r\n    'dash': function () {\r\n        return Session.get('inDash');\r\n    }\r\n});\r\n\r\nTemplate.navigation.events({\r\n    'click .nav-extend': function () {\r\n        let sideNav = $('.side-nav');\r\n        let sideNavPrompt = $('.side-nav-prompt');\r\n        $('.top-nav').toggleClass('right-push');\r\n        $('.main').toggleClass('right-push');\r\n        sideNav.toggleClass('right-push');\r\n        if($('.main').hasClass('right-push')) {\r\n            sideNavPrompt.html(\"<i class='fa fa-times'></i> <span class='hidden-xs hidden-sm'>CLOSE</span>\");\r\n            $('.nav-overlay').fadeIn('fast');\r\n        }else{\r\n            sideNavPrompt.html(\"<i class='fa fa-bars'></i> <span class='hidden-xs hidden-sm'>MENU</span>\");\r\n            $('.nav-overlay').fadeOut('fast');\r\n        }\r\n    },\r\n    'click .nav-overlay': function () {\r\n        let sideNav = $('.side-nav');\r\n        let sideNavPrompt = $('.side-nav-prompt');\r\n        $('.top-nav').removeClass('right-push');\r\n        $('.main').removeClass('right-push');\r\n        sideNav.removeClass('right-push');\r\n        if($('.main').hasClass('right-push')) {\r\n            sideNavPrompt.html(\"<i class='fa fa-times'></i> <span class='hidden-xs hidden-sm'>CLOSE</span>\");\r\n            $('.nav-overlay').fadeIn('fast');\r\n        }else{\r\n            sideNavPrompt.html(\"<i class='fa fa-bars'></i> <span class='hidden-xs hidden-sm'>MENU</span>\");\r\n            $('.nav-overlay').fadeOut('fast');\r\n        }\r\n    },\r\n    'click .nav-oper': function () {\r\n        let searchBox = $('.main-search');\r\n        let searchContent = $('.search-content');\r\n        let prompt = $('.top-operation-prompt');\r\n        Session.set('searchContent', {hits:[]});\r\n        if(!searchBox.is(':visible')){\r\n            searchBox.fadeIn('fast');\r\n            $('.search-result').show();\r\n            searchContent.fadeIn(\"<i class='fa fa-times'></i> <span class='hidden-sm hidden-xs'>SEARCH</span>\");\r\n            prompt.html(\"CLOSE\");\r\n            searchBox.typed({\r\n                strings: [\r\n                    \"\\\"Volleyball\\\"\",\r\n                    \"\\\"Octoberfest\\\"\",\r\n                    \"\\\"Guidance\\\"\",\r\n                    \"\\\"DECA\\\"\",\r\n                    \"\\\"USAC\\\"\",\r\n                    \"\\\"Who made this app?\\\"\"\r\n                ],\r\n                typeSpeed: 40,\r\n                loop: true,\r\n                shuffle: true,\r\n                showCursor: true,\r\n                cursorChar: \"|\",\r\n            });\r\n            $('html, body').css({\r\n                overflow: 'hidden',\r\n            });\r\n        }else{\r\n            searchBox.fadeOut('fast');\r\n            $('.search-result').hide();\r\n            searchContent.fadeOut('fast');\r\n            prompt.html(\"<i class='fa fa-search'></i> <span class='hidden-sm hidden-xs'>SEARCH</span>\");\r\n            $('html, body').css({\r\n                overflow: 'auto',\r\n            });\r\n        }\r\n    },\r\n    'click #academics': function () {\r\n        if(!Session.get('token')){\r\n            Modal.show('teachAssistConnect')\r\n        }\r\n        let list = $('.course-list');\r\n        let icon = $('.academics-icon');\r\n        if(!list.is(':visible')){\r\n            list.show(500);\r\n            icon.removeClass('fa-bars');\r\n            icon.addClass('fa-times');\r\n        }else{\r\n            list.hide(500);\r\n            icon.removeClass('fa-times');\r\n            icon.addClass('fa-bars')\r\n        }\r\n    },\r\n    'input .main-search': function () {\r\n        let searchBox = $('.main-search');\r\n        let searchPrompt = $('.search-prompt');\r\n        if(searchBox.val().length > 0){\r\n            searchPrompt.css('display','none');\r\n            console.log(searchBox.val());\r\n            searchPost(searchBox.val());\r\n        }else{\r\n            searchPrompt.css('display','block');\r\n            Session.set('searchContent', {hits:[]});\r\n        }\r\n    }\r\n});\r\n\r\nTemplate.teachAssistPass.helpers({\r\n    'student_id': function () {\r\n        return Meteor.user().profile.student_number;\r\n    }\r\n});\r\n\r\nTemplate.teachAssistConnect.events({\r\n    'submit #connectLoginForm': function (evt) {\r\n        evt.preventDefault();\r\n        const pass = $('#reLoginPass').val();\r\n        Meteor.call('getTeachAssistTokens', {student_number: Meteor.user().profile.student_number, password: pass}, function (err, data) {\r\n            if(err){\r\n                alertError(\"Failed to connect with teach assist\", err.message);\r\n            }else{\r\n                Meteor.users.update({_id: Meteor.userId()}, {$set: {\"private.token\": data, \"private.tokenDate\": new Date()}}, function (err) {\r\n                    if(err){\r\n                        alertError(\"Something went wrong\", err.message);\r\n                    }else{\r\n                        Meteor.call('getTeachAssistCourses', data, function (err,data) {\r\n                            if(err){\r\n                                alertError(\"Something went wrong\", \"\");\r\n                            }else{\r\n                                Meteor.users.update({_id: Meteor.userId()}, {$set: {\"private.courses\": data}});\r\n                                Modal.hide('teachAssistPass');\r\n                                FlowRouter.reload();\r\n                            }\r\n                        });\r\n                    }\r\n                });\r\n            }\r\n        })\r\n    }\r\n});\r\n\r\nTemplate.teachAssistPass.events({\r\n   'submit #reLoginForm': function (evt) {\r\n       evt.preventDefault();\r\n       const pass = $('#reLoginPass').val();\r\n       Meteor.call('getTeachAssistTokens', {student_number: Meteor.user().profile.student_number, password: pass}, function (err, data) {\r\n           if(err){\r\n               alertError(\"Failed to connect with teach assist\", err.message);\r\n           }else{\r\n               Meteor.users.update({_id: Meteor.userId()}, {$set: {\"private.token\": data, \"private.tokenDate\": new Date()}}, function (err) {\r\n                   if(err){\r\n                       alertError(\"Something went wrong\", err.message);\r\n                   }else{\r\n                       Meteor.call('getTeachAssistCourses', data, function (err,data) {\r\n                           if(err){\r\n                               alertError(\"Something went wrong\", \"\");\r\n                           }else{\r\n                               Meteor.users.update({_id: Meteor.userId()}, {$set: {\"private.courses\": data}});\r\n                               Modal.hide('teachAssistPass');\r\n                               FlowRouter.reload();\r\n                           }\r\n                       });\r\n                   }\r\n               });\r\n           }\r\n       })\r\n   }\r\n});\r\n\r\nsetTitle = function (title) {\r\n    $('.nav-title-text').html('<span>'+title+'</span>');\r\n};\r\n\r\nsetProgressBar = function (percentage) {\r\n    $('.nav-title-text').css('color','#fff');\r\n    $('.nav-hub-progress').animate({ width: percentage }, 1500);\r\n};\r\n","/**\r\n * Created by Yonglin Wang on 7/28/2017.\r\n */\r\nimport './applicationLayout.html';","/**\r\n * Created by Yonglin Wang on 9/24/2017.\r\n */\r\nimport './bigPicture.html'\r\nimport { Images } from '../../api/images/images.js';\r\nimport flickity from 'flickity';\r\nimport imagesLoaded from 'imagesloaded';\r\n\r\nlet morphSettings = {\r\n    // The [in] animation type. Refer to Animate.css for a list of available animations.\r\n    animation: \"flipInX\",\r\n    // An array of phrases to rotate are created based on this separator. Change it if you wish to separate the phrases differently (e.g. So Simple | Very Doge | Much Wow | Such Cool).\r\n    separator: \";;\",\r\n    // The delay between the changing of each phrase in milliseconds.\r\n    speed: 8000,\r\n    complete: function () {\r\n        // Called after the entrance animation is executed.\r\n    }\r\n};\r\nTemplate.bigPicture.onRendered(function () {\r\n    Tracker.autorun(function () {\r\n        let newsSub = Meteor.subscribe('announcements', 10, Meteor.userId());\r\n        let imageSub = Meteor.subscribe('images');\r\n        if(newsSub.ready()){\r\n            $('.flickity').flickity({\r\n                cellAlign: 'left',\r\n                contain: true,\r\n                imagesLoaded: true,\r\n                lazyLoad: true,\r\n                autoPlay: 5000,\r\n                pageDots: false,\r\n                prevNextButtons: false,\r\n                pauseAutoPlayOnHover: false,\r\n                selectedAttraction: 0.01,\r\n                friction: 0.15\r\n            });\r\n            $('.dot').css('width',$('.flickity-page-dots').width()/$('.dot').length + 'px')\r\n        }\r\n    });\r\n});\r\n\r\nTemplate.bigPicture.helpers({\r\n    'announcement': function () {\r\n        return Posts.find({});\r\n    }\r\n});\r\n\r\nTemplate.bigPictureItem.helpers({\r\n    'imageLink': function () {\r\n        try{\r\n            return Images.findOne({_id: this.imgId}).url();\r\n        }catch(e){}\r\n\r\n    }\r\n});\r\n\r\nTemplate.bottomBar.onRendered(function () {\r\n    $(document).ready(function() {\r\n        displayTime();\r\n        $(\"#rotatingMessage\").Morphext(morphSettings);\r\n    });\r\n});\r\n\r\nfunction displayTime() {\r\n    var time = moment().format('h:mm');\r\n    $('#clock').html(time);\r\n    setTimeout(displayTime, 1000);\r\n}","/**\r\n * Created by Yonglin Wang on 9/12/2017.\r\n */\r\nimport './blogs.html'\r\n\r\nTemplate.blogs.onCreated(function () {\r\n    Session.set('navTitle', 'Stories');\r\n});\r\n\r\nTemplate.blogs.onRendered(function () {\r\n    Tracker.autorun(function () {\r\n        Meteor.subscribe('blogCategories');\r\n        Meteor.subscribe('posts')\r\n    })\r\n});\r\n\r\nTemplate.blogs.helpers({\r\n    'blogCategories': function () {\r\n        return BlogCategories.find({})\r\n    }\r\n});\r\n\r\nTemplate.blogCategory.helpers({\r\n    'categoryName': function () {\r\n        return this.name;\r\n    },\r\n    'blogPreviews': function () {\r\n        console.log(this.name);\r\n        return Posts.find({\r\n            'type': 'blog',\r\n            'categories': this.name\r\n        },{\r\n            limit: 4\r\n        });\r\n    }\r\n});\r\n\r\nTemplate.blogItem.onRendered(function () {\r\n});\r\n\r\nTemplate.blogItem.helpers({\r\n    'imageLink': function () {\r\n        if(this.unsplash){\r\n            console.log(this);\r\n            return this.unsplash.urls.full;\r\n        }else if(this.imgId){\r\n            try{\r\n                return Images.findOne({_id: this.imgId}).url();\r\n            }catch(e){\r\n                //console.log('error getting photo')\r\n            }\r\n        }\r\n    },\r\n    'writer': function () {\r\n        return Meteor.users.findOne({_id: this.author}).services.google.name;\r\n    },\r\n    'date': function () {\r\n        return moment(this.releasedDate).format(\"MMMM Do YYYY\");\r\n    },\r\n    'subtitle': function () {\r\n        let string = this.subtitle;\r\n        let length = 40;\r\n        return string.length > length ?\r\n            string.substring(0, length - 3) + \"...\" :\r\n            string;\r\n    }\r\n});\r\n\r\nTemplate.blogItem.events({\r\n    'click .blog-item': function (evt,template) {\r\n        let obj = $(evt.target).closest($('.blog-item'));\r\n        let id = obj.attr('id');\r\n        FlowRouter.go('/blog/'+id);\r\n    }\r\n})","import '../lib/charting.js'\r\nimport '../lib/alert.js'\r\nimport {Images} from '../../api/images/images.js';\r\nimport './course.html';\r\n\r\nTemplate.course.onRendered(function () {\r\n    Tracker.autorun(function () {\r\n        let sub = Meteor.subscribe('allCourses',1000);\r\n        Meteor.subscribe('images');\r\n        if(sub.ready()){\r\n            let code = Session.get('courseData').data.course.substring(0,Session.get('courseData').data.course.indexOf(\"-\"));\r\n            let item = Courses.findOne({\r\n                code: code\r\n            });\r\n            setTitle(item.name +' | ' + Session.get('displayMark'));\r\n            Session.set('courseCode',code);\r\n            Meteor.subscribe('postsByCourse',code,10);\r\n        }\r\n    });\r\n    let k,t,a,c;\r\n    $( document ).ready(function() {\r\n        Tracker.autorun(function () {\r\n            let marks = Session.get('courseData').categoryMarks;\r\n            if(marks){\r\n                setProgressBar(Session.get('displayMark').substring(1));\r\n                try{\r\n                    console.log();\r\n                    k.data.datasets[0].data = [marks[0], 100-marks[0]];\r\n                    t.data.datasets[0].data = [marks[1], 100-marks[1]];\r\n                    c.data.datasets[0].data = [marks[2], 100-marks[2]];\r\n                    a.data.datasets[0].data = [marks[3], 100-marks[3]];\r\n                    k.update();\r\n                    t.update();\r\n                    a.update();\r\n                    c.update();\r\n                }catch (e){\r\n                    console.log('first time graphing');\r\n                    k = drawChart('knowledgeChart', marks[0]);\r\n                    t = drawChart('thinkingChart', marks[1]);\r\n                    a = drawChart('communicationChart', marks[2]);\r\n                    c = drawChart('applicationChart', marks[3]);\r\n                }\r\n\r\n            }\r\n        });\r\n        $(document).scroll(function () {\r\n            $('.performance-progress').each(function () {\r\n                $(this).css({ width: $(this).attr('data-progress') });\r\n            })\r\n        });\r\n        $('.performance-presenter').hide();\r\n    });\r\n    $('.insights').hide();\r\n});\r\n\r\nTemplate.course.helpers({\r\n    'assessment': function () {\r\n        let arr = Session.get('courseData').data.assessment;\r\n        let newArr = [];\r\n        while(arr.length) newArr.push(arr.splice(0,2));\r\n        return newArr\r\n    },\r\n    'percentage': function () {\r\n        return (Math.round(((this.mark / this.outOf) * 100) * 10) / 10) + \"%\"\r\n    },\r\n    'readings': function () {\r\n        return Posts.find({\r\n            'type': 'blog',\r\n            organizationsValues: Session.get('courseCode')\r\n        });\r\n    },\r\n    'imageLink': function () {\r\n        if(this.unsplash){\r\n            return this.unsplash.urls.full;\r\n        }else if(this.imgId){\r\n            let id = this.imgId;\r\n            return Images.findOne({_id: id}).url();\r\n        }\r\n    },\r\n    'isMobile': function () {\r\n        return $( window ).width() <= 768;\r\n    },\r\n    'culminating': function () {\r\n        return Session.get('courseData').categories.O *100 + '%'\r\n    }\r\n});\r\n\r\nTemplate.course.events({\r\n    'click .performance': function (evt, template) {\r\n        let choice = $(evt.target).closest($('.performance'));\r\n        let assessment = $(evt.target).closest($('.assessment-body'));\r\n        let title = assessment.find('.assessment-title').text();\r\n        let object = null;\r\n        _.forEach(Session.get('courseData').data.assessment, function (item) {\r\n            if(item.title === title){\r\n                object = item;\r\n            }\r\n        });\r\n        if(!choice.hasClass('not-available')){\r\n            let data = $(evt.target).closest($('.assessment-performance')).find($('.performance-presenter'));\r\n            let section = data.find('.presenter-section');\r\n            let achieved = data.find('.achieved');\r\n            let outOf = data.find('.out-of');\r\n            let weight = data.find('.weight');\r\n            if(choice.hasClass('knowledge')){\r\n                data.css({\r\n                    background: 'linear-gradient(to right, #f7971e, #ffd200)'\r\n                });\r\n                achieved.text(object.K.mark);\r\n                outOf.text(object.K.outOf);\r\n                weight.text(object.K.weight);\r\n                section.text('Knowledge');\r\n            }else if(choice.hasClass('thinking')){\r\n                data.css({\r\n                    background: 'linear-gradient(to right, #11998e, #38ef7d)'\r\n                });\r\n                achieved.text(object.T.mark);\r\n                outOf.text(object.T.outOf);\r\n                weight.text(object.T.weight);\r\n                section.text('Thinking');\r\n            }else if(choice.hasClass('communication')){\r\n                data.css({\r\n                    background: 'linear-gradient(to right, #7F00FF, #E100FF)'\r\n                });\r\n                achieved.text(object.C.mark);\r\n                outOf.text(object.C.outOf);\r\n                weight.text(object.C.weight);\r\n                section.text('Communication');\r\n            }else if(choice.hasClass('application')){\r\n                data.css({\r\n                    background: 'linear-gradient(to right, #fc4a1a, #f7b733)'\r\n                });\r\n                achieved.text(object.A.mark);\r\n                outOf.text(object.A.outOf);\r\n                weight.text(object.A.weight);\r\n                section.text('Application');\r\n            }else if(choice.hasClass('other')){\r\n                data.css({\r\n                    background: 'linear-gradient(to right, #757F9A, #D7DDE8)'\r\n                });\r\n                achieved.text(object.O.mark);\r\n                outOf.text(object.O.outOf);\r\n                weight.text(object.O.weight);\r\n                section.text('Culminating');\r\n            }\r\n\r\n            data.slideDown('fast');\r\n        }\r\n\r\n    },\r\n    'click .close-presenter': function (evt, template) {\r\n        let data = $(evt.target).closest($('.performance-presenter'));\r\n        data.slideUp('fast');\r\n    },\r\n    'click .filter-btn': function (evt) {\r\n        let filterValue = '.' + $(evt.target).attr('data-tab');\r\n        let currentValue = '.' + $('.is-checked').attr('data-tab');\r\n        $('.is-checked').removeClass('is-checked');\r\n        $(evt.target).addClass('is-checked');\r\n        if(filterValue === '.insights'){\r\n            $(currentValue).fadeOut('fast');\r\n            $('.insights').fadeIn('slow');\r\n            let names = [], marks = [];\r\n            _.forEach(Session.get('courseData').data.assessment, function (item) {\r\n                names.push(item.title);\r\n            });\r\n            _.forEach(Session.get('courseData').timeline, function (item) {\r\n                marks.push(item.mark);\r\n            });\r\n            console.log(names,marks);\r\n            drawPolyChart('markByAssignment',names, marks);\r\n            drawPerformChart('sectionMarkByAssignment',['a','b','c','d'],[90, 88, 85, 99],[88, 90, 99, 78],[100,89,67,88],[99,99,89,86])\r\n        }else{\r\n            $(currentValue).fadeOut('fast');\r\n            $(filterValue).fadeIn('slow');\r\n        }\r\n    }\r\n});","import './dashboard.html'\r\nimport { Images } from '../../api/images/images.js';\r\n//import {Suggestions} from '../../api/suggestions/suggestions.js';\r\nlet courseSub;\r\nlet clubSub;\r\nTemplate.dashboard.onRendered(function () {\r\n});\r\nTemplate.dashCategories.onRendered(function () {\r\n    setTitle('Manage Categories');\r\n});\r\nTemplate.dashHome.onRendered(function () {\r\n    setTitle('Home');\r\n    Tracker.autorun(function () {\r\n        Meteor.subscribe('posts');\r\n        Meteor.subscribe('categories');\r\n        Meteor.subscribe('blogCategories');\r\n        Meteor.subscribe('images');\r\n    });\r\n});\r\nTemplate.dashSuggestions.onRendered(function () {\r\n    setTitle('Suggestion');\r\n    Tracker.autorun(function () {\r\n        Meteor.subscribe('suggestions');\r\n    });\r\n});\r\nTemplate.dashOrganizations.onRendered(function () {\r\n    setTitle('Manage Organizations');\r\n    Tracker.autorun(function () {\r\n        courseSub = Meteor.subscribeWithPagination('allCourses', 10);\r\n        clubSub = Meteor.subscribeWithPagination('allClubs', 10);\r\n    });\r\n});\r\nTemplate.dashUsers.onRendered(function () {\r\n    setTitle('Manage Organizations');\r\n    Tracker.autorun(function () {\r\n        Meteor.subscribe('allUsers');\r\n    });\r\n});\r\n\r\nTemplate.dashHome.helpers({\r\n    'post': function () {\r\n        return Posts.find({\r\n            'meta.approved': false,\r\n            'type': 'announcement',\r\n            'meta.screeningStage': 0\r\n        });\r\n    },\r\n    'blogPost': function () {\r\n        return Posts.find({\r\n            'meta.approved': false,\r\n            'type': 'blog'\r\n        });\r\n    },\r\n    'writer': function () {\r\n        //console.log(this);\r\n        return Meteor.users.findOne({_id: this.author}).services.google.name;\r\n    },\r\n    'noImage': function () {\r\n        return (this.subType === 'textOnly')\r\n    },\r\n    'imageLink': function () {\r\n        try{\r\n            return Images.findOne({_id: this.imgId}).url();\r\n        }catch(e){\r\n            //console.log('error getting photo')\r\n        }\r\n    },\r\n    'hasContent': function () {\r\n        return this.subType !== 'imageOnly'\r\n    },\r\n    'draftedDate': function () {\r\n        return moment(this.draftedDate).format(\"MMMM Do YYYY\")\r\n    },\r\n    'releaseDate': function () {\r\n        return moment(this.releaseDate).format(\"MMMM Do YYYY\")\r\n    }\r\n});\r\n\r\nTemplate.dashAnnouncements.helpers({\r\n    'post': function () {\r\n        return Posts.find({\r\n            'meta.approved': true,\r\n            'type': 'announcement'\r\n        });\r\n    },\r\n    'blogPost': function () {\r\n        return Posts.find({\r\n            'type': 'blog'\r\n        });\r\n    },\r\n    'writer': function () {\r\n        //console.log(this);\r\n        return Meteor.users.findOne({_id: this.author}).services.google.name;\r\n    },\r\n    'noImage': function () {\r\n        return (this.subType === 'textOnly')\r\n    },\r\n    'imageLink': function () {\r\n        console.log(this);\r\n        try{\r\n            return Images.findOne({_id: this.imgId}).url();\r\n        }catch(e){\r\n            //console.log('error getting photo')\r\n        }\r\n\r\n    },\r\n    'hasContent': function () {\r\n        return this.subType !== 'imageOnly'\r\n    }\r\n});\r\n\r\nTemplate.dashSuggestions.helpers({\r\n    'suggestion': function () {\r\n        return Suggestions.find({});\r\n    },\r\n    'writer': function () {\r\n        //console.log(this);\r\n        return Meteor.users.findOne({_id: this.author}).services.google.name;\r\n    },\r\n    'noImage': function () {\r\n        return (this.imgId === null)\r\n    },\r\n    'imageLink': function () {\r\n        try{\r\n            return Images.findOne({_id: this.imgId}).url();\r\n        }catch(e){\r\n            //console.log('error getting photo from Images - dashboard')\r\n        }\r\n    },\r\n    'draftedDate': function () {\r\n        return moment(this.draftedDate).format(\"MMMM Do YYYY\")\r\n    }\r\n});\r\n\r\nTemplate.dashSuggestions.events({\r\n    'click .btn-reject-suggestion': function (evt) {\r\n        let obj = $(evt.target).closest($('.new-post'));\r\n        let id = obj.attr('id');\r\n        Meteor.call('suggestions.removeSuggestions', id, function (err) {\r\n            if(err){\r\n                alertError(\"Error Occurred When Removing Suggestion\", err.message)\r\n            }\r\n        })\r\n    }\r\n});\r\n\r\nTemplate.dashCategories.helpers({\r\n    'category': function () {\r\n        return Categories.find({});\r\n    },\r\n    'featured': function () {\r\n        return (this.featured) ? 'Yes' : 'No';\r\n    },\r\n    'date': function () {\r\n        return moment(this.createdDate).format(\"MMMM Do YYYY\")\r\n    },\r\n    'blogCategory': function () {\r\n        return BlogCategories.find({});\r\n    }\r\n});\r\n\r\nTemplate.dashUsers.helpers({\r\n    'userList': function () {\r\n        return Meteor.users.find({});\r\n    },\r\n    'img': function () {\r\n        return this.services.google.picture;\r\n    },\r\n    'name': function () {\r\n        return this.services.google.name;\r\n    },\r\n    'id': function () {\r\n        return this._id;\r\n    }\r\n});\r\n\r\nTemplate.dashOrganizations.helpers({\r\n    'courses': function () {\r\n        return Courses.find({});\r\n    },\r\n    'clubs': function () {\r\n        return Clubs.find({});\r\n    }\r\n});\r\n\r\nTemplate.dashboard.events({\r\n    'click .new-post': function (evt) {\r\n        let obj = $(evt.target).closest($('.new-post'));\r\n        let id = obj.attr('id');\r\n        Session.set('editingId', id);\r\n        let info = Posts.findOne({_id: id});\r\n        Session.set('dashEditorData', info);\r\n\r\n        if(!$(evt.target).attr('class').includes('btn-reject') && !$(evt.target).attr('class').includes('btn-approve'))\r\n            Modal.show('dashPostEditor');\r\n    },\r\n    'click .btn-approve': function (evt) {\r\n        let obj = $(evt.target).closest($('.new-post'));\r\n        let id = obj.attr('id');\r\n        Meteor.call('posts.approvePost', id, function (err) {\r\n            if(err){\r\n                alertError(\"Error Occurred When Approving Post\", err.message)\r\n            }\r\n        })\r\n        //Post on Facebook\r\n        /*setupFacebook(function(err, response) {\r\n         if (err) {\r\n         console.log(err);\r\n         } else {\r\n         let post = Session.get('dashEditorData');\r\n         let type = post.type;\r\n         if (type === 'announcement') {\r\n         let subType = post.subType;\r\n         if (subType === 'textOnly') {\r\n         postTextFacebook(post);\r\n         } else if (subType === 'imageOnly') {\r\n         postImageFacebook(post);\r\n         } else {\r\n         postTextImageFacebook(post);\r\n         }\r\n         }\r\n         }\r\n         });*/\r\n    },\r\n    'click .btn-reject': function (evt) {\r\n        let obj = $(evt.target).closest($('.new-post'));\r\n        let id = obj.attr('id');\r\n        let reason = null;\r\n        alertPrompt(\"Please give the reason of rejection\", function (result) {\r\n            if(result){\r\n                Meteor.call('posts.rejectPost', id, result, function (err) {\r\n                    if(err){\r\n                        alertError(\"Error Occurred When Removing Post\", err.message)\r\n                    }\r\n                })\r\n            }\r\n        });\r\n\r\n    }\r\n});\r\n\r\nTemplate.dashCategories.events({\r\n    'click .btn-create-category': function (evt) {\r\n        if($(evt.target).attr('data-category') === 'blog'){\r\n            Session.set('editingBlogCategory', true);\r\n        }else Session.set('editingBlogCategory', false);\r\n        Modal.show('dashCategoryEditor');\r\n    },\r\n    'click .btn-delete-category': function (evt) {\r\n        let obj = $(evt.target).closest($('.dash-category-container'));\r\n        let type = obj.attr('data-category');\r\n        let id = obj.attr('id');\r\n        if(type === 'blog'){\r\n            Meteor.call('blogCategory.remove', id, function (err) {\r\n                if(err){\r\n                    alertError('Something Terrible Happened...', err.message);\r\n                }\r\n            })\r\n        }else{\r\n            Meteor.call('category.remove', id, function (err) {\r\n                if(err){\r\n                    alertError('Something Terrible Happened...', err.message);\r\n                }\r\n            })\r\n        }\r\n    }\r\n});\r\n\r\nTemplate.dashUsers.events({\r\n    'click .btn-modify-roles': function (evt) {\r\n        let obj = $(evt.target).closest($('.dash-user-container'));\r\n        let id = obj.attr('id');\r\n        Session.set('editingUser', Meteor.users.findOne({_id: id}));\r\n        Modal.show('dashRoleEditor');\r\n    },\r\n    'click .btn-ban-user': function (evt) {\r\n        let obj = $(evt.target).closest($('.dash-user-container'));\r\n        let id = obj.attr('id');\r\n        alertPrompt(\"This doesn't have to happen. Please give a reason for the banning.\",function (result) {\r\n            Meteor.call('accounts.ban',id,result,function (err) {\r\n                if(err){\r\n                    alertError(\"Failed to ban user\", err.message)\r\n                }else{\r\n                    alertSuccess(\"User has been successfully banned\", \"\")\r\n                }\r\n            })\r\n        })\r\n    }\r\n});\r\n\r\nTemplate.dashOrganizations.events({\r\n    'click #uploadCourses': function () {\r\n        let names = $('#courseNames').val();\r\n        let codes = $('#courseCodes').val();\r\n        Meteor.call('courses.addSeveral',names,codes,function (err) {\r\n            if(err){\r\n                alertError(\"Failed\", err.message)\r\n            }else{\r\n                alertSuccess('yeah','it didnt fail.')\r\n            }\r\n        })\r\n    },\r\n    'click #coursesLoadMore': function () {\r\n        courseSub.loadNextPage();\r\n        clubSub.loadNextPage();\r\n    },\r\n    'click #createNewClub': function () {\r\n        Modal.show('dashClubEditor');\r\n    },\r\n    'click .btn-delete': function (evt) {\r\n        let obj = $(evt.target).closest($('.editor-options'));\r\n        let type = obj.attr('data-category');\r\n        let id = obj.attr('id');\r\n        if(type === 'club'){\r\n            Meteor.call('clubs.remove', id, function (err) {\r\n                if(err){\r\n                    alertError('Something Terrible Happened...', err.message);\r\n                }\r\n            })\r\n        }else{\r\n            Meteor.call('course.remove', id, function (err) {\r\n                if(err){\r\n                    alertError('Something Terrible Happened...', err.message);\r\n                }\r\n            })\r\n        }\r\n    }\r\n});\r\n\r\nTemplate.dashRoleEditor.onRendered(function () {\r\n    let data = Session.get('editingUser');\r\n    console.log(data);\r\n    $(document).ready(function () {\r\n        $('#newUserRoles').select2({\r\n            placeholder: \"Click to select...\",\r\n            allowClear: false,\r\n        });\r\n        $(\"#newUserRoles\").val(data.roles).trigger(\"change\");\r\n    });\r\n});\r\n\r\nTemplate.dashRoleEditor.helpers({\r\n    'name': function () {\r\n        return Session.get('editingUser').services.google.name;\r\n    }\r\n});\r\n\r\nTemplate.dashRoleEditor.events({\r\n    'submit .dash-role-edit': function (evt) {\r\n        let data = Session.get('editingUser');\r\n        evt.preventDefault();\r\n        console.log($('#newUserRoles').val());\r\n        Meteor.call('addUserToRole', data._id, $('#newUserRoles').val(), function (err) {\r\n            if(err){\r\n                alertError(\"Role Modification Failed!\", err.message);\r\n            }else{\r\n                Modal.hide('dashRoleEditor');\r\n                alertSuccess(\"Success!\", \"User Role has been successfully modified!\")\r\n            }\r\n        })\r\n    }\r\n});\r\n\r\nTemplate.dashClubEditor.onRendered(function () {\r\n    let drop = initDropZone('newClubImage',{\r\n        number: 1,\r\n        size: 10,\r\n        message: \"Drop your image here or click to use the file browser\"\r\n    });\r\n});\r\n\r\nTemplate.dashCategoryEditor.onRendered(function () {\r\n    let drop = initDropZone('newCategoryImage',{\r\n        number: 1,\r\n        size: 10,\r\n        message: \"Drop your image here or click to use the file browser\"\r\n    });\r\n});\r\n\r\nTemplate.dashPostEditor.onRendered(function () {\r\n    let data = Session.get('dashEditorData');\r\n    if(data.subType === 'imageOnly'){\r\n        $('#newPostBody').hide()\r\n    }else{\r\n        $('#newPostBody').val(data.content);\r\n    }\r\n    $('#newPostHeadline').val(data.headline);\r\n    $(\"#newPostTags\").tagsinput('items');\r\n    _.forEach(data.tags,function (item) {\r\n        $('#newPostTags').tagsinput('add', item);\r\n    });\r\n\r\n    Tracker.autorun(function () {\r\n        let categorySub = Meteor.subscribe('categories');\r\n        if(categorySub.ready()){\r\n            let categories = Categories.find({});\r\n            categories.observeChanges({\r\n                added: function(id, fields) {\r\n                    let newCat = new Option(fields.name, fields.name);\r\n                    $('#newPostCategories').append(newCat);\r\n                }\r\n            });\r\n            $(\"#newPostCategories\").val(data.categories).trigger(\"change\");\r\n        }\r\n    });\r\n    $(document).ready(function () {\r\n        $('#newPostCategories').select2({\r\n            placeholder: \"Click to select matching categories\",\r\n            allowClear: true,\r\n        });\r\n    });\r\n});\r\n\r\nTemplate.dashCategoryEditor.events({\r\n    'submit .dash-category-edit': function (evt) {\r\n        evt.preventDefault();\r\n        let json = {\r\n            name: $('#newCategoryName').val(),\r\n            description: $('#newCategoryDescription').val(),\r\n            imgId: Session.get('categoryImageId'),\r\n            featured: $('#newCategoryFeatured').is(':checked')\r\n        };\r\n        //console.log(json);\r\n        if(!Session.get('editingBlogCategory')){\r\n            Meteor.call('category.addNew',json,function (err) {\r\n                Modal.hide('dashCategoryEditor');\r\n                if(err){\r\n                    alertError('Something Wrong Happened...', err.message);\r\n                }\r\n            })\r\n        }else{\r\n            Meteor.call('blogCategory.addNew',json,function (err) {\r\n                Modal.hide('dashCategoryEditor');\r\n                if(err){\r\n                    alertError('Something Wrong Happened...', err.message);\r\n                }\r\n            })\r\n        }\r\n\r\n    }\r\n});\r\n\r\nTemplate.dashClubEditor.events({\r\n    'submit .dash-club-edit': function (evt) {\r\n        evt.preventDefault();\r\n        let json = {\r\n            name: $('#newClubName').val(),\r\n            description: $('#newClubDescription').val(),\r\n            room: $('#newClubRoom').val(),\r\n            schedule: $('#newClubSchedule').val(),\r\n            imgId: Session.get('categoryImageId'),\r\n        };\r\n        Meteor.call('clubs.add', json, function (err) {\r\n            if (err) {\r\n                alertError(\"Error Creating Club\", err.message)\r\n            } else {\r\n                Modal.hide('dashClubEditor');\r\n                alertSuccess(\"Yah!\", \"Club successfully created!\")\r\n            }\r\n        })\r\n    }\r\n});\r\n\r\nTemplate.dashPostEditor.events({\r\n    'submit .dash-announcement-edit': function (evt) {\r\n        evt.preventDefault();\r\n        let separators = [' , ', ', ', ',', ' ,'];\r\n        let tags = $('#newPostTags').val().split(new RegExp(separators.join('|'), 'g'));\r\n        let json = {\r\n            headline: $('#newPostHeadline').val(),\r\n            content: $('#newPostBody').val(),\r\n            tags: tags\r\n        };\r\n        Posts.update({_id: Session.get('editingId')},{$set: json});\r\n        Modal.hide();\r\n    }\r\n});\r\n\r\n\r\nfunction initDropZone(id, info) {\r\n    return new Dropzone(\"form#\" + id, {\r\n        maxFiles: info.number || 1,\r\n        maxFilesize: info.size || 8,\r\n        thumbnailWidth: 400,\r\n        addRemoveLinks: true,\r\n        dictDefaultMessage: info.message || \"Drop your image here, or click to select an image using the browser.\",\r\n        accept: function (file, done) {\r\n            let FSFile = new FS.File(file);\r\n\r\n            Images.insert(FSFile, function (err, fileObj) {\r\n                if (err) {\r\n                    console.log(err);\r\n                } else {\r\n                    //remove the currently uploaded image\r\n                    //if there is none, this will not do anything\r\n                    Images.remove({_id: Session.get('newImageId')}, function (err) {\r\n                        if (err) {\r\n                            console.log(\"error removing image:\\n\" + err);\r\n                        }\r\n                    });\r\n                    //retreive file extension\r\n                    hasUnsplash = false;\r\n                    Session.set('newFileType', fileObj.extension());   //update the file type\r\n                    Session.set('categoryImageId', fileObj._id); //update the image id to current image\r\n                    done();\r\n                }\r\n            });\r\n        }\r\n    });\r\n}\r\n","import { Images } from '../../api/images/images.js';\r\nimport './details.html';\r\n\r\nTemplate.details.onCreated(function () {\r\n    let data = Session.get('post_data');\r\n    Session.set('navTitle', data.title);\r\n});\r\n\r\nTemplate.details.onRendered(function () {\r\n});\r\n\r\nTemplate.details.helpers({\r\n    'name': function () {\r\n      return Session.get('name');\r\n    },\r\n   'picture': function () {\r\n       return Session.get('user_img');\r\n   },\r\n    'postSubtitle': function () {\r\n        let data = Session.get('post_data');\r\n        return data.subtitle;\r\n    },\r\n    'postBody': function () {\r\n        let data = Session.get('post_data');\r\n        return data.content;\r\n    },\r\n    'postTags': function () {\r\n        let data = Session.get('post_data');\r\n        return data.tags;\r\n    },\r\n    'postSplash': function () {\r\n        let data = Session.get('post_data');\r\n        if(data.meta.hasUnsplash){\r\n            Meteor.call('setupUnsplash', function (err) {\r\n                if(err){\r\n                    console.log(err);\r\n                }else{\r\n                    Meteor.call('getPhoto', data.imgId,function (err,data) {\r\n                        if(err){\r\n                            console.log(err);\r\n                        }else{\r\n                            console.log(data.urls.full);\r\n                            $('.post-header').css('background-image',\"url(\"+data.urls.full+\")\");\r\n                            return data.urls.full;\r\n                        }\r\n                    })\r\n                }\r\n            });\r\n        }else{\r\n            Tracker.autorun(function () {\r\n                let image = Images.findOne({_id: data.imgId});\r\n                if(image){\r\n                    let url = image.url();\r\n                    $('.post-header').css('background-image',\"url(\"+url+\")\");\r\n                    return true;\r\n                }\r\n            });\r\n        }\r\n    }\r\n});\r\n","/**\r\n * Created by Yonglin Wang on 8/3/2017.\r\n */\r\nimport './firstTime.html'\r\n\r\nTemplate.firstTime.onRendered(function () {\r\n    Tracker.autorun(function () {\r\n        let courseSub = Meteor.subscribe('allCourses',1000);\r\n        let clubSub = Meteor.subscribe('allClubs',1000);\r\n        if(courseSub.ready() && clubSub.ready()){\r\n            let courses = Courses.find({});\r\n            let clubs = Clubs.find({});\r\n            courses.observeChanges({\r\n                added: function (id, fields) {\r\n                    let newCat = new Option(fields.name + \" - \" + fields.code, fields.code);\r\n                    $('#firstCourseSelect').append(newCat)\r\n                }\r\n            });\r\n            clubs.observeChanges({\r\n                added: function (id, fields) {\r\n                    let newCat = new Option(fields.name, fields.code);\r\n                    $('#firstClubSelect').append(newCat)\r\n                }\r\n            })\r\n        }\r\n    });\r\n    $('#firstCourseSelect').select2({\r\n        placeholder: \"Click to select matching categories\",\r\n        allowClear: true\r\n    });\r\n    $('#firstClubSelect').select2({\r\n        placeholder: \"Click to select matching categories\",\r\n        allowClear: true\r\n    });\r\n});\r\n\r\nTemplate.firstTime.events({\r\n    'click #startFirst': function (evt,template) {\r\n        evt.preventDefault();\r\n        swapElements('#firstIntro','#teachIntro');\r\n        swapElements('#beginIntro','#teachAssistInfo');\r\n    },\r\n    'click #skipNext': function (evt,template) {\r\n        evt.preventDefault();\r\n        swapElements('#teachIntro', '#emailIntro');\r\n        swapElements('#teachAssistInfo', '#subscriptionEmail');\r\n    },\r\n    'click #skipEmail': function (evt,template) {\r\n        evt.preventDefault();\r\n        const user = Meteor.user();\r\n        $('#introName').val(user.services.google.name);\r\n        $('#introStudentNum').val(user.profile.student_number);\r\n        $('#introSubEmail').val(user.profile.email);\r\n        swapElements('#emailIntro', '#confirmIntro');\r\n        swapElements('#subscriptionEmail', '#confirmDetails');\r\n    },\r\n    'submit #teachAssistForm': function (evt) {\r\n        evt.preventDefault();\r\n        const user = $('#teachUser').val();\r\n        const pass = $('#teachPass').val();\r\n        $('.teach-assist-login').fadeOut('fast', function () {\r\n           $('.teachLoader').fadeIn('slow')\r\n        });\r\n        Meteor.call('getTeachAssistTokens', {student_number: user, password: pass}, function (err, data) {\r\n            if(err){\r\n                alertError(\"Failed to connect with teach assist\", err.message);\r\n                $('.teachLoader').fadeOut('fast', function () {\r\n                    $('.teach-assist-login').fadeIn('slow')\r\n                });\r\n            }else{\r\n                Meteor.users.update({_id: Meteor.userId()}, {$set: {\"private.token\": data, \"private.tokenDate\": new Date()}}, function (err) {\r\n                    if(err){\r\n                        alertError(\"Something went wrong\", \"You can connect your account anytime later\");\r\n                        swapElements('#teachIntro', '#emailIntro');\r\n                        swapElements('#teachAssistInfo', '#subscriptionEmail');\r\n                    }else{\r\n                        Meteor.users.update({_id: Meteor.userId()}, {$set: {\"profile.student_number\": user}});\r\n                        Meteor.call('getTeachAssistCourses', data, function (err,data) {\r\n                            if(err){\r\n                                alertError(\"Something went wrong\", \"You can connect your account anytime later\");\r\n                                swapElements('#teachIntro', '#emailIntro');\r\n                                swapElements('#teachAssistInfo', '#subscriptionEmail');\r\n                            }else{\r\n                                Meteor.users.update({_id: Meteor.userId()}, {$set: {\"private.courses\": data}});\r\n                                alertSuccess(\"Yeah!\", 'We have successfully connected you and teach assist, however further login will be required since token may expire.');\r\n                                swapElements('#teachIntro', '#emailIntro');\r\n                                swapElements('#teachAssistInfo', '#subscriptionEmail');\r\n                            }\r\n                        })\r\n                    }\r\n                });\r\n            }\r\n        })\r\n    },\r\n    'submit #organizationsForm': function (evt) {\r\n        evt.preventDefault();\r\n        const courses = $('#firstCourseSelect').val();\r\n        const clubs = $('#firstClubSelect').val();\r\n        Meteor.users.update({_id: Meteor.userId()}, {$set: {\"profile.courses\": courses, \"profile.clubs\": clubs}}, function (err) {\r\n            if(err){\r\n                alertError(\"Error Occurred when updating your profile\", err.message)\r\n            }else {\r\n                alertSuccess(\"Thank you!\", \"We have recorded the information you provided\")\r\n            }\r\n        });\r\n    },\r\n    'submit #newsletterEmailForm': function (evt) {\r\n        evt.preventDefault();\r\n        let email = $('#personalEmail').val();\r\n        let userInfo = Meteor.user().services.google;\r\n        if(!validateEmail(email)){\r\n            alertError(\"Sorry...\", \"The email you entered is unacceptable.\")\r\n        }else{\r\n            Meteor.call('news.addSubscriber', email, userInfo.given_name, userInfo.family_name, function (err) {\r\n                if(err){\r\n                    alertError(\"Something went wrong\", err.message + \"\\nYou can subscribe to the newsletter anytime later.\")\r\n                }else{\r\n                    Session.set('personalEmail', email);\r\n                    alertSuccess(\"Great!\", \"We have signed you up for newsletters!\");\r\n                    swapElements('#emailIntro', '#confirmIntro');\r\n                    swapElements('#subscriptionEmail', '#confirmDetails');\r\n                }\r\n            })\r\n        }\r\n    },\r\n    'submit #finalForm': function (evt,template) {\r\n        evt.preventDefault();\r\n        if(document.getElementById('checkboxTerms').checked){\r\n            let id = Meteor.userId();\r\n            Meteor.call('initUserProfile', id, function (err) {\r\n                if(err){\r\n                    alertError('Error Initiating Your Account', err.message);\r\n                }else{\r\n                    swapElements('.wizard-container', '.final-message');\r\n                    setTimeout(function () {\r\n                        FlowRouter.go('/')\r\n                    }, 3000);\r\n                }\r\n            });\r\n        }else{\r\n            alertError(\"Oops.\", \"Please agree to the terms of service.\")\r\n        }\r\n\r\n    }\r\n});\r\n\r\nfunction swapElements(a,b){\r\n    $(a).fadeOut('fast', function () {\r\n        $(this).replaceWith($(b));\r\n        $(b).fadeIn(\"slow\");\r\n    });\r\n}\r\nfunction validateEmail(email) {\r\n    var re = /^(([^<>()[\\]\\\\.,;:\\s@\\\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\r\n    return re.test(email);\r\n}","/**\r\n * Created by Yonglin Wang on 7/30/2017.\r\n */\r\nimport './login.html'\r\n\r\nTemplate.login.onRendered(function () {\r\n    //disable register and hid all error prompts when the page initializes\r\n    $('.email-warning').hide();\r\n    $('#registerSubmit').prop('disabled', true);\r\n});\r\n\r\n/**\r\n * This function defines all the events on the login page.*/\r\n\r\nTemplate.login.events({\r\n    //toggle between register and login form\r\n    'click .operation': function () {\r\n        $('form').animate({height: \"toggle\", opacity: \"toggle\"}, \"slow\");\r\n    },\r\n    'submit .login-form': function (evt) {\r\n        evt.preventDefault();\r\n        const email = evt.target.email.value;\r\n        const pass = evt.target.password.value;\r\n        Meteor.loginWithPassword(email,pass,function (err) {\r\n            if(err){\r\n                console.log(err);\r\n            }else {\r\n\r\n            }\r\n        });\r\n\r\n    },\r\n    'submit .register-form': function (evt) {\r\n        const email = evt.target.registerEmail.value;\r\n        const firstName = evt.target.firstName.value;\r\n        const lastName = evt.target.lastName.value;\r\n        const pass = evt.target.registerPassword.value;\r\n        Accounts.createUser({\r\n            username: firstName+lastName,\r\n            email: email,\r\n            password: pass,\r\n            profile:{\r\n                firstName: firstName,\r\n                lastName: lastName,\r\n                fullName: firstName + \" \" + lastName,\r\n                homeRoom: 0,\r\n                picture: null\r\n            }\r\n        },function(err){\r\n            if(err){\r\n                alert(\"error\");\r\n                console.log(err)\r\n            }else{\r\n                console.log(\"Success\")\r\n            }\r\n        });\r\n    },\r\n    'click #googleLogin':function () {\r\n        Meteor.loginWithGoogle({\r\n            loginStyle: \"redirect\",\r\n            requestPermissions: ['profile','email'],\r\n        },(err)=>{\r\n            if(err){\r\n                alertError(\"Sorry...\", err.message);\r\n            }\r\n        });\r\n    },\r\n    'keyup #registerEmail': function (evt) {\r\n        evt.preventDefault();\r\n        let email = evt.target.value;\r\n        if(validateEmail(email)){\r\n            $('.email-warning').hide();\r\n            $('#registerSubmit').prop('disabled',false);\r\n        }else{\r\n            $('.email-warning').show();\r\n            $('#registerSubmit').prop('disabled',true);\r\n        }\r\n    }\r\n});\r\n/**\r\n * This local method validates the state of a String to see if it is a proper email\r\n * **/\r\nfunction validateEmail(email) {\r\n    let re = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\r\n    return re.test(email);\r\n}\r\n\r\nAccounts.onLogin( ()=>{\r\n    const redirect = Session.get('redirectAfterLogin');\r\n    if(redirect){\r\n        if(redirect !== '/login'){\r\n            FlowRouter.go(redirect);\r\n        }\r\n    }else{\r\n        //FlowRouter.go('/');\r\n    }\r\n});\r\n","/**\r\n * Created by Yonglin Wang on 7/31/2017.\r\n */\r\nimport imagesLoaded from 'imagesloaded';\r\nimport './stream.html'\r\nimport { Images } from '../../api/images/images.js';\r\nlet isotopeSettings = {\r\n    itemSelector: '.grid-item',\r\n    percentPosition: true,\r\n    masonry: {\r\n        columnWidth: '.grid-sizer',\r\n        gutter: '.gutter-sizer'\r\n    }\r\n};\r\nTemplate.stream.onRendered(function () {\r\n    let $grid = $('.grid');\r\n    Tracker.autorun(function () {\r\n        let postSub = Meteor.subscribe('announcements', 10, Meteor.userId());\r\n        let categorySub = Meteor.subscribe('categories');\r\n        let imageSub = Meteor.subscribe('images');\r\n        if(postSub.ready()){\r\n            $('.grid').isotope(isotopeSettings);\r\n            $('.grid').imagesLoaded().progress( function() {\r\n                $('.grid').isotope(isotopeSettings);\r\n            });\r\n        }\r\n    });\r\n    setTitle('Stream');\r\n});\r\n\r\nTemplate.stream.helpers({\r\n    'category': function () {\r\n      return Categories.find({});\r\n    },\r\n    'allPosts': function () {\r\n        let query = Posts.find({\r\n            'meta.approved': true,\r\n            'type': 'announcement'\r\n        });\r\n        query.observeChanges({\r\n            added: function(id, fields) {\r\n                setTimeout(function () {\r\n                    $('.grid').isotope('reloadItems');\r\n                    $('.grid').isotope()\r\n                }, 500);\r\n            },\r\n            changed: function(id, fields) {\r\n                setTimeout(function () {\r\n                    $('.grid').isotope('reloadItems');\r\n                    $('.grid').isotope()\r\n                }, 500);\r\n            },\r\n            removed: function() {\r\n                setTimeout(function () {\r\n                    $('.grid').isotope('reloadItems');\r\n                    $('.grid').isotope()\r\n                }, 500);\r\n            }\r\n        });\r\n        return query.fetch().reverse();\r\n    },\r\n    'effectiveDate': function () {\r\n        return (this.startDate === this.endDate) ? moment(this.startDate).format(\"MMMM Do YYYY\") : moment(this.startDate).format(\"MMMM Do YYYY\") + \" - \" + moment(this.endDate).format(\"MMMM Do YYYY\");\r\n    },\r\n    'isImageOnly': function () {\r\n        return this.subType === 'imageOnly' && this.type === 'announcement'\r\n    },\r\n    'isTextOnly': function () {\r\n        return this.subType === 'textOnly' && this.type === 'announcement'\r\n    },\r\n    'isImageText': function () {\r\n        return this.subType === 'imageText' && this.type === 'announcement'\r\n    },\r\n    'isBlog': function () {\r\n        return this.type === 'blog'\r\n    },\r\n    'categories': function () {\r\n        let list = this.categories;\r\n        let text = \"\";\r\n        _.forEach(list,function (item) {\r\n            text += item + \" \"\r\n        });\r\n        return text;\r\n    },\r\n    'textOverImage': function () {\r\n        return this.subType === 'imageText' && this.type === 'announcement' && this.meta.priority === 'text'\r\n    },\r\n    'imageOverText': function () {\r\n        return this.subType === 'imageText' && this.type === 'announcement' && this.meta.priority === 'image'\r\n    },\r\n    'writer': function () {\r\n        return Meteor.users.findOne({_id: this.author}).services.google.name;\r\n    },\r\n    'imageLink': function () {\r\n        if(this.unsplash){\r\n            return this.unsplash.urls.full;\r\n        }else if(this.imgId){\r\n            try{\r\n                return Images.findOne({_id: this.imgId}).url();\r\n            }catch(e){\r\n                //console.log('error getting photo')\r\n            }\r\n        }\r\n    }\r\n\r\n});\r\n\r\nTemplate.stream.events({\r\n    'click .filter-btn': function (evt) {\r\n        let filterValue = $(evt.target).attr('data-filter');\r\n        $('.is-checked').removeClass('is-checked');\r\n        $(evt.target).addClass('is-checked');\r\n        $('.grid').isotope({ filter: filterValue });\r\n    },\r\n    'click .blog-item': function (evt,template) {\r\n        let obj = $(evt.target).closest($('.blog-item'));\r\n        let id = obj.attr('id');\r\n        FlowRouter.go('/blog/'+id);\r\n    }\r\n});\r\ngetUnsplashLink = function (id) {\r\n    Meteor.call('setupUnsplash', function (err) {\r\n        if(err){\r\n            console.log(err);\r\n        }else{\r\n            console.log(id);\r\n            Meteor.call('getPhoto', id, function (err,data) {\r\n                if(err){\r\n                    console.log(err);\r\n                }else{\r\n                    Session.set('unsplashFeatured', data.urls.full);\r\n                    $('.grid').isotope();\r\n                }\r\n            })\r\n        }\r\n    });\r\n};","//This file provides a library of dialogs that are used in uhs.life\r\n\r\nalertError = function (title, body) {\r\n    bootbox.alert({\r\n        title: \"<i class='fa fa-5x fa-times-circle-o'></i>\",\r\n        message: \"<h3>\"+title+\"</h3><p>\"+ body +\"</p>\",\r\n        buttons: {\r\n            ok:{\r\n                label:\"Got it\",\r\n                className: 'btn-confirm'\r\n            }\r\n        }\r\n    });\r\n};\r\n\r\nalertSuccess = function (title, body) {\r\n    bootbox.alert({\r\n        title: \"<i class='fa fa-5x fa-check-circle-o'></i>\",\r\n        message: \"<h3>\"+title+\"</h3><p>\"+ body +\"</p>\",\r\n        buttons: {\r\n            ok:{\r\n                label:\"Got it\",\r\n                className: 'btn-confirm'\r\n            }\r\n        }\r\n    });\r\n    $(\".modal-header\").css('background','#4caf50');\r\n    $(\".btn-confirm\").css('background','#4caf50');\r\n};\r\n\r\nalertConfirm = function (title, body, callback) {\r\n    bootbox.confirm({\r\n        title: \"<i class='fa fa-5x fa-question-circle-o'></i>\",\r\n        message: \"<h3>\"+title+\"</h3><p>\"+ body +\"</p>\",\r\n        buttons: {\r\n            confirm: {\r\n                label: 'Yes I am Sure',\r\n                className: 'btn-success'\r\n            },\r\n            cancel: {\r\n                label: 'No, I am Not',\r\n                className: 'btn-grey'\r\n            }\r\n        },\r\n        callback: function (result) {\r\n            callback(result);\r\n        }\r\n    });\r\n    $(\".modal-header\").css('background','#2196F3');\r\n};\r\n\r\nalertPrompt = function (title, callback) {\r\n    bootbox.prompt({\r\n        title: title,\r\n        inputType: 'textarea',\r\n        callback: function (result) {\r\n            callback(result)\r\n        }\r\n    });\r\n};","import chart from 'chart.js';\r\n\r\n// Chart options\r\nChart.defaults.global.legend.display = false;\r\nChart.defaults.global.tooltips.enabled = true;\r\ndrawChart = function(chartId, mark){\r\n    //$( \"canvas#\"+chartId ).replaceWith( \"<canvas id='\" + chartId + \"'></canvas>\" );\r\n    let color;\r\n    if(mark >= 95){\r\n        color = \"#009688\";\r\n    }else if(mark >= 90){\r\n        color = \"#4caf50\";\r\n    }else if(mark >=85){\r\n        color = \"#8bc34a\";\r\n    }else if(mark >=80){\r\n        color = \"#cddc39\";\r\n    }else if(mark >=75){\r\n        color = \"#ffeb3b\";\r\n    }else if(mark >=70){\r\n        color = \"#ffc107\";\r\n    }else if(mark >=60){\r\n        color = \"#ff9800\";\r\n    }else if(mark >=55){\r\n        color = \"#ff5722\";\r\n    }else if(mark < 55){\r\n        color = \"#f44336\";\r\n    }\r\n    let ctx = document.getElementById(chartId).getContext(\"2d\");\r\n    //This will get the first returned node in the jQuery collection.\r\n    return new Chart(ctx, {\r\n        type: 'doughnut',\r\n        data: {\r\n            labels: [\r\n                \"Achievements\",\r\n                \"Losts\"\r\n            ],\r\n            datasets: [\r\n                {\r\n                    data: [mark, (100-mark).toFixed(1)],\r\n                    backgroundColor: [\r\n                        color,\r\n                        \"#A9A9A9\"\r\n                    ],\r\n                    hoverBackgroundColor: [\r\n                        color,\r\n                        \"#A9A9A9\"\r\n                    ]\r\n                }]\r\n        }\r\n    });\r\n}\r\n\r\ndrawSmallChartSide = function(chartId, mark, color){\r\n    $( \"canvas#\"+chartId ).replaceWith( \"<canvas id=\"+chartId+\" width='20' height='20'></canvas>\" );\r\n    //Get context with jQuery - using jQuery's .get() method.\r\n    var ctx = document.getElementById(chartId).getContext(\"2d\");\r\n    //This will get the first returned node in the jQuery collection.\r\n    myNewChart = new Chart(ctx, {\r\n        type: 'doughnut',\r\n        data: {\r\n            labels: [\r\n                \"Achievements\",\r\n                \"Losts\"\r\n            ],\r\n            datasets: [\r\n                {\r\n                    data: [mark, (100-mark).toFixed(1)],\r\n                    backgroundColor: [\r\n                        color,\r\n                        \"#A9A9A9\"\r\n                    ],\r\n                    hoverBackgroundColor: [\r\n                        color,\r\n                        \"#A9A9A9\"\r\n                    ]\r\n                }]\r\n        },\r\n        options: {\r\n            animation: false\r\n        }\r\n    });\r\n}\r\n\r\ndrawSmallChart = function(chartId, mark, color){\r\n    $( \"canvas#\"+chartId ).replaceWith( \"<canvas id=\"+chartId+\"></canvas>\" );\r\n    //Get context with jQuery - using jQuery's .get() method.\r\n    var ctx = document.getElementById(chartId).getContext(\"2d\");\r\n    //This will get the first returned node in the jQuery collection.\r\n    var myNewChart = new Chart(ctx, {\r\n        type: 'doughnut',\r\n        data: {\r\n            labels: [\r\n                \"Achievements\",\r\n                \"Losts\"\r\n            ],\r\n            datasets: [\r\n                {\r\n                    data: [mark, (100-mark).toFixed(1)],\r\n                    backgroundColor: [\r\n                        color,\r\n                        \"#A9A9A9\"\r\n                    ],\r\n                    hoverBackgroundColor: [\r\n                        color,\r\n                        \"#A9A9A9\"\r\n                    ]\r\n                }]\r\n        },\r\n        options: {\r\n            animation: false\r\n        }\r\n    });\r\n}\r\n\r\ndrawPolyChart = function(chartId, assignments, marks){\r\n\r\n    //Get context with jQuery - using jQuery's .get() method.\r\n    var ctx = document.getElementById(chartId).getContext(\"2d\");\r\n\r\n    var data = {\r\n        labels: assignments,\r\n        datasets: [\r\n            {\r\n                label: \"M.A.T.A.\",\r\n                fill: true,\r\n                lineTension: 0.1,\r\n                backgroundColor: \"rgba(75,192,192,0.4)\",\r\n                borderColor: \"rgba(75,192,192,1)\",\r\n                borderCapStyle: 'butt',\r\n                borderDash: [],\r\n                borderDashOffset: 0.0,\r\n                borderJoinStyle: 'miter',\r\n                pointBorderColor: \"rgba(75,192,192,1)\",\r\n                pointBackgroundColor: \"#fff\",\r\n                pointBorderWidth: 1,\r\n                pointHoverRadius: 5,\r\n                pointHoverBackgroundColor: \"rgba(75,192,192,1)\",\r\n                pointHoverBorderColor: \"rgba(220,220,220,1)\",\r\n                pointHoverBorderWidth: 2,\r\n                pointRadius: 5,\r\n                pointHitRadius: 10,\r\n                data: marks,\r\n                spanGaps: false,\r\n            }\r\n        ]\r\n    };\r\n    //This will get the first returned node in the jQuery collection.\r\n    var myChart = new Chart(ctx, {\r\n        type: 'line',\r\n        data: data,\r\n        options: {\r\n            scales: {\r\n                xAxes: [{\r\n                    ticks: {\r\n                        display: false\r\n                    }\r\n                }],\r\n                yAxes: [{\r\n                    ticks: {\r\n                        display: true\r\n                    }\r\n                }]\r\n            }\r\n        }\r\n    });\r\n}\r\n\r\ndrawPerformChart = function(chartId, assignments, k, t, c, a){\r\n\r\n    //Get context with jQuery - using jQuery's .get() method.\r\n    var ctx = document.getElementById(chartId).getContext(\"2d\");\r\n\r\n    var data = {\r\n        labels: assignments,\r\n        datasets: [\r\n            {\r\n                label: \"Knowledge\",\r\n                fill: false,\r\n                lineTension: 0.1,\r\n                backgroundColor: \"rgba(255,193,7,0.4)\",\r\n                borderColor: \"rgba(255,193,7,1)\",\r\n                borderCapStyle: 'butt',\r\n                borderDash: [],\r\n                borderDashOffset: 0.0,\r\n                borderJoinStyle: 'miter',\r\n                pointBorderColor: \"rgba(255,193,7,1)\",\r\n                pointBackgroundColor: \"#fff\",\r\n                pointBorderWidth: 1,\r\n                pointHoverRadius: 5,\r\n                pointHoverBackgroundColor: \"rgba(255,193,7,1)\",\r\n                pointHoverBorderColor: \"rgba(255,193,7,1)\",\r\n                pointHoverBorderWidth: 2,\r\n                pointRadius: 5,\r\n                pointHitRadius: 10,\r\n                data: k,\r\n                spanGaps: true,\r\n            },\r\n            {\r\n                label: \"Thinking\",\r\n                fill: false,\r\n                lineTension: 0.1,\r\n                backgroundColor: \"rgba(76,175,80,0.4)\",\r\n                borderColor: \"rgba(76,175,80,1)\",\r\n                borderCapStyle: 'butt',\r\n                borderDash: [],\r\n                borderDashOffset: 0.0,\r\n                borderJoinStyle: 'miter',\r\n                pointBorderColor: \"rgba(76,175,80,1)\",\r\n                pointBackgroundColor: \"#fff\",\r\n                pointBorderWidth: 1,\r\n                pointHoverRadius: 5,\r\n                pointHoverBackgroundColor: \"rgba(76,175,80,1)\",\r\n                pointHoverBorderColor: \"rgba(76,175,80,1)\",\r\n                pointHoverBorderWidth: 2,\r\n                pointRadius: 5,\r\n                pointHitRadius: 10,\r\n                data: t,\r\n                spanGaps: true,\r\n            },\r\n            {\r\n                label: \"Communication\",\r\n                fill: false,\r\n                lineTension: 0.1,\r\n                backgroundColor: \"rgba(103,58,183,0.4)\",\r\n                borderColor: \"rgba(103,58,183,1)\",\r\n                borderCapStyle: 'butt',\r\n                borderDash: [],\r\n                borderDashOffset: 0.0,\r\n                borderJoinStyle: 'miter',\r\n                pointBorderColor: \"rgba(103,58,183,1)\",\r\n                pointBackgroundColor: \"#fff\",\r\n                pointBorderWidth: 1,\r\n                pointHoverRadius: 5,\r\n                pointHoverBackgroundColor: \"rgba(103,58,183,1)\",\r\n                pointHoverBorderColor: \"rgba(103,58,183,1)\",\r\n                pointHoverBorderWidth: 2,\r\n                pointRadius: 5,\r\n                pointHitRadius: 10,\r\n                data: c,\r\n                spanGaps: true,\r\n            },\r\n            {\r\n                label: \"Application\",\r\n                fill: false,\r\n                lineTension: 0.1,\r\n                backgroundColor: \"rgba(255,87,34,0.4)\",\r\n                borderColor: \"rgba(255,87,34,1)\",\r\n                borderCapStyle: 'butt',\r\n                borderDash: [],\r\n                borderDashOffset: 0.0,\r\n                borderJoinStyle: 'miter',\r\n                pointBorderColor: \"rgba(255,87,34,1)\",\r\n                pointBackgroundColor: \"#fff\",\r\n                pointBorderWidth: 1,\r\n                pointHoverRadius: 5,\r\n                pointHoverBackgroundColor: \"rgba(255,87,34,1)\",\r\n                pointHoverBorderColor: \"rgba(255,87,34,1)\",\r\n                pointHoverBorderWidth: 2,\r\n                pointRadius: 5,\r\n                pointHitRadius: 10,\r\n                data: a,\r\n                spanGaps: true,\r\n            }\r\n        ]\r\n    };\r\n    //This will get the first returned node in the jQuery collection.\r\n    var myChart = new Chart(ctx, {\r\n        type: 'line',\r\n        data: data,\r\n        options: {\r\n            scales: {\r\n                xAxes: [{\r\n                    ticks: {\r\n                        display: false\r\n                    }\r\n                }],\r\n                yAxes: [{\r\n                    ticks: {\r\n                        display: true\r\n                    }\r\n                }]\r\n            }\r\n        }\r\n    });\r\n}\r\n\r\n\r\ndrawHalfChart = function(chartId, mark, total, color){\r\n    var data = {\r\n        labels: [\r\n            \"Achievements\",\r\n            \"Losts\"\r\n        ],\r\n        datasets: [{\r\n            data: [mark, total-mark],\r\n            backgroundColor: [\r\n                color,\r\n                \"#A9A9A9\"\r\n            ],\r\n            hoverBackgroundColor: [\r\n                color,\r\n                \"#A9A9A9\"\r\n            ]\r\n        }]\r\n    };\r\n\r\n\r\n    var ctx = document.getElementById(chartId).getContext(\"2d\");\r\n\r\n// And for a doughnut chart\r\n    var myDoughnutChart = new Chart(ctx, {\r\n        type: 'doughnut',\r\n        data: data,\r\n        options: {\r\n            cutoutPercentage: 70,\r\n            rotation: 1 * Math.PI,\r\n            circumference: 1 * Math.PI,\r\n            animation: false\r\n        }\r\n    });\r\n}\r\n\r\ndrawHalfChartSide = function(chartId, mark, total, color){\r\n    $( \"canvas#\"+chartId ).replaceWith( \"<canvas id=\"+chartId+\"></canvas>\" );\r\n    var data = {\r\n        labels: [\r\n            \"Achievements\",\r\n            \"Losts\"\r\n        ],\r\n        datasets: [{\r\n            data: [mark, total-mark],\r\n            backgroundColor: [\r\n                color,\r\n                \"#A9A9A9\"\r\n            ],\r\n            hoverBackgroundColor: [\r\n                color,\r\n                \"#A9A9A9\"\r\n            ]\r\n        }]\r\n    };\r\n\r\n    var ctx = document.getElementById(chartId).getContext(\"2d\");\r\n\r\n// And for a doughnut chart\r\n    var myDoughnutChart = new Chart(ctx, {\r\n        type: 'doughnut',\r\n        data: data,\r\n        options: {\r\n            cutoutPercentage: 70,\r\n            rotation: 1 * Math.PI,\r\n            circumference: 1 * Math.PI,\r\n            animation: false\r\n        }\r\n    });\r\n}\r\n\r\ndrawPolyChartSide = function(chartId, assignments, marks){\r\n    $( \"canvas#\"+chartId ).replaceWith( \"<canvas id=\"+chartId+\"></canvas>\" );\r\n    //Get context with jQuery - using jQuery's .get() method.\r\n    var ctx = document.getElementById(chartId).getContext(\"2d\");\r\n\r\n    var data = {\r\n        labels: assignments,\r\n        datasets: [\r\n            {\r\n                label: \"M.A.T.A.\",\r\n                fill: false,\r\n                lineTension: 0.1,\r\n                backgroundColor: \"rgba(75,192,192,0.4)\",\r\n                borderColor: \"rgba(75,192,192,1)\",\r\n                borderCapStyle: 'butt',\r\n                borderDash: [],\r\n                borderDashOffset: 0.0,\r\n                borderJoinStyle: 'miter',\r\n                pointBorderColor: \"rgba(75,192,192,1)\",\r\n                pointBackgroundColor: \"#fff\",\r\n                pointBorderWidth: 1,\r\n                pointHoverRadius: 5,\r\n                pointHoverBackgroundColor: \"rgba(75,192,192,1)\",\r\n                pointHoverBorderColor: \"rgba(220,220,220,1)\",\r\n                pointHoverBorderWidth: 2,\r\n                pointRadius: 5,\r\n                pointHitRadius: 10,\r\n                data: marks,\r\n                spanGaps: false,\r\n            }\r\n        ]\r\n    };\r\n    //This will get the first returned node in the jQuery collection.\r\n    var myChart = new Chart(ctx, {\r\n        type: 'line',\r\n        data: data,\r\n        options: {\r\n            scales: {\r\n                xAxes: [{\r\n                    ticks: {\r\n                        display: false\r\n                    }\r\n                }],\r\n                yAxes: [{\r\n                    ticks: {\r\n                        display: false\r\n                    }\r\n                }]\r\n            }\r\n        }\r\n    });\r\n}","/*!\r\n * Morphext - Text Rotating Plugin for jQuery\r\n * https://github.com/MrSaints/Morphext\r\n *\r\n * Built on jQuery Boilerplate\r\n * http://jqueryboilerplate.com/\r\n *\r\n * Copyright 2014 Ian Lai and other contributors\r\n * Released under the MIT license\r\n * http://ian.mit-license.org/\r\n */\r\n\r\n/*eslint-env browser */\r\n/*global jQuery:false */\r\n/*eslint-disable no-underscore-dangle */\r\n\r\n(function ($) {\r\n    \"use strict\";\r\n\r\n    var pluginName = \"Morphext\",\r\n        defaults = {\r\n            animation: \"bounceIn\",\r\n            separator: \",\",\r\n            speed: 2000,\r\n            complete: $.noop\r\n        };\r\n\r\n    function Plugin (element, options) {\r\n        this.element = $(element);\r\n\r\n        this.settings = $.extend({}, defaults, options);\r\n        this._defaults = defaults;\r\n        this._init();\r\n    }\r\n\r\n    Plugin.prototype = {\r\n        _init: function () {\r\n            var $that = this;\r\n            this.phrases = [];\r\n\r\n            this.element.addClass(\"morphext\");\r\n\r\n            $.each(this.element.text().split(this.settings.separator), function (key, value) {\r\n                $that.phrases.push($.trim(value));\r\n            });\r\n\r\n            this.index = -1;\r\n            this.animate();\r\n            this.start();\r\n        },\r\n        animate: function () {\r\n            this.index = ++this.index % this.phrases.length;\r\n            this.element[0].innerHTML = \"<span class=\\\"animated \" + this.settings.animation + \"\\\">\" + this.phrases[this.index] + \"</span>\";\r\n\r\n            if ($.isFunction(this.settings.complete)) {\r\n                this.settings.complete.call(this);\r\n            }\r\n        },\r\n        start: function () {\r\n            var $that = this;\r\n            this._interval = setInterval(function () {\r\n                $that.animate();\r\n            }, this.settings.speed);\r\n        },\r\n        stop: function () {\r\n            this._interval = clearInterval(this._interval);\r\n        }\r\n    };\r\n\r\n    $.fn[pluginName] = function (options) {\r\n        return this.each(function() {\r\n            if (!$.data(this, \"plugin_\" + pluginName)) {\r\n                $.data(this, \"plugin_\" + pluginName, new Plugin(this, options));\r\n            }\r\n        });\r\n    };\r\n})(jQuery);\r\n","var imageStore = new FS.Store.GridFS(\"images\");\r\n\r\nexport const Images = new FS.Collection(\"images\", {\r\n  stores: [imageStore]\r\n});\r\n\r\n//Set the permissions for Images collection\r\nImages.allow({\r\n    insert: function(){\r\n       return Roles.userIsInRole(this.userId, ['teacher', 'admin']);\r\n    },\r\n    update: function(){\r\n       return Roles.userIsInRole(this.userId, ['teacher', 'admin']);\r\n    },\r\n    remove: function(){\r\n       return Roles.userIsInRole(this.userId, ['teacher', 'admin']);\r\n    },\r\n    download: function(){\r\n       return Roles.userIsInRole(this.userId, ['teacher', 'admin']);\r\n    }\r\n});\r\n","//setup for use of retreiving ALL results in algolia database\r\n\r\n// api key that connects the client side to Algolia's server\r\nvar client = AlgoliaSearch(\"GJDCY9DKEW\", \"1881fcb5fac28b033952f92b1bc33430\");\r\n\r\n// select indice (collection) of data to be accesed. In this case it would be the announcements\r\nvar index = client.initIndex('announcement');\r\n\r\n//function to search for announcements with a keyword\r\nsearchAll = function(keyword) {\r\n\r\n    //performs the search in algolia database in indice announcement\r\n    index.search(keyword, function searchDone(err, content) {\r\n\r\n        //error catch (server down, or algolia issue)\r\n        if(err) {\r\n            console.error('Algolia returned an error', err);\r\n        } else {\r\n\r\n            //retrieves number of results in content.nbHits\r\n            console.log('Received ' + content.nbHits + ' results.');\r\n\r\n            //Spits out list of announcements with the keyword\r\n            Session.set('results', content);\r\n        }\r\n    });\r\n}\r\n","//setup for use of search in algolia database\r\n\r\n// api key that connects the client side to Algolia's server\r\nvar client = AlgoliaSearch(\"GJDCY9DKEW\", \"1881fcb5fac28b033952f92b1bc33430\");\r\n\r\n// select indice (collection) of data to be accesed. In this case it would be the announcements\r\nvar index = client.initIndex('announcement');\r\n\r\n//function to search for announcements with a keyword\r\nsearchPost = function(keyword) {\r\n\r\n    //performs the search in algolia database in indice announcement\r\n    index.search(keyword, function searchDone(err, content) {\r\n\r\n        //error catch (server down, or algolia issue)\r\n        if(err) {\r\n            console.error('Algolia returned an error', err);\r\n        } else {\r\n\r\n            //retrieves number of results in content.nbHits\r\n            console.log('Received ' + content.nbHits + ' results.');\r\n\r\n            //Spits out list of announcements with the keyword\r\n            Session.set('searchContent', content);\r\n        }\r\n    });\r\n}\r\n","import {Images} from '../../api/images/images.js';\r\n\r\n//function to setup the facebook API\r\nsetupFacebook = function (callback) {\r\n    Meteor.call('getFBAppId', function (err, result) { //get the app id from server\r\n        if (err) {\r\n            console.log(\"error retreiving FB App ID\");\r\n            callback(err, null);\r\n        } else {\r\n            //Initialize the facebook SDK\r\n\r\n            FB.init({\r\n                appId: result,\r\n                status: true,\r\n                xfbml: true,\r\n                version: 'v2.9'\r\n            }, function(err, response) {\r\n                if (err) {\r\n                    console.log(err);\r\n                } else {\r\n                    console.log(response);\r\n                }\r\n            });\r\n            callback(null,1);\r\n        }\r\n    });\r\n}\r\n\r\nextendToken = function(accessToken) {\r\n    let appId, appSec;\r\n    Meteor.call('getFBAppId', function(err, response) {\r\n        appId = response;\r\n        Meteor.call('getFBSecret', function(err, response2) {\r\n            appSec = response2;\r\n            console.log(appId);\r\n            console.log(appSec);\r\n            console.log(accessToken);\r\n            $.get(\"https://graph.facebook.com/oauth/access_token\", {\r\n                grant_type:'fb_exchange_token',\r\n                client_id:appId,\r\n                client_secret:appSec,\r\n                fb_exchange_token:accessToken },\r\n                function (data) {\r\n                    console.log(data);\r\n            })\r\n        })\r\n    });\r\n\r\n}\r\n\r\n//function to post a message to facebook\r\npostTextFacebook = function (obj) {\r\n    //console.log(\"attempting to log in\");\r\n    /*FB.api('/1152573311514394/feed', 'post', {access_token: 'EAAGTzYuTCloBAFMDsZBc4ZB8Vle8L7Scrm07kYvDRc0SvaOYLwbOCQBtinhUQ4OSlRQOdNY7qgIGBDrVK60ckPdcNHZC6mZC8rANyjZCtH4XcE5qexIZCSHFDniuMyGBAcm3eZCpRDmhZA3NrNUyKa63ymrX7kQ4UKA4ThYD7CJffivm32CPIJ7i5sPcQ9X7KTGk5PgGXXpwiQZDZD',\r\n         message: obj.headline + '\\n' + obj.content},\r\n         function (response) {\r\n             console.log(response);\r\n    });*/\r\n    FB.login(function (response) {\r\n        //use this to get access token for user\r\n        //var token = response.authResponse.accessToken;\r\n        var pageToken, pageId;\r\n        console.log(response)\r\n        //make the API call to access pages\r\n        FB.api('/me/accounts', function (response) {\r\n            //console.log(response);\r\n\r\n            //store the pageToken and pageId for the first entry.\r\n            //This account is intended to only have one page as admin\r\n            pageToken = response.data[0].access_token;\r\n            pageId = response.data[0].id;\r\n            //extendToken(pageToken);\r\n\r\n            //make the API call to post as page\r\n            FB.api('/' + pageId + '/feed', 'post', {access_token: pageToken, message: obj.headline + '\\n' + obj.content}, function (response) {\r\n                console.log(response);\r\n            });\r\n\r\n        });\r\n    }, {scope: 'publish_actions,manage_pages,publish_pages'});  //permissions listed here\r\n}\r\n\r\n//test function to post with an image\r\npostImageFacebook = function (obj) {\r\n    console.log(\"posting to facebook\");\r\n    /*FB.api('/1152573311514394/feed', 'post', {access_token: 'EAAGTzYuTCloBAFMDsZBc4ZB8Vle8L7Scrm07kYvDRc0SvaOYLwbOCQBtinhUQ4OSlRQOdNY7qgIGBDrVK60ckPdcNHZC6mZC8rANyjZCtH4XcE5qexIZCSHFDniuMyGBAcm3eZCpRDmhZA3NrNUyKa63ymrX7kQ4UKA4ThYD7CJffivm32CPIJ7i5sPcQ9X7KTGk5PgGXXpwiQZDZD',\r\n        message: obj.headline,\r\n        picture: 'http://www.somebodymarketing.com/wp-content/uploads/2013/05/Stock-Dock-House.jpg',\r\n        link: 'https://www.nytimes.com/2017/09/08/us/hurricane-irma-miami-florida.html?hp&action=click&pgtype=Homepage&clickSource=story-heading&module=span-ab-top-region&region=top-news&WT.nav=top-news'},  //'http://www.somebodymarketing.com/wp-content/uploads/2013/05/Stock-Dock-House.jpg'Images.findOne({'_id':obj.imgId}).url()\r\n        function (response) {\r\n            console.log(response);\r\n\r\n    });*/\r\n    FB.login(function (response) {\r\n        //use this to get access token for user\r\n        //var token = response.authResponse.accessToken;\r\n        var pageToken, pageId;\r\n\r\n        //make the API call to access pages\r\n        FB.api('/me/accounts', function (response) {\r\n            console.log(response);\r\n\r\n            //store the pageToken and pageId for the first entry.\r\n            //This account is intended to only have one page as admin\r\n            pageToken = response.data[0].access_token;\r\n            pageId = response.data[0].id;\r\n\r\n            //make the API call to post as page\r\n            FB.api('/' + pageId + '/photos', 'post', {\r\n                access_token: pageToken,\r\n                message: obj.headline,\r\n                picture: Images.findOne({'_id':obj.imgId}).url(),  //'http://www.somebodymarketing.com/wp-content/uploads/2013/05/Stock-Dock-House.jpg'\r\n                //link: 'http://www.somebodymarketing.com/wp-content/uploads/2013/05/Stock-Dock-House.jpg'\r\n                //url: 'https://ak.picdn.net/assets/cms/97e1dd3f8a3ecb81356fe754a1a113f31b6dbfd4-stock-photo-photo-of-a-common-kingfisher-alcedo-atthis-adult-male-perched-on-a-lichen-covered-branch-107647640.jpg'\r\n            }, function (response) {\r\n                console.log(response);\r\n            });\r\n        });\r\n    }, {scope: 'publish_actions,manage_pages,publish_pages'});  //permissions listed here\r\n}\r\n\r\n//test function to post with an image\r\npostTextImageFacebook = function (obj) {\r\n    /*FB.api('/1152573311514394/feed', 'post', {access_token: 'EAAGTzYuTCloBALbOyEn5bDSAOVexEfStqMoHHhgXdZAeaPtUZCDduZAOjEggM89N8CdpfslUkG0OVxVzZBva4gRwla4oiySttyqjpjP92ALvYGean0aG2QdooSmQGhil9fOuarbssvgrnBXy0B8lJL2nZBj9EH83oQEtrnVj7wcIW3LkV8uBS',\r\n        message: obj.headline + '\\n' + obj.content,\r\n        picture: 'http://www.somebodymarketing.com/wp-content/uploads/2013/05/Stock-Dock-House.jpg',\r\n        link: 'http://www.somebodymarketing.com/wp-content/uploads/2013/05/Stock-Dock-House.jpg'},  //'http://www.somebodymarketing.com/wp-content/uploads/2013/05/Stock-Dock-House.jpg'Images.findOne({'_id':obj.imgId}).url()\r\n        function (response) {\r\n            console.log(response);\r\n    });*/\r\n    FB.login(function (response) {\r\n        //use this to get access token for user\r\n        //var token = response.authResponse.accessToken;\r\n        var pageToken, pageId;\r\n\r\n        //make the API call to access pages\r\n        FB.api('/me/accounts', function (response) {\r\n            console.log(response);\r\n\r\n            //store the pageToken and pageId for the first entry.\r\n            //This account is intended to only have one page as admin\r\n            pageToken = response.data[0].access_token;\r\n            pageId = response.data[0].id;\r\n\r\n            //make the API call to post as page\r\n            FB.api('/' + pageId + '/photos', 'post', {\r\n                access_token: pageToken,\r\n                message: obj.headline + '\\n' + obj.content,\r\n                picture: Images.findOne({'_id':obj.imgId}).url(),\r\n                //link: 'http://www.somebodymarketing.com/wp-content/uploads/2013/05/Stock-Dock-House.jpg'\r\n               // url: 'https://ak.picdn.net/assets/cms/97e1dd3f8a3ecb81356fe754a1a113f31b6dbfd4-stock-photo-photo-of-a-common-kingfisher-alcedo-atthis-adult-male-perched-on-a-lichen-covered-branch-107647640.jpg'\r\n            }, function (response) {\r\n                console.log(response);\r\n            });\r\n        });\r\n    }, {scope: 'publish_actions,manage_pages,publish_pages'});  //permissions listed here\r\n}\r\n","/**\r\n * Created by Yonglin Wang on 7/28/2017.\r\n *\r\n * This file manages the importing of all layouts and pages.\r\n *\r\n * A semi-colon is not necessary at the end of an import, please omit it.\r\n */\r\n//import ui files\r\nimport '../../ui/layouts/applicationLayout.js';\r\nimport '../../ui/components/navigation.js'\r\nimport '../../ui/pages/login.js';\r\nimport '../../ui/pages/stream.js';\r\nimport '../../ui/pages/firstTime.js';\r\nimport '../../ui/pages/details.js';\r\nimport '../../ui/components/editor.js';\r\nimport '../../ui/pages/course.js';\r\nimport '../../ui/pages/dashboard.js'\r\nimport '../../ui/pages/blogs.js'\r\nimport '../../ui/pages/bigPicture.js'\r\n\r\n//This file defines functions to post and setup the facebook API\r\nimport './facebook.js';\r\n//This file contains the search function used for Algolia\r\nimport './algoliaSearch.js';\r\n//This file contains the search all function used for Algolia\r\nimport './algoliaAll.js';\r\n\r\nDrafts = new Mongo.Collection('drafts');\r\nClubs = new Mongo.Collection('clubs');\r\nPosts = new Mongo.Collection('posts');\r\nCourses = new Mongo.Collection('courses');\r\nCategories = new Mongo.Collection('categories');\r\nBlogCategories = new Mongo.Collection('blogcategories');\r\nSuggestions = new Mongo.Collection('suggestions');","/**\r\n * This file defines the entry point of the client application, all initialization\r\n * behaviors are defined here.*/\r\n'use strict';\r\nimport './imports.js';\r\nimport './routes.js';\r\n\r\nDeps.autorun(function(){\r\n    Session.setDefault('searchContent', {hits:[]});\r\n    document.title = Session.get(\"DocumentTitle\");\r\n});\r\n\r\nfunction getUserLanguage() {\r\n    return \"en\";\r\n}\r\n\r\nif (Meteor.isClient) {\r\n    Meteor.startup(function () {\r\n        TAPi18n.setLanguage('en')\r\n            .done(function () {\r\n            })\r\n            .fail(function (error_message) {\r\n                // Handle the situation\r\n                console.log(error_message);\r\n            });\r\n    });\r\n}","/**\r\n * This file defines all the routing that takes place\r\n *\r\n * */\r\n\r\nlet loggedIn = FlowRouter.group({\r\n    triggersEnter: [\r\n        function () {\r\n            let route;\r\n            Session.set(\"DocumentTitle\",\"UHS Life - Crafted By Students, For Everyone\");\r\n            if (!(Meteor.loggingIn() || Meteor.userId())){\r\n                route = FlowRouter.current();\r\n                Session.set('redirectAfterLogin', route.path);\r\n                console.log(Session.get('redirectAfterLogin'));\r\n                FlowRouter.go('/login');\r\n            }else{\r\n                Tracker.autorun(function () {\r\n                    let userSub = Meteor.subscribe('allUsers');\r\n                    let user = Meteor.user();\r\n                    if(user && userSub.ready()){\r\n                        Session.setPersistent('inDash', false);\r\n                        if(!user.profile.init){\r\n                            Meteor.call('accounts.initRoles');\r\n                            FlowRouter.go('/first')\r\n                        }else{\r\n                            Session.setPersistent('name', user.services.google.name);\r\n                            if(Roles.userIsInRole(Meteor.userId(),'student')){\r\n                                Session.setPersistent('courses',user.private.courses);\r\n                                Session.setPersistent('token',user.private.token);\r\n                                Session.setPersistent('tokenExpiry',user.private.tokenDate);\r\n                            }\r\n                            Session.set('user_img', user.services.google.picture);\r\n                        }\r\n                    }\r\n                });\r\n            }\r\n        }\r\n    ]\r\n});\r\n\r\nlet admin = FlowRouter.group({\r\n    triggersEnter: [\r\n        function () {\r\n            let route;\r\n            if (!(Meteor.loggingIn() || Meteor.userId())){\r\n                route = FlowRouter.current();\r\n                Session.set('redirectAfterLogin', route.path);\r\n                console.log(Session.get('redirectAfterLogin'));\r\n                FlowRouter.go('/login');\r\n            }else{\r\n                Session.setPersistent('inDash', true);\r\n                Tracker.autorun(function () {\r\n                    let userSub = Meteor.subscribe('allUsers');\r\n                    let user = Meteor.user();\r\n                    if(user && userSub.ready()){\r\n                        if(!user.profile.init){\r\n                            Meteor.call('accounts.initRoles');\r\n                            FlowRouter.go('/first')\r\n                        }else{\r\n                            Session.set('name', user.services.google.name);\r\n                            Session.set('id', user.profile.id);\r\n                            Session.set('courses',user.private.courses);\r\n                            Session.set('tokenExpiry',user.private.tokenDate);\r\n                            Session.set('token',user.private.token);\r\n                            Session.set('user_img', user.services.google.picture);\r\n                        }\r\n                        /*else if(!Roles.userIsInRole(user._id, 'admin')){\r\n                         alertError('Sorry', \"You do not have access to this area.\");\r\n                         FlowRouter.go('/')\r\n                         }*/\r\n                    }\r\n                });\r\n            }\r\n        }\r\n    ]\r\n});\r\n\r\nadmin.route('/dashboard/users', {\r\n    action: function () {\r\n        Session.set(\"DocumentTitle\",\"Users - Administrative Dashboard | uhs.life\");\r\n        BlazeLayout.render('dashboard',{dash: 'dashUsers'})\r\n    }\r\n});\r\n\r\nadmin.route('/dashboard/announcements', {\r\n    action: function () {\r\n        Session.set(\"DocumentTitle\",\"All Announcements - Administrative Dashboard | uhs.life\");\r\n        BlazeLayout.render('dashboard',{dash: 'dashAnnouncements'})\r\n    }\r\n});\r\n\r\nadmin.route('/dashboard/categories', {\r\n    action: function () {\r\n        Session.set(\"DocumentTitle\",\"Categories - Administrative Dashboard | uhs.life\");\r\n        BlazeLayout.render('dashboard',{dash: 'dashCategories'})\r\n    }\r\n});\r\n\r\nadmin.route('/dashboard/organizations', {\r\n    action: function () {\r\n        Session.set(\"DocumentTitle\",\"Organizations - Administrative Dashboard | uhs.life\");\r\n        BlazeLayout.render('dashboard',{dash: 'dashOrganizations'})\r\n    }\r\n});\r\n\r\nadmin.route('/dashboard/suggestions', {\r\n    action: function () {\r\n        Session.set(\"DocumentTitle\",\"Suggestions - Administrative Dashboard | uhs.life\");\r\n        BlazeLayout.render('dashboard',{dash: 'dashSuggestions'})\r\n    }\r\n});\r\n\r\nFlowRouter.route('/login',{\r\n    waitOn: function(){\r\n        setTimeout(function() {\r\n            Accounts.loginServicesConfigured();\r\n        },500);\r\n    },\r\n    action: function(){\r\n        if(!Meteor.userId()){\r\n            Session.set('redirectAfterLogin', '/');\r\n            Session.set(\"DocumentTitle\",\"Please Login | uhs.life\");\r\n            BlazeLayout.render('applicationLayout', {main: 'login'});\r\n        }else{\r\n            FlowRouter.go('/');\r\n        }\r\n    },\r\n    name: 'login'\r\n});\r\n\r\nloggedIn.route('/stories',{\r\n    action: function () {\r\n        BlazeLayout.render('applicationLayout',{main: 'blogs'})\r\n    }\r\n});\r\n\r\nloggedIn.route('/blog/:postId',{\r\n    action: function (params) {\r\n        if(params.postId === 'preview'){\r\n            Session.setPersistent('post_data', Session.get('preview_json'))\r\n        }else{\r\n            Tracker.autorun(function () {\r\n               let post = Posts.findOne({_id: params.postId});\r\n               if(post){\r\n                   Session.set(\"DocumentTitle\", post.title + \" | uhs.life\");\r\n                   Session.setPersistent('post_data', post);\r\n               }\r\n            });\r\n        }\r\n        window.scrollTo(0, 0);\r\n        BlazeLayout.render('applicationLayout',{main: 'details'})\r\n    }\r\n});\r\n\r\nadmin.route('/dashboard',{\r\n    action: function () {\r\n        Session.set(\"DocumentTitle\",\"Administrative Dashboard | uhs.life\");\r\n        BlazeLayout.render('dashboard',{dash: 'dashHome'})\r\n    }\r\n});\r\n\r\nloggedIn.route('/course/:courseId',{\r\n    action: function (params) {\r\n        let tokenJson = Session.get('token');\r\n        console.log(tokenJson);\r\n        tokenJson.subject_id = params.courseId;\r\n        Meteor.call('getTeachAssistCourseDetails', tokenJson, function (err, data) {\r\n            if(err || data.ERROR){\r\n                if(err.error === 400){\r\n                    Modal.show('teachAssistPass');\r\n                }else{\r\n                    alertError('Something went wrong', 'We are having problems talking to teach assist. You can visit ta.yrdsb.ca for more details on your mark.')\r\n                }\r\n            }else{\r\n                console.log(data);\r\n                let a = Meteor.user().private.courses;\r\n                console.log(a);\r\n                let found;\r\n                let entry;\r\n                for (let index = 0; index < a.length; ++index) {\r\n                    entry = a[index];\r\n                    if (entry.subject_id === params.courseId) {\r\n                        found = entry;\r\n                        break;\r\n                    }\r\n                }\r\n                Session.setPersistent('displayMark', found.mark);\r\n                Session.setPersistent('courseData', data);\r\n                window.scrollTo(0, 0);\r\n                BlazeLayout.render('applicationLayout',{main: 'course'});\r\n            }\r\n        });\r\n    },\r\n    name: 'course'\r\n});\r\n\r\nloggedIn.route( '/big-picture', {\r\n    action: function() {\r\n        BlazeLayout.render('applicationLayout', {main: 'bigPicture'});\r\n    },\r\n    name: 'bigPicture' // Optional route name.\r\n});\r\n\r\nloggedIn.route( '/', {\r\n    action: function() {\r\n        Session.set(\"DocumentTitle\", \"Stream | uhs.life\");\r\n        BlazeLayout.render('applicationLayout', {main: 'stream'});\r\n    },\r\n    name: 'root' // Optional route name.\r\n});\r\n\r\nloggedIn.route( '/stream', {\r\n    action: function() {\r\n        BlazeLayout.render('applicationLayout', {main: 'stream'});\r\n    },\r\n    name: 'stream' // Optional route name.\r\n});\r\n\r\nloggedIn.route('/logout',{\r\n    action: () => {\r\n        Session.set(\"DocumentTitle\",\"Logging out...\");\r\n        Meteor.logout(function() {\r\n            Session.clear();\r\n            FlowRouter.go('/');\r\n        });\r\n    },\r\n    name: 'logout'\r\n});\r\n\r\nloggedIn.route('/first', {\r\n    action: function () {\r\n        Session.set(\"DocumentTitle\",\"Welcome to uhs.life!\");\r\n        BlazeLayout.render('applicationLayout',{main: 'firstTime'});\r\n        /*Tracker.autorun(function () {\r\n            let user = Meteor.user();\r\n            if(user){\r\n                if(user.profile.init){\r\n                    FlowRouter.go('/')\r\n                }else{\r\n                    BlazeLayout.render('applicationLayout',{main: 'firstTime'});\r\n                }\r\n            }\r\n        });*/\r\n    },\r\n    name: 'first'\r\n});\r\n\r\ncheckTokenExpiry = function () {\r\n    const now = new Date();\r\n    let diff = Math.abs(now - Session.get('tokenExpiry'));\r\n    let minutes = Math.floor((diff/1000)/60);\r\n    return minutes < 15;\r\n}","import '/imports/startup/client';\r\n\r\n"]}
{"metadata":{"usedHelpers":[],"marked":[],"modules":{"imports":[{"source":"../lib/charting.js","imported":[],"specifiers":[]},{"source":"../lib/alert.js","imported":[],"specifiers":[]},{"source":"../../api/images/images.js","imported":["Images"],"specifiers":[{"kind":"named","imported":"Images","local":"Images"}]},{"source":"./course.html","imported":[],"specifiers":[]}],"exports":{"exported":[],"specifiers":[]}}},"options":{"filename":"imports/ui/pages/course.js","filenameRelative":"imports/ui/pages/course.js","env":{"development":{"plugins":[]}},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],{"generateLetDeclarations":true,"enforceStrictMode":false}],[[],null],[[],{"polyfill":false}],[[],null],[[],null],[[],null],[[],{"allowTopLevelThis":true,"strict":false,"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],{"loose":true}],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null]],"ignore":[],"code":true,"metadata":true,"ast":true,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"imports/ui/pages/course.js.map","sourceFileName":"imports/ui/pages/course.js","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"parserOpts":false,"generatorOpts":false,"basename":"course"},"ignored":false,"code":"module.watch(require(\"../lib/charting.js\"));\nmodule.watch(require(\"../lib/alert.js\"));\nvar Images = void 0;\nmodule.watch(require(\"../../api/images/images.js\"), {\n    Images: function (v) {\n        Images = v;\n    }\n}, 0);\nmodule.watch(require(\"./course.html\"));\nTemplate.course.onRendered(function () {\n    Tracker.autorun(function () {\n        var sub = Meteor.subscribe('allCourses', 1000);\n        Meteor.subscribe('images');\n\n        if (sub.ready()) {\n            var code = Session.get('courseData').data.course.substring(0, Session.get('courseData').data.course.indexOf(\"-\"));\n            var item = Courses.findOne({\n                code: code\n            });\n            setTitle(item.name + ' | ' + Session.get('displayMark'));\n            Session.set('courseCode', code);\n            Meteor.subscribe('postsByCourse', code, 10);\n        }\n    });\n    var k = void 0,\n        t = void 0,\n        a = void 0,\n        c = void 0;\n    $(document).ready(function () {\n        Tracker.autorun(function () {\n            var marks = Session.get('courseData').categoryMarks;\n\n            if (marks) {\n                setProgressBar(Session.get('displayMark').substring(1));\n\n                try {\n                    console.log();\n                    k.data.datasets[0].data = [marks[0], 100 - marks[0]];\n                    t.data.datasets[0].data = [marks[1], 100 - marks[1]];\n                    c.data.datasets[0].data = [marks[2], 100 - marks[2]];\n                    a.data.datasets[0].data = [marks[3], 100 - marks[3]];\n                    k.update();\n                    t.update();\n                    a.update();\n                    c.update();\n                } catch (e) {\n                    console.log('first time graphing');\n                    k = drawChart('knowledgeChart', marks[0]);\n                    t = drawChart('thinkingChart', marks[1]);\n                    a = drawChart('communicationChart', marks[2]);\n                    c = drawChart('applicationChart', marks[3]);\n                }\n            }\n        });\n        $(document).scroll(function () {\n            $('.performance-progress').each(function () {\n                $(this).css({\n                    width: $(this).attr('data-progress')\n                });\n            });\n        });\n        $('.performance-presenter').hide();\n    });\n    $('.insights').hide();\n});\nTemplate.course.helpers({\n    'assessment': function () {\n        var arr = Session.get('courseData').data.assessment;\n        var newArr = [];\n\n        while (arr.length) {\n            newArr.push(arr.splice(0, 2));\n        }\n\n        return newArr;\n    },\n    'percentage': function () {\n        return Math.round(this.mark / this.outOf * 100 * 10) / 10 + \"%\";\n    },\n    'readings': function () {\n        return Posts.find({\n            'type': 'blog',\n            organizationsValues: Session.get('courseCode')\n        });\n    },\n    'imageLink': function () {\n        if (this.unsplash) {\n            return this.unsplash.urls.full;\n        } else if (this.imgId) {\n            var id = this.imgId;\n            return Images.findOne({\n                _id: id\n            }).url();\n        }\n    },\n    'isMobile': function () {\n        return $(window).width() <= 768;\n    },\n    'culminating': function () {\n        return Session.get('courseData').categories.O * 100 + '%';\n    }\n});\nTemplate.course.events({\n    'click .performance': function (evt, template) {\n        var choice = $(evt.target).closest($('.performance'));\n        var assessment = $(evt.target).closest($('.assessment-body'));\n        var title = assessment.find('.assessment-title').text();\n        var object = null;\n\n        _.forEach(Session.get('courseData').data.assessment, function (item) {\n            if (item.title === title) {\n                object = item;\n            }\n        });\n\n        if (!choice.hasClass('not-available')) {\n            var data = $(evt.target).closest($('.assessment-performance')).find($('.performance-presenter'));\n            var section = data.find('.presenter-section');\n            var achieved = data.find('.achieved');\n            var outOf = data.find('.out-of');\n            var weight = data.find('.weight');\n\n            if (choice.hasClass('knowledge')) {\n                data.css({\n                    background: 'linear-gradient(to right, #f7971e, #ffd200)'\n                });\n                achieved.text(object.K.mark);\n                outOf.text(object.K.outOf);\n                weight.text(object.K.weight);\n                section.text('Knowledge');\n            } else if (choice.hasClass('thinking')) {\n                data.css({\n                    background: 'linear-gradient(to right, #11998e, #38ef7d)'\n                });\n                achieved.text(object.T.mark);\n                outOf.text(object.T.outOf);\n                weight.text(object.T.weight);\n                section.text('Thinking');\n            } else if (choice.hasClass('communication')) {\n                data.css({\n                    background: 'linear-gradient(to right, #7F00FF, #E100FF)'\n                });\n                achieved.text(object.C.mark);\n                outOf.text(object.C.outOf);\n                weight.text(object.C.weight);\n                section.text('Communication');\n            } else if (choice.hasClass('application')) {\n                data.css({\n                    background: 'linear-gradient(to right, #fc4a1a, #f7b733)'\n                });\n                achieved.text(object.A.mark);\n                outOf.text(object.A.outOf);\n                weight.text(object.A.weight);\n                section.text('Application');\n            } else if (choice.hasClass('other')) {\n                data.css({\n                    background: 'linear-gradient(to right, #757F9A, #D7DDE8)'\n                });\n                achieved.text(object.O.mark);\n                outOf.text(object.O.outOf);\n                weight.text(object.O.weight);\n                section.text('Culminating');\n            }\n\n            data.slideDown('fast');\n        }\n    },\n    'click .close-presenter': function (evt, template) {\n        var data = $(evt.target).closest($('.performance-presenter'));\n        data.slideUp('fast');\n    },\n    'click .filter-btn': function (evt) {\n        var filterValue = '.' + $(evt.target).attr('data-tab');\n        var currentValue = '.' + $('.is-checked').attr('data-tab');\n        $('.is-checked').removeClass('is-checked');\n        $(evt.target).addClass('is-checked');\n\n        if (filterValue === '.insights') {\n            $(currentValue).fadeOut('fast');\n            $('.insights').fadeIn('slow');\n            var names = [],\n                marks = [];\n\n            _.forEach(Session.get('courseData').data.assessment, function (item) {\n                names.push(item.title);\n            });\n\n            _.forEach(Session.get('courseData').timeline, function (item) {\n                marks.push(item.mark);\n            });\n\n            console.log(names, marks);\n            drawPolyChart('markByAssignment', names, marks);\n            drawPerformChart('sectionMarkByAssignment', ['a', 'b', 'c', 'd'], [90, 88, 85, 99], [88, 90, 99, 78], [100, 89, 67, 88], [99, 99, 89, 86]);\n        } else {\n            $(currentValue).fadeOut('fast');\n            $(filterValue).fadeIn('slow');\n        }\n    }\n});","map":{"version":3,"sources":["imports/ui/pages/course.js"],"names":["module","watch","require","Images","v","Template","course","onRendered","Tracker","autorun","sub","Meteor","subscribe","ready","code","Session","get","data","substring","indexOf","item","Courses","findOne","setTitle","name","set","k","t","a","c","$","document","marks","categoryMarks","setProgressBar","console","log","datasets","update","e","drawChart","scroll","each","css","width","attr","hide","helpers","arr","assessment","newArr","length","push","splice","Math","round","mark","outOf","Posts","find","organizationsValues","unsplash","urls","full","imgId","id","_id","url","window","categories","O","events","evt","template","choice","target","closest","title","text","object","_","forEach","hasClass","section","achieved","weight","background","K","T","C","A","slideDown","slideUp","filterValue","currentValue","removeClass","addClass","fadeOut","fadeIn","names","timeline","drawPolyChart","drawPerformChart"],"mappings":"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","file":"imports/ui/pages/course.js.map","sourcesContent":["import '../lib/charting.js'\r\nimport '../lib/alert.js'\r\nimport {Images} from '../../api/images/images.js';\r\nimport './course.html';\r\n\r\nTemplate.course.onRendered(function () {\r\n    Tracker.autorun(function () {\r\n        let sub = Meteor.subscribe('allCourses',1000);\r\n        Meteor.subscribe('images');\r\n        if(sub.ready()){\r\n            let code = Session.get('courseData').data.course.substring(0,Session.get('courseData').data.course.indexOf(\"-\"));\r\n            let item = Courses.findOne({\r\n                code: code\r\n            });\r\n            setTitle(item.name +' | ' + Session.get('displayMark'));\r\n            Session.set('courseCode',code);\r\n            Meteor.subscribe('postsByCourse',code,10);\r\n        }\r\n    });\r\n    let k,t,a,c;\r\n    $( document ).ready(function() {\r\n        Tracker.autorun(function () {\r\n            let marks = Session.get('courseData').categoryMarks;\r\n            if(marks){\r\n                setProgressBar(Session.get('displayMark').substring(1));\r\n                try{\r\n                    console.log();\r\n                    k.data.datasets[0].data = [marks[0], 100-marks[0]];\r\n                    t.data.datasets[0].data = [marks[1], 100-marks[1]];\r\n                    c.data.datasets[0].data = [marks[2], 100-marks[2]];\r\n                    a.data.datasets[0].data = [marks[3], 100-marks[3]];\r\n                    k.update();\r\n                    t.update();\r\n                    a.update();\r\n                    c.update();\r\n                }catch (e){\r\n                    console.log('first time graphing');\r\n                    k = drawChart('knowledgeChart', marks[0]);\r\n                    t = drawChart('thinkingChart', marks[1]);\r\n                    a = drawChart('communicationChart', marks[2]);\r\n                    c = drawChart('applicationChart', marks[3]);\r\n                }\r\n\r\n            }\r\n        });\r\n        $(document).scroll(function () {\r\n            $('.performance-progress').each(function () {\r\n                $(this).css({ width: $(this).attr('data-progress') });\r\n            })\r\n        });\r\n        $('.performance-presenter').hide();\r\n    });\r\n    $('.insights').hide();\r\n});\r\n\r\nTemplate.course.helpers({\r\n    'assessment': function () {\r\n        let arr = Session.get('courseData').data.assessment;\r\n        let newArr = [];\r\n        while(arr.length) newArr.push(arr.splice(0,2));\r\n        return newArr\r\n    },\r\n    'percentage': function () {\r\n        return (Math.round(((this.mark / this.outOf) * 100) * 10) / 10) + \"%\"\r\n    },\r\n    'readings': function () {\r\n        return Posts.find({\r\n            'type': 'blog',\r\n            organizationsValues: Session.get('courseCode')\r\n        });\r\n    },\r\n    'imageLink': function () {\r\n        if(this.unsplash){\r\n            return this.unsplash.urls.full;\r\n        }else if(this.imgId){\r\n            let id = this.imgId;\r\n            return Images.findOne({_id: id}).url();\r\n        }\r\n    },\r\n    'isMobile': function () {\r\n        return $( window ).width() <= 768;\r\n    },\r\n    'culminating': function () {\r\n        return Session.get('courseData').categories.O *100 + '%'\r\n    }\r\n});\r\n\r\nTemplate.course.events({\r\n    'click .performance': function (evt, template) {\r\n        let choice = $(evt.target).closest($('.performance'));\r\n        let assessment = $(evt.target).closest($('.assessment-body'));\r\n        let title = assessment.find('.assessment-title').text();\r\n        let object = null;\r\n        _.forEach(Session.get('courseData').data.assessment, function (item) {\r\n            if(item.title === title){\r\n                object = item;\r\n            }\r\n        });\r\n        if(!choice.hasClass('not-available')){\r\n            let data = $(evt.target).closest($('.assessment-performance')).find($('.performance-presenter'));\r\n            let section = data.find('.presenter-section');\r\n            let achieved = data.find('.achieved');\r\n            let outOf = data.find('.out-of');\r\n            let weight = data.find('.weight');\r\n            if(choice.hasClass('knowledge')){\r\n                data.css({\r\n                    background: 'linear-gradient(to right, #f7971e, #ffd200)'\r\n                });\r\n                achieved.text(object.K.mark);\r\n                outOf.text(object.K.outOf);\r\n                weight.text(object.K.weight);\r\n                section.text('Knowledge');\r\n            }else if(choice.hasClass('thinking')){\r\n                data.css({\r\n                    background: 'linear-gradient(to right, #11998e, #38ef7d)'\r\n                });\r\n                achieved.text(object.T.mark);\r\n                outOf.text(object.T.outOf);\r\n                weight.text(object.T.weight);\r\n                section.text('Thinking');\r\n            }else if(choice.hasClass('communication')){\r\n                data.css({\r\n                    background: 'linear-gradient(to right, #7F00FF, #E100FF)'\r\n                });\r\n                achieved.text(object.C.mark);\r\n                outOf.text(object.C.outOf);\r\n                weight.text(object.C.weight);\r\n                section.text('Communication');\r\n            }else if(choice.hasClass('application')){\r\n                data.css({\r\n                    background: 'linear-gradient(to right, #fc4a1a, #f7b733)'\r\n                });\r\n                achieved.text(object.A.mark);\r\n                outOf.text(object.A.outOf);\r\n                weight.text(object.A.weight);\r\n                section.text('Application');\r\n            }else if(choice.hasClass('other')){\r\n                data.css({\r\n                    background: 'linear-gradient(to right, #757F9A, #D7DDE8)'\r\n                });\r\n                achieved.text(object.O.mark);\r\n                outOf.text(object.O.outOf);\r\n                weight.text(object.O.weight);\r\n                section.text('Culminating');\r\n            }\r\n\r\n            data.slideDown('fast');\r\n        }\r\n\r\n    },\r\n    'click .close-presenter': function (evt, template) {\r\n        let data = $(evt.target).closest($('.performance-presenter'));\r\n        data.slideUp('fast');\r\n    },\r\n    'click .filter-btn': function (evt) {\r\n        let filterValue = '.' + $(evt.target).attr('data-tab');\r\n        let currentValue = '.' + $('.is-checked').attr('data-tab');\r\n        $('.is-checked').removeClass('is-checked');\r\n        $(evt.target).addClass('is-checked');\r\n        if(filterValue === '.insights'){\r\n            $(currentValue).fadeOut('fast');\r\n            $('.insights').fadeIn('slow');\r\n            let names = [], marks = [];\r\n            _.forEach(Session.get('courseData').data.assessment, function (item) {\r\n                names.push(item.title);\r\n            });\r\n            _.forEach(Session.get('courseData').timeline, function (item) {\r\n                marks.push(item.mark);\r\n            });\r\n            console.log(names,marks);\r\n            drawPolyChart('markByAssignment',names, marks);\r\n            drawPerformChart('sectionMarkByAssignment',['a','b','c','d'],[90, 88, 85, 99],[88, 90, 99, 78],[100,89,67,88],[99,99,89,86])\r\n        }else{\r\n            $(currentValue).fadeOut('fast');\r\n            $(filterValue).fadeIn('slow');\r\n        }\r\n    }\r\n});"]},"hash":"559b599818df876d40efd9e569161b90fa45396f"}

{"metadata":{"usedHelpers":[],"marked":[],"modules":{"imports":[],"exports":{"exported":[],"specifiers":[]}}},"options":{"filename":"packages/mongo/local_collection_driver.js","filenameRelative":"packages/mongo/local_collection_driver.js","env":{"development":{"plugins":[]}},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],{"generateLetDeclarations":true,"enforceStrictMode":false}],[[],null],[[],{"polyfill":false}],[[],null],[[],null],[[],null],[[],{"allowTopLevelThis":true,"strict":false,"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],{"loose":true}],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null]],"ignore":[],"code":true,"metadata":true,"ast":true,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"packages/mongo/local_collection_driver.js.map","sourceFileName":"packages/mongo/local_collection_driver.js","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"parserOpts":false,"generatorOpts":false,"basename":"local_collection_driver"},"ignored":false,"code":"LocalCollectionDriver = function () {\n  var self = this;\n  self.noConnCollections = {};\n};\n\nvar ensureCollection = function (name, collections) {\n  if (!(name in collections)) collections[name] = new LocalCollection(name);\n  return collections[name];\n};\n\n_.extend(LocalCollectionDriver.prototype, {\n  open: function (name, conn) {\n    var self = this;\n    if (!name) return new LocalCollection();\n\n    if (!conn) {\n      return ensureCollection(name, self.noConnCollections);\n    }\n\n    if (!conn._mongo_livedata_collections) conn._mongo_livedata_collections = {}; // XXX is there a way to keep track of a connection's collections without\n    // dangling it off the connection object?\n\n    return ensureCollection(name, conn._mongo_livedata_collections);\n  }\n}); // singleton\n\n\nLocalCollectionDriver = new LocalCollectionDriver();","map":{"version":3,"sources":["packages/mongo/local_collection_driver.js"],"names":["LocalCollectionDriver","self","noConnCollections","ensureCollection","name","collections","LocalCollection","_","extend","prototype","open","conn","_mongo_livedata_collections"],"mappings":"AAAAA,wBAAwB,YAAY;AAClC,MAAIC,OAAO,IAAX;AACAA,OAAKC,iBAAL,GAAyB,EAAzB;AACD,CAHD;;AAKA,IAAIC,mBAAmB,UAAUC,IAAV,EAAgBC,WAAhB,EAA6B;AAClD,MAAI,EAAED,QAAQC,WAAV,CAAJ,EACEA,YAAYD,IAAZ,IAAoB,IAAIE,eAAJ,CAAoBF,IAApB,CAApB;AACF,SAAOC,YAAYD,IAAZ,CAAP;AACD,CAJD;;AAMAG,EAAEC,MAAF,CAASR,sBAAsBS,SAA/B,EAA0C;AACxCC,QAAM,UAAUN,IAAV,EAAgBO,IAAhB,EAAsB;AAC1B,QAAIV,OAAO,IAAX;AACA,QAAI,CAACG,IAAL,EACE,OAAO,IAAIE,eAAJ,EAAP;;AACF,QAAI,CAAEK,IAAN,EAAY;AACV,aAAOR,iBAAiBC,IAAjB,EAAuBH,KAAKC,iBAA5B,CAAP;AACD;;AACD,QAAI,CAAES,KAAKC,2BAAX,EACED,KAAKC,2BAAL,GAAmC,EAAnC,CARwB,CAS1B;AACA;;AACA,WAAOT,iBAAiBC,IAAjB,EAAuBO,KAAKC,2BAA5B,CAAP;AACD;AAbuC,CAA1C,E,CAgBA;;;AACAZ,wBAAwB,IAAIA,qBAAJ,EAAxB","file":"packages/mongo/local_collection_driver.js.map","sourcesContent":["LocalCollectionDriver = function () {\n  var self = this;\n  self.noConnCollections = {};\n};\n\nvar ensureCollection = function (name, collections) {\n  if (!(name in collections))\n    collections[name] = new LocalCollection(name);\n  return collections[name];\n};\n\n_.extend(LocalCollectionDriver.prototype, {\n  open: function (name, conn) {\n    var self = this;\n    if (!name)\n      return new LocalCollection;\n    if (! conn) {\n      return ensureCollection(name, self.noConnCollections);\n    }\n    if (! conn._mongo_livedata_collections)\n      conn._mongo_livedata_collections = {};\n    // XXX is there a way to keep track of a connection's collections without\n    // dangling it off the connection object?\n    return ensureCollection(name, conn._mongo_livedata_collections);\n  }\n});\n\n// singleton\nLocalCollectionDriver = new LocalCollectionDriver;\n"]},"hash":"2ba56d6accf71272b3dc2edfc5790a321600c8e3"}

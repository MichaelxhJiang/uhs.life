{"metadata":{"usedHelpers":[],"marked":[],"modules":{"imports":[{"source":"typedjs-placeholder","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"Typed"}]},{"source":"../../api/images/images.js","imported":["Images"],"specifiers":[{"kind":"named","imported":"Images","local":"Images"}]},{"source":"./navigation.html","imported":[],"specifiers":[]},{"source":"../lib/morphext.js","imported":[],"specifiers":[]}],"exports":{"exported":[],"specifiers":[]}}},"options":{"filename":"imports/ui/components/navigation.js","filenameRelative":"imports/ui/components/navigation.js","env":{"development":{"plugins":[]}},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],{"generateLetDeclarations":true,"enforceStrictMode":false}],[[],null],[[],{"polyfill":false}],[[],null],[[],null],[[],null],[[],{"allowTopLevelThis":true,"strict":false,"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],{"loose":true}],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null]],"ignore":[],"code":true,"metadata":true,"ast":true,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"imports/ui/components/navigation.js.map","sourceFileName":"imports/ui/components/navigation.js","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"parserOpts":false,"generatorOpts":false,"basename":"navigation"},"ignored":false,"code":"var Typed = void 0;\nmodule.watch(require(\"typedjs-placeholder\"), {\n    \"default\": function (v) {\n        Typed = v;\n    }\n}, 0);\nvar Images = void 0;\nmodule.watch(require(\"../../api/images/images.js\"), {\n    Images: function (v) {\n        Images = v;\n    }\n}, 1);\nmodule.watch(require(\"./navigation.html\"));\nmodule.watch(require(\"../lib/morphext.js\"));\nTemplate.navigation.onRendered(function () {\n    //$('.course-list').hide();\n    $('.main-search').hide();\n    $('.search-content').hide();\n    $('.nav-overlay').hide();\n    Session.set('searchContent', {\n        hits: []\n    });\n});\nTemplate.navigation.helpers({\n    'date': function () {\n        return \"Friday April 7th\";\n    },\n    'username': function () {\n        return Session.get('name');\n    },\n    'title': function () {\n        return Session.get('navTitle');\n    },\n    'isStudent': function () {\n        return Roles.userIsInRole(Meteor.userId(), 'student');\n    },\n    'isAdmin': function () {\n        return Roles.userIsInRole(Meteor.userId(), 'admin');\n    },\n    'searchContent': function () {\n        return Session.get('searchContent').hits;\n    },\n    'img': function () {\n        if (this.unsplash) {\n            return this.unsplash.urls.full;\n        } else if (this.imgId) {\n            try {\n                return Images.findOne({\n                    _id: this.imgId\n                }).url();\n            } catch (e) {//console.log('error getting photo')\n            }\n        }\n    },\n    'courses': function () {\n        return Session.get('courses');\n    },\n    'state': function () {\n        var now = new Date();\n        var diff = Math.abs(now - Session.get('tokenExpiry'));\n        var minutes = Math.floor(diff / 1000 / 60);\n        return minutes > 30 ? 'expired' : 'fine';\n    },\n    'mark': function () {\n        var mark = this.mark;\n\n        if (mark.length > 6) {\n            mark = \"N/A\";\n        }\n\n        return mark;\n    },\n    'dash': function () {\n        return Session.get('inDash');\n    }\n});\nTemplate.navigation.events({\n    'click .nav-extend': function () {\n        var sideNav = $('.side-nav');\n        var sideNavPrompt = $('.side-nav-prompt');\n        $('.top-nav').toggleClass('right-push');\n        $('.main').toggleClass('right-push');\n        sideNav.toggleClass('right-push');\n\n        if ($('.main').hasClass('right-push')) {\n            sideNavPrompt.html(\"<i class='fa fa-times'></i> <span class='hidden-xs hidden-sm'>CLOSE</span>\");\n            $('.nav-overlay').fadeIn('fast');\n        } else {\n            sideNavPrompt.html(\"<i class='fa fa-bars'></i> <span class='hidden-xs hidden-sm'>MENU</span>\");\n            $('.nav-overlay').fadeOut('fast');\n        }\n    },\n    'click .nav-overlay': function () {\n        var sideNav = $('.side-nav');\n        var sideNavPrompt = $('.side-nav-prompt');\n        $('.top-nav').removeClass('right-push');\n        $('.main').removeClass('right-push');\n        sideNav.removeClass('right-push');\n\n        if ($('.main').hasClass('right-push')) {\n            sideNavPrompt.html(\"<i class='fa fa-times'></i> <span class='hidden-xs hidden-sm'>CLOSE</span>\");\n            $('.nav-overlay').fadeIn('fast');\n        } else {\n            sideNavPrompt.html(\"<i class='fa fa-bars'></i> <span class='hidden-xs hidden-sm'>MENU</span>\");\n            $('.nav-overlay').fadeOut('fast');\n        }\n    },\n    'click .nav-oper': function () {\n        var searchBox = $('.main-search');\n        var searchContent = $('.search-content');\n        var prompt = $('.top-operation-prompt');\n        Session.set('searchContent', {\n            hits: []\n        });\n\n        if (!searchBox.is(':visible')) {\n            searchBox.fadeIn('fast');\n            $('.search-result').show();\n            searchContent.fadeIn(\"<i class='fa fa-times'></i> <span class='hidden-sm hidden-xs'>SEARCH</span>\");\n            prompt.html(\"CLOSE\");\n            searchBox.typed({\n                strings: [\"\\\"Volleyball\\\"\", \"\\\"Octoberfest\\\"\", \"\\\"Guidance\\\"\", \"\\\"DECA\\\"\", \"\\\"USAC\\\"\", \"\\\"Who made this app?\\\"\"],\n                typeSpeed: 40,\n                loop: true,\n                shuffle: true,\n                showCursor: true,\n                cursorChar: \"|\"\n            });\n            $('html, body').css({\n                overflow: 'hidden'\n            });\n        } else {\n            searchBox.fadeOut('fast');\n            $('.search-result').hide();\n            searchContent.fadeOut('fast');\n            prompt.html(\"<i class='fa fa-search'></i> <span class='hidden-sm hidden-xs'>SEARCH</span>\");\n            $('html, body').css({\n                overflow: 'auto'\n            });\n        }\n    },\n    'click #academics': function () {\n        if (!Session.get('token')) {\n            Modal.show('teachAssistConnect');\n        }\n\n        var list = $('.course-list');\n        var icon = $('.academics-icon');\n\n        if (!list.is(':visible')) {\n            list.show(500);\n            icon.removeClass('fa-bars');\n            icon.addClass('fa-times');\n        } else {\n            list.hide(500);\n            icon.removeClass('fa-times');\n            icon.addClass('fa-bars');\n        }\n    },\n    'input .main-search': function () {\n        var searchBox = $('.main-search');\n        var searchPrompt = $('.search-prompt');\n\n        if (searchBox.val().length > 0) {\n            searchPrompt.css('display', 'none');\n            console.log(searchBox.val());\n            searchPost(searchBox.val());\n        } else {\n            searchPrompt.css('display', 'block');\n            Session.set('searchContent', {\n                hits: []\n            });\n        }\n    }\n});\nTemplate.teachAssistPass.helpers({\n    'student_id': function () {\n        return Meteor.user().profile.student_number;\n    }\n});\nTemplate.teachAssistConnect.events({\n    'submit #connectLoginForm': function (evt) {\n        evt.preventDefault();\n        var pass = $('#reLoginPass').val();\n        Meteor.call('getTeachAssistTokens', {\n            student_number: Meteor.user().profile.student_number,\n            password: pass\n        }, function (err, data) {\n            if (err) {\n                alertError(\"Failed to connect with teach assist\", err.message);\n            } else {\n                Meteor.users.update({\n                    _id: Meteor.userId()\n                }, {\n                    $set: {\n                        \"private.token\": data,\n                        \"private.tokenDate\": new Date()\n                    }\n                }, function (err) {\n                    if (err) {\n                        alertError(\"Something went wrong\", err.message);\n                    } else {\n                        Meteor.call('getTeachAssistCourses', data, function (err, data) {\n                            if (err) {\n                                alertError(\"Something went wrong\", \"\");\n                            } else {\n                                Meteor.users.update({\n                                    _id: Meteor.userId()\n                                }, {\n                                    $set: {\n                                        \"private.courses\": data\n                                    }\n                                });\n                                Modal.hide('teachAssistPass');\n                                FlowRouter.reload();\n                            }\n                        });\n                    }\n                });\n            }\n        });\n    }\n});\nTemplate.teachAssistPass.events({\n    'submit #reLoginForm': function (evt) {\n        evt.preventDefault();\n        var pass = $('#reLoginPass').val();\n        Meteor.call('getTeachAssistTokens', {\n            student_number: Meteor.user().profile.student_number,\n            password: pass\n        }, function (err, data) {\n            if (err) {\n                alertError(\"Failed to connect with teach assist\", err.message);\n            } else {\n                Meteor.users.update({\n                    _id: Meteor.userId()\n                }, {\n                    $set: {\n                        \"private.token\": data,\n                        \"private.tokenDate\": new Date()\n                    }\n                }, function (err) {\n                    if (err) {\n                        alertError(\"Something went wrong\", err.message);\n                    } else {\n                        Meteor.call('getTeachAssistCourses', data, function (err, data) {\n                            if (err) {\n                                alertError(\"Something went wrong\", \"\");\n                            } else {\n                                Meteor.users.update({\n                                    _id: Meteor.userId()\n                                }, {\n                                    $set: {\n                                        \"private.courses\": data\n                                    }\n                                });\n                                Modal.hide('teachAssistPass');\n                                FlowRouter.reload();\n                            }\n                        });\n                    }\n                });\n            }\n        });\n    }\n});\n\nsetTitle = function (title) {\n    $('.nav-title-text').html('<span>' + title + '</span>');\n};\n\nsetProgressBar = function (percentage) {\n    $('.nav-title-text').css('color', '#fff');\n    $('.nav-hub-progress').animate({\n        width: percentage\n    }, 1500);\n};","map":{"version":3,"sources":["imports/ui/components/navigation.js"],"names":["Typed","module","watch","require","v","Images","Template","navigation","onRendered","$","hide","Session","set","hits","helpers","get","Roles","userIsInRole","Meteor","userId","unsplash","urls","full","imgId","findOne","_id","url","e","now","Date","diff","Math","abs","minutes","floor","mark","length","events","sideNav","sideNavPrompt","toggleClass","hasClass","html","fadeIn","fadeOut","removeClass","searchBox","searchContent","prompt","is","show","typed","strings","typeSpeed","loop","shuffle","showCursor","cursorChar","css","overflow","Modal","list","icon","addClass","searchPrompt","val","console","log","searchPost","teachAssistPass","user","profile","student_number","teachAssistConnect","evt","preventDefault","pass","call","password","err","data","alertError","message","users","update","$set","FlowRouter","reload","setTitle","title","setProgressBar","percentage","animate","width"],"mappings":"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","file":"imports/ui/components/navigation.js.map","sourcesContent":["/**\r\n * Created by Yonglin Wang on 8/1/2017.\r\n */\r\nimport Typed from 'typedjs-placeholder'\r\nimport { Images } from '../../api/images/images.js';\r\nimport './navigation.html'\r\nimport '../lib/morphext.js'\r\nTemplate.navigation.onRendered(function () {\r\n    //$('.course-list').hide();\r\n    $('.main-search').hide();\r\n    $('.search-content').hide();\r\n    $('.nav-overlay').hide();\r\n    Session.set('searchContent', {hits:[]});\r\n});\r\n\r\nTemplate.navigation.helpers({\r\n    'date': function () {\r\n        return \"Friday April 7th\"\r\n    },\r\n    'username': function () {\r\n        return Session.get('name');\r\n    },\r\n    'title': function () {\r\n        return Session.get('navTitle');\r\n    },\r\n    'isStudent': function () {\r\n        return Roles.userIsInRole(Meteor.userId(), 'student');\r\n    },\r\n    'isAdmin': function () {\r\n        return Roles.userIsInRole(Meteor.userId(), 'admin');\r\n    },\r\n    'searchContent': function () {\r\n        return Session.get('searchContent').hits\r\n    },\r\n    'img': function () {\r\n        if(this.unsplash){\r\n            return this.unsplash.urls.full;\r\n        }else if(this.imgId){\r\n            try{\r\n                return Images.findOne({_id: this.imgId}).url();\r\n            }catch(e){\r\n                //console.log('error getting photo')\r\n            }\r\n\r\n        }\r\n    },\r\n    'courses': function () {\r\n        return Session.get('courses');\r\n    },\r\n    'state': function () {\r\n        const now = new Date();\r\n        let diff = Math.abs(now - Session.get('tokenExpiry'));\r\n        let minutes = Math.floor((diff/1000)/60);\r\n        return (minutes > 30) ? 'expired' : 'fine'\r\n    },\r\n    'mark': function () {\r\n        let mark = this.mark;\r\n        if(mark.length > 6){\r\n            mark = \"N/A\"\r\n        }\r\n        return mark;\r\n    },\r\n    'dash': function () {\r\n        return Session.get('inDash');\r\n    }\r\n});\r\n\r\nTemplate.navigation.events({\r\n    'click .nav-extend': function () {\r\n        let sideNav = $('.side-nav');\r\n        let sideNavPrompt = $('.side-nav-prompt');\r\n        $('.top-nav').toggleClass('right-push');\r\n        $('.main').toggleClass('right-push');\r\n        sideNav.toggleClass('right-push');\r\n        if($('.main').hasClass('right-push')) {\r\n            sideNavPrompt.html(\"<i class='fa fa-times'></i> <span class='hidden-xs hidden-sm'>CLOSE</span>\");\r\n            $('.nav-overlay').fadeIn('fast');\r\n        }else{\r\n            sideNavPrompt.html(\"<i class='fa fa-bars'></i> <span class='hidden-xs hidden-sm'>MENU</span>\");\r\n            $('.nav-overlay').fadeOut('fast');\r\n        }\r\n    },\r\n    'click .nav-overlay': function () {\r\n        let sideNav = $('.side-nav');\r\n        let sideNavPrompt = $('.side-nav-prompt');\r\n        $('.top-nav').removeClass('right-push');\r\n        $('.main').removeClass('right-push');\r\n        sideNav.removeClass('right-push');\r\n        if($('.main').hasClass('right-push')) {\r\n            sideNavPrompt.html(\"<i class='fa fa-times'></i> <span class='hidden-xs hidden-sm'>CLOSE</span>\");\r\n            $('.nav-overlay').fadeIn('fast');\r\n        }else{\r\n            sideNavPrompt.html(\"<i class='fa fa-bars'></i> <span class='hidden-xs hidden-sm'>MENU</span>\");\r\n            $('.nav-overlay').fadeOut('fast');\r\n        }\r\n    },\r\n    'click .nav-oper': function () {\r\n        let searchBox = $('.main-search');\r\n        let searchContent = $('.search-content');\r\n        let prompt = $('.top-operation-prompt');\r\n        Session.set('searchContent', {hits:[]});\r\n        if(!searchBox.is(':visible')){\r\n            searchBox.fadeIn('fast');\r\n            $('.search-result').show();\r\n            searchContent.fadeIn(\"<i class='fa fa-times'></i> <span class='hidden-sm hidden-xs'>SEARCH</span>\");\r\n            prompt.html(\"CLOSE\");\r\n            searchBox.typed({\r\n                strings: [\r\n                    \"\\\"Volleyball\\\"\",\r\n                    \"\\\"Octoberfest\\\"\",\r\n                    \"\\\"Guidance\\\"\",\r\n                    \"\\\"DECA\\\"\",\r\n                    \"\\\"USAC\\\"\",\r\n                    \"\\\"Who made this app?\\\"\"\r\n                ],\r\n                typeSpeed: 40,\r\n                loop: true,\r\n                shuffle: true,\r\n                showCursor: true,\r\n                cursorChar: \"|\",\r\n            });\r\n            $('html, body').css({\r\n                overflow: 'hidden',\r\n            });\r\n        }else{\r\n            searchBox.fadeOut('fast');\r\n            $('.search-result').hide();\r\n            searchContent.fadeOut('fast');\r\n            prompt.html(\"<i class='fa fa-search'></i> <span class='hidden-sm hidden-xs'>SEARCH</span>\");\r\n            $('html, body').css({\r\n                overflow: 'auto',\r\n            });\r\n        }\r\n    },\r\n    'click #academics': function () {\r\n        if(!Session.get('token')){\r\n            Modal.show('teachAssistConnect')\r\n        }\r\n        let list = $('.course-list');\r\n        let icon = $('.academics-icon');\r\n        if(!list.is(':visible')){\r\n            list.show(500);\r\n            icon.removeClass('fa-bars');\r\n            icon.addClass('fa-times');\r\n        }else{\r\n            list.hide(500);\r\n            icon.removeClass('fa-times');\r\n            icon.addClass('fa-bars')\r\n        }\r\n    },\r\n    'input .main-search': function () {\r\n        let searchBox = $('.main-search');\r\n        let searchPrompt = $('.search-prompt');\r\n        if(searchBox.val().length > 0){\r\n            searchPrompt.css('display','none');\r\n            console.log(searchBox.val());\r\n            searchPost(searchBox.val());\r\n        }else{\r\n            searchPrompt.css('display','block');\r\n            Session.set('searchContent', {hits:[]});\r\n        }\r\n    }\r\n});\r\n\r\nTemplate.teachAssistPass.helpers({\r\n    'student_id': function () {\r\n        return Meteor.user().profile.student_number;\r\n    }\r\n});\r\n\r\nTemplate.teachAssistConnect.events({\r\n    'submit #connectLoginForm': function (evt) {\r\n        evt.preventDefault();\r\n        const pass = $('#reLoginPass').val();\r\n        Meteor.call('getTeachAssistTokens', {student_number: Meteor.user().profile.student_number, password: pass}, function (err, data) {\r\n            if(err){\r\n                alertError(\"Failed to connect with teach assist\", err.message);\r\n            }else{\r\n                Meteor.users.update({_id: Meteor.userId()}, {$set: {\"private.token\": data, \"private.tokenDate\": new Date()}}, function (err) {\r\n                    if(err){\r\n                        alertError(\"Something went wrong\", err.message);\r\n                    }else{\r\n                        Meteor.call('getTeachAssistCourses', data, function (err,data) {\r\n                            if(err){\r\n                                alertError(\"Something went wrong\", \"\");\r\n                            }else{\r\n                                Meteor.users.update({_id: Meteor.userId()}, {$set: {\"private.courses\": data}});\r\n                                Modal.hide('teachAssistPass');\r\n                                FlowRouter.reload();\r\n                            }\r\n                        });\r\n                    }\r\n                });\r\n            }\r\n        })\r\n    }\r\n});\r\n\r\nTemplate.teachAssistPass.events({\r\n   'submit #reLoginForm': function (evt) {\r\n       evt.preventDefault();\r\n       const pass = $('#reLoginPass').val();\r\n       Meteor.call('getTeachAssistTokens', {student_number: Meteor.user().profile.student_number, password: pass}, function (err, data) {\r\n           if(err){\r\n               alertError(\"Failed to connect with teach assist\", err.message);\r\n           }else{\r\n               Meteor.users.update({_id: Meteor.userId()}, {$set: {\"private.token\": data, \"private.tokenDate\": new Date()}}, function (err) {\r\n                   if(err){\r\n                       alertError(\"Something went wrong\", err.message);\r\n                   }else{\r\n                       Meteor.call('getTeachAssistCourses', data, function (err,data) {\r\n                           if(err){\r\n                               alertError(\"Something went wrong\", \"\");\r\n                           }else{\r\n                               Meteor.users.update({_id: Meteor.userId()}, {$set: {\"private.courses\": data}});\r\n                               Modal.hide('teachAssistPass');\r\n                               FlowRouter.reload();\r\n                           }\r\n                       });\r\n                   }\r\n               });\r\n           }\r\n       })\r\n   }\r\n});\r\n\r\nsetTitle = function (title) {\r\n    $('.nav-title-text').html('<span>'+title+'</span>');\r\n};\r\n\r\nsetProgressBar = function (percentage) {\r\n    $('.nav-title-text').css('color','#fff');\r\n    $('.nav-hub-progress').animate({ width: percentage }, 1500);\r\n};\r\n"]},"hash":"1bbcc18449c40e9d064c495b06abc9d1f5ee2b3a"}

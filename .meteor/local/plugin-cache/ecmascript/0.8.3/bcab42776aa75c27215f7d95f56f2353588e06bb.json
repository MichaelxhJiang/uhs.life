{"metadata":{"usedHelpers":[],"marked":[],"modules":{"imports":[{"source":"../../api/images/images.js","imported":["Images"],"specifiers":[{"kind":"named","imported":"Images","local":"Images"}]},{"source":"./details.html","imported":[],"specifiers":[]}],"exports":{"exported":[],"specifiers":[]}}},"options":{"filename":"imports/ui/pages/details.js","filenameRelative":"imports/ui/pages/details.js","env":{"development":{"plugins":[]}},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],{"generateLetDeclarations":true,"enforceStrictMode":false}],[[],null],[[],{"polyfill":false}],[[],null],[[],null],[[],null],[[],{"allowTopLevelThis":true,"strict":false,"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],{"loose":true}],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null]],"ignore":[],"code":true,"metadata":true,"ast":true,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"imports/ui/pages/details.js.map","sourceFileName":"imports/ui/pages/details.js","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"parserOpts":false,"generatorOpts":false,"basename":"details"},"ignored":false,"code":"var Images = void 0;\nmodule.watch(require(\"../../api/images/images.js\"), {\n    Images: function (v) {\n        Images = v;\n    }\n}, 0);\nmodule.watch(require(\"./details.html\"));\nTemplate.details.onCreated(function () {\n    var data = Session.get('post_data');\n    Session.set('navTitle', data.title);\n});\nTemplate.details.onRendered(function () {});\nTemplate.details.helpers({\n    'name': function () {\n        return Session.get('name');\n    },\n    'picture': function () {\n        return Session.get('user_img');\n    },\n    'postSubtitle': function () {\n        var data = Session.get('post_data');\n        return data.subtitle;\n    },\n    'postBody': function () {\n        var data = Session.get('post_data');\n        return data.content;\n    },\n    'postTags': function () {\n        var data = Session.get('post_data');\n        return data.tags;\n    },\n    'postSplash': function () {\n        var data = Session.get('post_data');\n\n        if (data.meta.hasUnsplash) {\n            Meteor.call('setupUnsplash', function (err) {\n                if (err) {\n                    console.log(err);\n                } else {\n                    Meteor.call('getPhoto', data.imgId, function (err, data) {\n                        if (err) {\n                            console.log(err);\n                        } else {\n                            console.log(data.urls.full);\n                            $('.post-header').css('background-image', \"url(\" + data.urls.full + \")\");\n                            return data.urls.full;\n                        }\n                    });\n                }\n            });\n        } else {\n            Tracker.autorun(function () {\n                var image = Images.findOne({\n                    _id: data.imgId\n                });\n\n                if (image) {\n                    var url = image.url();\n                    $('.post-header').css('background-image', \"url(\" + url + \")\");\n                    return true;\n                }\n            });\n        }\n    }\n});","map":{"version":3,"sources":["imports/ui/pages/details.js"],"names":["Images","module","watch","require","v","Template","details","onCreated","data","Session","get","set","title","onRendered","helpers","subtitle","content","tags","meta","hasUnsplash","Meteor","call","err","console","log","imgId","urls","full","$","css","Tracker","autorun","image","findOne","_id","url"],"mappings":"AAAA,IAAIA,eAAJ;AAAWC,OAAOC,KAAP,CAAaC,QAAQ,4BAAR,CAAb,EAAmD;AAACH,UAAD,YAAQI,CAAR,EAAU;AAACJ,iBAAOI,CAAP;AAAS;AAApB,CAAnD,EAAyE,CAAzE;AAA4EH,OAAOC,KAAP,CAAaC,QAAQ,gBAAR,CAAb;AAGvFE,SAASC,OAAT,CAAiBC,SAAjB,CAA2B,YAAY;AACnC,QAAIC,OAAOC,QAAQC,GAAR,CAAY,WAAZ,CAAX;AACAD,YAAQE,GAAR,CAAY,UAAZ,EAAwBH,KAAKI,KAA7B;AACH,CAHD;AAKAP,SAASC,OAAT,CAAiBO,UAAjB,CAA4B,YAAY,CACvC,CADD;AAGAR,SAASC,OAAT,CAAiBQ,OAAjB,CAAyB;AACrB,YAAQ,YAAY;AAClB,eAAOL,QAAQC,GAAR,CAAY,MAAZ,CAAP;AACD,KAHoB;AAItB,eAAW,YAAY;AACnB,eAAOD,QAAQC,GAAR,CAAY,UAAZ,CAAP;AACH,KANqB;AAOrB,oBAAgB,YAAY;AACxB,YAAIF,OAAOC,QAAQC,GAAR,CAAY,WAAZ,CAAX;AACA,eAAOF,KAAKO,QAAZ;AACH,KAVoB;AAWrB,gBAAY,YAAY;AACpB,YAAIP,OAAOC,QAAQC,GAAR,CAAY,WAAZ,CAAX;AACA,eAAOF,KAAKQ,OAAZ;AACH,KAdoB;AAerB,gBAAY,YAAY;AACpB,YAAIR,OAAOC,QAAQC,GAAR,CAAY,WAAZ,CAAX;AACA,eAAOF,KAAKS,IAAZ;AACH,KAlBoB;AAmBrB,kBAAc,YAAY;AACtB,YAAIT,OAAOC,QAAQC,GAAR,CAAY,WAAZ,CAAX;;AACA,YAAGF,KAAKU,IAAL,CAAUC,WAAb,EAAyB;AACrBC,mBAAOC,IAAP,CAAY,eAAZ,EAA6B,UAAUC,GAAV,EAAe;AACxC,oBAAGA,GAAH,EAAO;AACHC,4BAAQC,GAAR,CAAYF,GAAZ;AACH,iBAFD,MAEK;AACDF,2BAAOC,IAAP,CAAY,UAAZ,EAAwBb,KAAKiB,KAA7B,EAAmC,UAAUH,GAAV,EAAcd,IAAd,EAAoB;AACnD,4BAAGc,GAAH,EAAO;AACHC,oCAAQC,GAAR,CAAYF,GAAZ;AACH,yBAFD,MAEK;AACDC,oCAAQC,GAAR,CAAYhB,KAAKkB,IAAL,CAAUC,IAAtB;AACAC,8BAAE,cAAF,EAAkBC,GAAlB,CAAsB,kBAAtB,EAAyC,SAAOrB,KAAKkB,IAAL,CAAUC,IAAjB,GAAsB,GAA/D;AACA,mCAAOnB,KAAKkB,IAAL,CAAUC,IAAjB;AACH;AACJ,qBARD;AASH;AACJ,aAdD;AAeH,SAhBD,MAgBK;AACDG,oBAAQC,OAAR,CAAgB,YAAY;AACxB,oBAAIC,QAAQhC,OAAOiC,OAAP,CAAe;AAACC,yBAAK1B,KAAKiB;AAAX,iBAAf,CAAZ;;AACA,oBAAGO,KAAH,EAAS;AACL,wBAAIG,MAAMH,MAAMG,GAAN,EAAV;AACAP,sBAAE,cAAF,EAAkBC,GAAlB,CAAsB,kBAAtB,EAAyC,SAAOM,GAAP,GAAW,GAApD;AACA,2BAAO,IAAP;AACH;AACJ,aAPD;AAQH;AACJ;AA/CoB,CAAzB","file":"imports/ui/pages/details.js.map","sourcesContent":["import { Images } from '../../api/images/images.js';\r\nimport './details.html';\r\n\r\nTemplate.details.onCreated(function () {\r\n    let data = Session.get('post_data');\r\n    Session.set('navTitle', data.title);\r\n});\r\n\r\nTemplate.details.onRendered(function () {\r\n});\r\n\r\nTemplate.details.helpers({\r\n    'name': function () {\r\n      return Session.get('name');\r\n    },\r\n   'picture': function () {\r\n       return Session.get('user_img');\r\n   },\r\n    'postSubtitle': function () {\r\n        let data = Session.get('post_data');\r\n        return data.subtitle;\r\n    },\r\n    'postBody': function () {\r\n        let data = Session.get('post_data');\r\n        return data.content;\r\n    },\r\n    'postTags': function () {\r\n        let data = Session.get('post_data');\r\n        return data.tags;\r\n    },\r\n    'postSplash': function () {\r\n        let data = Session.get('post_data');\r\n        if(data.meta.hasUnsplash){\r\n            Meteor.call('setupUnsplash', function (err) {\r\n                if(err){\r\n                    console.log(err);\r\n                }else{\r\n                    Meteor.call('getPhoto', data.imgId,function (err,data) {\r\n                        if(err){\r\n                            console.log(err);\r\n                        }else{\r\n                            console.log(data.urls.full);\r\n                            $('.post-header').css('background-image',\"url(\"+data.urls.full+\")\");\r\n                            return data.urls.full;\r\n                        }\r\n                    })\r\n                }\r\n            });\r\n        }else{\r\n            Tracker.autorun(function () {\r\n                let image = Images.findOne({_id: data.imgId});\r\n                if(image){\r\n                    let url = image.url();\r\n                    $('.post-header').css('background-image',\"url(\"+url+\")\");\r\n                    return true;\r\n                }\r\n            });\r\n        }\r\n    }\r\n});\r\n"]},"hash":"bcab42776aa75c27215f7d95f56f2353588e06bb"}
